/*
sprintf() for JavaScript 0.6
Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
All rights reserved.
*/
function str_repeat(a,b){for(var c=[];b>0;c[--b]=a){}return c.join("")}function sprintf(){var g=0,b,e=arguments[g++],j=[],h,k,d,n,l="";while(e){if(h=/^[^\x25]+/.exec(e)){j.push(h[0])}else{if(h=/^\x25{2}/.exec(e)){j.push("%")}else{if(h=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)){if(((b=arguments[h[1]||g++])==null)||(b==undefined)){throw ("Too few arguments.")}if(/[^s]/.test(h[7])&&(typeof(b)!="number")){throw ("Expecting number but found "+typeof(b))}switch(h[7]){case"b":b=b.toString(2);break;case"c":b=String.fromCharCode(b);break;case"d":b=parseInt(b);break;case"e":b=h[6]?b.toExponential(h[6]):b.toExponential();break;case"f":b=h[6]?parseFloat(b).toFixed(h[6]):parseFloat(b);break;case"o":b=b.toString(8);break;case"s":b=((b=String(b))&&h[6]?b.substring(0,h[6]):b);break;case"u":b=Math.abs(b);break;case"x":b=b.toString(16);break;case"X":b=b.toString(16).toUpperCase();break}b=(/[def]/.test(h[7])&&h[2]&&b>=0?"+"+b:b);d=h[3]?h[3]=="0"?"0":h[3].charAt(1):" ";n=h[5]-String(b).length-l.length;k=h[5]?str_repeat(d,n):"";j.push(l+(h[4]?b+k:k+b))}else{throw ("Huh ?!")}}}e=e.substring(h[0].length)}return j.join("")};/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license*/
var dateFormat=function(){var d=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,a=function(f,e){f=String(f);e=e||2;while(f.length<e){f="0"+f}return f};return function(h,q,u){var i=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(h)=="[object String]"&&!/\d/.test(h)){q=h;h=undefined}h=h?new Date(h):new Date;if(isNaN(h)){throw SyntaxError("invalid date")}q=String(i.masks[q]||q||i.masks["default"]);if(q.slice(0,4)=="UTC:"){q=q.slice(4);u=true}var e=u?"getUTC":"get",f=h[e+"Date"](),g=h[e+"Day"](),n=h[e+"Month"](),v=h[e+"FullYear"](),k=h[e+"Hours"](),p=h[e+"Minutes"](),t=h[e+"Seconds"](),l=h[e+"Milliseconds"](),r=u?0:h.getTimezoneOffset(),j={d:f,dd:a(f),ddd:i.i18n.dayNames[g],dddd:i.i18n.dayNames[g+7],m:n+1,mm:a(n+1),mmm:i.i18n.monthNames[n],mmmm:i.i18n.monthNames[n+12],yy:String(v).slice(2),yyyy:v,h:k%12||12,hh:a(k%12||12),H:k,HH:a(k),M:p,MM:a(p),s:t,ss:a(t),l:a(l,3),L:a(l>99?Math.round(l/10):l),t:k<12?"a":"p",tt:k<12?"am":"pm",T:k<12?"A":"P",TT:k<12?"AM":"PM",Z:u?"UTC":(String(h).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+a(Math.floor(Math.abs(r)/60)*100+Math.abs(r)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10]};return q.replace(d,function(m){return m in j?j[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};function prettyDate(d){var a;if(d.getDate){a=d}else{a=new Date((d||"").replace(/-/g,"/").replace(/[TZ]/g," "))}var c=(((new Date()).getTime()-a.getTime())/1000),b=Math.floor(c/86400);if(isNaN(b)||b<0||b>=31){return}return b==0&&(c<60&&"just now"||c<120&&"1 minute ago"||c<3600&&Math.floor(c/60)+" minutes ago"||c<7200&&"1 hour ago"||c<86400&&Math.floor(c/3600)+" hours ago")||b==1&&"Yesterday"||b<7&&b+" days ago"||b<31&&Math.ceil(b/7)+" weeks ago"};/*
 * Underscore.js 1.4.2
 * http://underscorejs.org
 * (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Underscore may be freely distributed under the MIT license.
*/
(function(){var K=this;var H=K._;var e={};var c=Array.prototype,G=Object.prototype,o=Function.prototype;var I=c.push,L=c.slice,f=c.concat,N=c.unshift,M=G.toString,q=G.hasOwnProperty;var w=c.forEach,B=c.map,C=c.reduce,D=c.reduceRight,v=c.filter,u=c.every,E=c.some,x=c.indexOf,A=c.lastIndexOf,y=Array.isArray,z=Object.keys,t=o.bind;var a=function(O){if(O instanceof a){return O}if(!(this instanceof a)){return new a(O)}this._wrapped=O};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=a}exports._=a}else{K._=a}a.VERSION="1.4.2";var h=a.each=a.forEach=function(T,Q,O){if(T==null){return}if(w&&T.forEach===w){T.forEach(Q,O)}else{if(T.length===+T.length){for(var P=0,S=T.length;P<S;P++){if(Q.call(O,T[P],P,T)===e){return}}}else{for(var R in T){if(a.has(T,R)){if(Q.call(O,T[R],R,T)===e){return}}}}}};a.map=a.collect=function(Q,P,O){var R=[];if(Q==null){return R}if(B&&Q.map===B){return Q.map(P,O)}h(Q,function(U,S,T){R[R.length]=P.call(O,U,S,T)});return R};a.reduce=a.foldl=a.inject=function(S,Q,R,O){var P=arguments.length>2;if(S==null){S=[]}if(C&&S.reduce===C){if(O){Q=a.bind(Q,O)}return P?S.reduce(Q,R):S.reduce(Q)}h(S,function(V,T,U){if(!P){R=V;P=true}else{R=Q.call(O,R,V,T,U)}});if(!P){throw new TypeError("Reduce of empty array with no initial value")}return R};a.reduceRight=a.foldr=function(U,Q,T,O){var P=arguments.length>2;if(U==null){U=[]}if(D&&U.reduceRight===D){if(O){Q=a.bind(Q,O)}return arguments.length>2?U.reduceRight(Q,T):U.reduceRight(Q)}var S=U.length;if(S!==+S){var R=a.keys(U);S=R.length}h(U,function(X,V,W){V=R?R[--S]:--S;if(!P){T=U[V];P=true}else{T=Q.call(O,T,U[V],V,W)}});if(!P){throw new TypeError("Reduce of empty array with no initial value")}return T};a.find=a.detect=function(Q,P,O){var R;b(Q,function(U,S,T){if(P.call(O,U,S,T)){R=U;return true}});return R};a.filter=a.select=function(Q,P,O){var R=[];if(Q==null){return R}if(v&&Q.filter===v){return Q.filter(P,O)}h(Q,function(U,S,T){if(P.call(O,U,S,T)){R[R.length]=U}});return R};a.reject=function(Q,P,O){var R=[];if(Q==null){return R}h(Q,function(U,S,T){if(!P.call(O,U,S,T)){R[R.length]=U}});return R};a.every=a.all=function(Q,P,O){P||(P=a.identity);var R=true;if(Q==null){return R}if(u&&Q.every===u){return Q.every(P,O)}h(Q,function(U,S,T){if(!(R=R&&P.call(O,U,S,T))){return e}});return !!R};var b=a.some=a.any=function(Q,P,O){P||(P=a.identity);var R=false;if(Q==null){return R}if(E&&Q.some===E){return Q.some(P,O)}h(Q,function(U,S,T){if(R||(R=P.call(O,U,S,T))){return e}});return !!R};a.contains=a.include=function(P,Q){var O=false;if(P==null){return O}if(x&&P.indexOf===x){return P.indexOf(Q)!=-1}O=b(P,function(R){return R===Q});return O};a.invoke=function(Q,P){var O=L.call(arguments,2);return a.map(Q,function(R){return(a.isFunction(P)?P:R[P]).apply(R,O)})};a.pluck=function(P,O){return a.map(P,function(Q){return Q[O]})};a.where=function(P,O){if(a.isEmpty(O)){return[]}return a.filter(P,function(R){for(var Q in O){if(O[Q]!==R[Q]){return false}}return true})};a.max=function(Q,P,O){if(!P&&a.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.max.apply(Math,Q)}if(!P&&a.isEmpty(Q)){return -Infinity}var R={computed:-Infinity};h(Q,function(V,T,U){var S=P?P.call(O,V,T,U):V;S>=R.computed&&(R={value:V,computed:S})});return R.value};a.min=function(Q,P,O){if(!P&&a.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.min.apply(Math,Q)}if(!P&&a.isEmpty(Q)){return Infinity}var R={computed:Infinity};h(Q,function(V,T,U){var S=P?P.call(O,V,T,U):V;S<R.computed&&(R={value:V,computed:S})});return R.value};a.shuffle=function(P){var Q;var O=0;var R=[];h(P,function(S){Q=a.random(O++);R[O-1]=R[Q];R[Q]=S});return R};var s=function(O){return a.isFunction(O)?O:function(P){return P[O]}};a.sortBy=function(Q,R,O){var P=s(R);return a.pluck(a.map(Q,function(U,S,T){return{value:U,index:S,criteria:P.call(O,U,S,T)}}).sort(function(U,V){var S=U.criteria;var T=V.criteria;if(S!==T){if(S>T||S===void 0){return 1}if(S<T||T===void 0){return -1}}return U.index<V.index?-1:1}),"value")};var p=function(R,T,P,O){var S={};var Q=s(T);h(R,function(W,U){var V=Q.call(P,W,U,R);O(S,V,W)});return S};a.groupBy=function(P,Q,O){return p(P,Q,O,function(S,R,T){(a.has(S,R)?S[R]:(S[R]=[])).push(T)})};a.countBy=function(P,Q,O){return p(P,Q,O,function(S,R,T){if(!a.has(S,R)){S[R]=0}S[R]++})};a.sortedIndex=function(O,U,R,P){R=R==null?a.identity:s(R);var V=R.call(P,U);var S=0,Q=O.length;while(S<Q){var T=(S+Q)>>>1;R.call(P,O[T])<V?S=T+1:Q=T}return S};a.toArray=function(O){if(!O){return[]}if(O.length===+O.length){return L.call(O)}return a.values(O)};a.size=function(O){return(O.length===+O.length)?O.length:a.keys(O).length};a.first=a.head=a.take=function(O,Q,P){return(Q!=null)&&!P?L.call(O,0,Q):O[0]};a.initial=function(O,Q,P){return L.call(O,0,O.length-((Q==null)||P?1:Q))};a.last=function(O,Q,P){if((Q!=null)&&!P){return L.call(O,Math.max(O.length-Q,0))}else{return O[O.length-1]}};a.rest=a.tail=a.drop=function(O,Q,P){return L.call(O,(Q==null)||P?1:Q)};a.compact=function(O){return a.filter(O,function(P){return !!P})};var n=function(O,Q,P){h(O,function(R){if(a.isArray(R)){Q?I.apply(P,R):n(R,Q,P)}else{P.push(R)}});return P};a.flatten=function(O,P){return n(O,P,[])};a.without=function(O){return a.difference(O,L.call(arguments,1))};a.uniq=a.unique=function(O,R,S,P){var Q=S?a.map(O,S,P):O;var T=[];var U=[];h(Q,function(W,V){if(R?(!V||U[U.length-1]!==W):!a.contains(U,W)){U.push(W);T.push(O[V])}});return T};a.union=function(){return a.uniq(f.apply(c,arguments))};a.intersection=function(O){var P=L.call(arguments,1);return a.filter(a.uniq(O),function(Q){return a.every(P,function(R){return a.indexOf(R,Q)>=0})})};a.difference=function(O){var P=f.apply(c,L.call(arguments,1));return a.filter(O,function(Q){return !a.contains(P,Q)})};a.zip=function(){var O=L.call(arguments);var Q=a.max(a.pluck(O,"length"));var R=new Array(Q);for(var P=0;P<Q;P++){R[P]=a.pluck(O,""+P)}return R};a.object=function(Q,S){var R={};for(var O=0,P=Q.length;O<P;O++){if(S){R[Q[O]]=S[O]}else{R[Q[O][0]]=Q[O][1]}}return R};a.indexOf=function(O,R,Q){if(O==null){return -1}var P=0,S=O.length;if(Q){if(typeof Q=="number"){P=(Q<0?Math.max(0,S+Q):Q)}else{P=a.sortedIndex(O,R);return O[P]===R?P:-1}}if(x&&O.indexOf===x){return O.indexOf(R,Q)}for(;P<S;P++){if(O[P]===R){return P}}return -1};a.lastIndexOf=function(O,S,P){if(O==null){return -1}var Q=P!=null;if(A&&O.lastIndexOf===A){return Q?O.lastIndexOf(S,P):O.lastIndexOf(S)}var R=(Q?P:O.length);while(R--){if(O[R]===S){return R}}return -1};a.range=function(R,T,S){if(arguments.length<=1){T=R||0;R=0}S=arguments[2]||1;var P=Math.max(Math.ceil((T-R)/S),0);var O=0;var Q=new Array(P);while(O<P){Q[O++]=R;R+=S}return Q};var g=function(){};a.bind=function d(R,Q){var P,O;if(R.bind===t&&t){return t.apply(R,L.call(arguments,1))}if(!a.isFunction(R)){throw new TypeError}O=L.call(arguments,2);return P=function(){if(!(this instanceof P)){return R.apply(Q,O.concat(L.call(arguments)))}g.prototype=R.prototype;var T=new g;var S=R.apply(T,O.concat(L.call(arguments)));if(Object(S)===S){return S}return T}};a.bindAll=function(P){var O=L.call(arguments,1);if(O.length==0){O=a.functions(P)}h(O,function(Q){P[Q]=a.bind(P[Q],P)});return P};a.memoize=function(O,P){var Q={};P||(P=a.identity);return function(){var R=P.apply(this,arguments);return a.has(Q,R)?Q[R]:(Q[R]=O.apply(this,arguments))}};a.delay=function(P,Q){var O=L.call(arguments,2);return setTimeout(function(){return P.apply(null,O)},Q)};a.defer=function(O){return a.delay.apply(a,[O,1].concat(L.call(arguments,1)))};a.throttle=function(Q,V){var P,O,U,T,R,S;var W=a.debounce(function(){R=T=false},V);return function(){P=this;O=arguments;var X=function(){U=null;if(R){S=Q.apply(P,O)}W()};if(!U){U=setTimeout(X,V)}if(T){R=true}else{T=true;S=Q.apply(P,O)}W();return S}};a.debounce=function(O,S,P){var R,Q;return function(){var V=this,T=arguments;var W=function(){R=null;if(!P){Q=O.apply(V,T)}};var U=P&&!R;clearTimeout(R);R=setTimeout(W,S);if(U){Q=O.apply(V,T)}return Q}};a.once=function(O){var Q=false,P;return function(){if(Q){return P}Q=true;P=O.apply(this,arguments);O=null;return P}};a.wrap=function(O,P){return function(){var Q=[O];I.apply(Q,arguments);return P.apply(this,Q)}};a.compose=function(){var O=arguments;return function(){var P=arguments;for(var Q=O.length-1;Q>=0;Q--){P=[O[Q].apply(this,P)]}return P[0]}};a.after=function(P,O){if(P<=0){return O()}return function(){if(--P<1){return O.apply(this,arguments)}}};a.keys=z||function(Q){if(Q!==Object(Q)){throw new TypeError("Invalid object")}var P=[];for(var O in Q){if(a.has(Q,O)){P[P.length]=O}}return P};a.values=function(P){var Q=[];for(var O in P){if(a.has(P,O)){Q.push(P[O])}}return Q};a.pairs=function(P){var Q=[];for(var O in P){if(a.has(P,O)){Q.push([O,P[O]])}}return Q};a.invert=function(P){var Q={};for(var O in P){if(a.has(P,O)){Q[P[O]]=O}}return Q};a.functions=a.methods=function(Q){var P=[];for(var O in Q){if(a.isFunction(Q[O])){P.push(O)}}return P.sort()};a.extend=function(O){h(L.call(arguments,1),function(Q){for(var P in Q){O[P]=Q[P]}});return O};a.pick=function(Q){var O={};var P=f.apply(c,L.call(arguments,1));h(P,function(R){if(R in Q){O[R]=Q[R]}});return O};a.omit=function(R){var O={};var Q=f.apply(c,L.call(arguments,1));for(var P in R){if(!a.contains(Q,P)){O[P]=R[P]}}return O};a.defaults=function(O){h(L.call(arguments,1),function(Q){for(var P in Q){if(O[P]==null){O[P]=Q[P]}}});return O};a.clone=function(O){if(!a.isObject(O)){return O}return a.isArray(O)?O.slice():a.extend({},O)};a.tap=function(P,O){O(P);return P};var k=function(O,R,Q,T){if(O===R){return O!==0||1/O==1/R}if(O==null||R==null){return O===R}if(O instanceof a){O=O._wrapped}if(R instanceof a){R=R._wrapped}var U=M.call(O);if(U!=M.call(R)){return false}switch(U){case"[object String]":return O==String(R);case"[object Number]":return O!=+O?R!=+R:(O==0?1/O==1/R:O==+R);case"[object Date]":case"[object Boolean]":return +O==+R;case"[object RegExp]":return O.source==R.source&&O.global==R.global&&O.multiline==R.multiline&&O.ignoreCase==R.ignoreCase}if(typeof O!="object"||typeof R!="object"){return false}var W=Q.length;while(W--){if(Q[W]==O){return T[W]==R}}Q.push(O);T.push(R);var Y=0,X=true;if(U=="[object Array]"){Y=O.length;X=Y==R.length;if(X){while(Y--){if(!(X=k(O[Y],R[Y],Q,T))){break}}}}else{var P=O.constructor,S=R.constructor;if(P!==S&&!(a.isFunction(P)&&(P instanceof P)&&a.isFunction(S)&&(S instanceof S))){return false}for(var V in O){if(a.has(O,V)){Y++;if(!(X=a.has(R,V)&&k(O[V],R[V],Q,T))){break}}}if(X){for(V in R){if(a.has(R,V)&&!(Y--)){break}}X=!Y}}Q.pop();T.pop();return X};a.isEqual=function(O,P){return k(O,P,[],[])};a.isEmpty=function(P){if(P==null){return true}if(a.isArray(P)||a.isString(P)){return P.length===0}for(var O in P){if(a.has(P,O)){return false}}return true};a.isElement=function(O){return !!(O&&O.nodeType===1)};a.isArray=y||function(O){return M.call(O)=="[object Array]"};a.isObject=function(O){return O===Object(O)};h(["Arguments","Function","String","Number","Date","RegExp"],function(O){a["is"+O]=function(P){return M.call(P)=="[object "+O+"]"}});if(!a.isArguments(arguments)){a.isArguments=function(O){return !!(O&&a.has(O,"callee"))}}if(typeof(/./)!=="function"){a.isFunction=function(O){return typeof O==="function"}}a.isFinite=function(O){return a.isNumber(O)&&isFinite(O)};a.isNaN=function(O){return a.isNumber(O)&&O!=+O};a.isBoolean=function(O){return O===true||O===false||M.call(O)=="[object Boolean]"};a.isNull=function(O){return O===null};a.isUndefined=function(O){return O===void 0};a.has=function(P,O){return q.call(P,O)};a.noConflict=function(){K._=H;return this};a.identity=function(O){return O};a.times=function(R,Q,O){for(var P=0;P<R;P++){Q.call(O,P)}};a.random=function(P,O){if(O==null){O=P;P=0}return P+(0|Math.random()*(O-P+1))};var i={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};i.unescape=a.invert(i.escape);var j={escape:new RegExp("["+a.keys(i.escape).join("")+"]","g"),unescape:new RegExp("("+a.keys(i.unescape).join("|")+")","g")};a.each(["escape","unescape"],function(O){a[O]=function(P){if(P==null){return""}return(""+P).replace(j[O],function(Q){return i[O][Q]})}});a.result=function(O,P){if(O==null){return null}var Q=O[P];return a.isFunction(Q)?Q.call(O):Q};a.mixin=function(O){h(a.functions(O),function(Q){var P=a[Q]=O[Q];a.prototype[Q]=function(){var R=[this._wrapped];I.apply(R,arguments);return J.call(this,P.apply(a,R))}})};var r=0;a.uniqueId=function(P){var O=r++;return P?P+O:O};a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/;var m={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var l=/\\|'|\r|\n|\t|\u2028|\u2029/g;a.template=function(W,O,T){T=a.defaults({},T,a.templateSettings);var R=new RegExp([(T.escape||F).source,(T.interpolate||F).source,(T.evaluate||F).source].join("|")+"|$","g");var Q=0;var U="__p+='";W.replace(R,function(aa,X,Z,Y,ab){U+=W.slice(Q,ab).replace(l,function(ac){return"\\"+m[ac]});U+=X?"'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'":Z?"'+\n((__t=("+Z+"))==null?'':__t)+\n'":Y?"';\n"+Y+"\n__p+='":"";Q=ab+aa.length});U+="';\n";if(!T.variable){U="with(obj||{}){\n"+U+"}\n"}U="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+U+"return __p;\n";try{var S=new Function(T.variable||"obj","_",U)}catch(P){P.source=U;throw P}if(O){return S(O,a)}var V=function(X){return S.call(this,X,a)};V.source="function("+(T.variable||"obj")+"){\n"+U+"}";return V};a.chain=function(O){return a(O).chain()};var J=function(O){return this._chain?a(O).chain():O};a.mixin(a);h(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var O=c[P];a.prototype[P]=function(){var Q=this._wrapped;O.apply(Q,arguments);if((P=="shift"||P=="splice")&&Q.length===0){delete Q[0]}return J.call(this,Q)}});h(["concat","join","slice"],function(P){var O=c[P];a.prototype[P]=function(){return J.call(this,O.apply(this._wrapped,arguments))}});a.extend(a.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);/*
 * jQuery JavaScript Library v2.0.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-04-18
 */
(function(window,undefined){var rootjQuery,readyList,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="2.0.0",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else{if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}}else{if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else{if(jQuery.isFunction(selector)){return rootjQuery.ready(selector)}}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num])},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.ready.promise().done(fn);return this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target};jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready")}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){return !isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){if(obj==null){return String(obj)}return typeof obj==="object"||typeof obj==="function"?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}try{if(obj.constructor&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}return true},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)},parseJSON:JSON.parse,parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml},noop:function(){},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function(text){return text==null?"":core_trim.call(text)},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{core_push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:core_indexOf.call(arr,elem,i)},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i])}}return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}}return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else{if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<length;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:Date.now,swap:function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||type!=="function"&&(length===0||typeof length==="number"&&length>0&&(length-1) in obj)}rootjQuery=jQuery(document);
/*
     * Sizzle CSS Selector Engine v1.9.2-pre
     * http://sizzlejs.com/
     *
     * Copyright 2013 jQuery Foundation, Inc. and other contributors
     * Released under the MIT license
     * http://jquery.org/license
     *
     * Date: 2013-04-16
     */
(function(window,undefined){var i,cachedruns,Expr,getText,isXML,compile,outermostContext,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-(new Date()),preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=false,sortOrder=function(){return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i}}return -1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rsibling=new RegExp(whitespace+"*[+~]"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"boolean":new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!==high?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}target.length=j-1}}}function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return(cache=function(key,value){if(keys.push(key+=" ")>Expr.cacheLength){delete cache[keys.shift()]}return(cache[key]=value)})}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return !!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;results=results||[];if(!selector||typeof selector!=="string"){return results}if((nodeType=context.nodeType)!==1&&nodeType!==9){return[]}if(documentIsHTML&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else{if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else{if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i])}newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return !div.getElementsByTagName("*").length});support.attributes=assert(function(div){div.className="i";return !div.getAttribute("className")});support.getElementsByClassName=assert(function(div){div.innerHTML="<div class='a'></div><div class='a i'></div>";div.firstChild.className="i";return div.getElementsByClassName("i").length===2});support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return !doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}};Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=isNative(doc.querySelectorAll))){assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("t","");if(div.querySelectorAll("[t^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if((support.matchesSelector=isNative((matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true}}}return false};sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(compare){if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===doc||contains(preferredDoc,a)){return -1}if(b===doc||contains(preferredDoc,b)){return 1}return sortInput?(indexOf.call(sortInput,a)-indexOf.call(sortInput,b)):0}return compare&4?-1:1}return a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b){hasDuplicate=true;return 0}else{if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?(indexOf.call(sortInput,a)-indexOf.call(sortInput,b)):0}else{if(aup===bup){return siblingCheck(a,b)}}}cur=a;while((cur=cur.parentNode)){ap.unshift(cur)}cur=b;while((cur=cur.parentNode)){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&fn(elem,name,!documentIsHTML);return val===undefined?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}return results};function siblingCheck(a,b){var cur=b&&a,diff=cur&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while((cur=cur.nextSibling)){if(cur===b){return -1}}}return a?1:-1}function boolHandler(elem,name,isXML){var val;return isXML?undefined:(val=elem.getAttributeNode(name))&&val.specified?val.value:elem[name]===true?name.toLowerCase():null}function interpolationHandler(elem,name,isXML){var val;return isXML?undefined:(val=elem.getAttribute(name,name.toLowerCase()==="type"?1:2))}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j])}}})})}getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){for(;(node=elem[i]);i++){ret+=getText(node)}}else{if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd")}else{if(match[3]){Sizzle.error(match[0])}}return match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr.CHILD.test(match[0])){return null}if(match[4]){match[2]=match[4]}else{if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return !!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1]}else{while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||(diff%first===0&&diff/first>=0)}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return !results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeName>"@"||elem.nodeType===3||elem.nodeType===4){return false}}return true},parent:function(elem){return !Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};for(i in {radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in {submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===true||data===cachedruns){return data===true}}else{cache=outerCache[dir]=[dirkey];cache[1]=matcher(elem,context,xml)||cachedruns;if(cache[1]===true){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem))}}postFinder(null,(matcherOut=[]),temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1);if(outermost){outermostContext=context!==document&&context;cachedruns=matcherCachedRuns}for(;(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while((matcher=elementMatchers[j++])){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique;cachedruns=++matcherCachedRuns}}if(bySet){if((elem=!matcher&&elem)){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group){group=tokenize(selector)}i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}selector=selector.slice(tokens.shift().value.length)}i=matchExpr.needsContext.test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break}if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}}compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector));return results}Expr.pseudos.nth=Expr.pseudos.eq;function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();support.sortStable=expando.split("").sort(sortOrder).join("")===expando;setDocument();[0,0].sort(sortOrder);support.detectDuplicates=hasDuplicate;assert(function(div){div.innerHTML="<a href='#'></a>";if(div.firstChild.getAttribute("href")!=="#"){var attrs="type|href|height|width".split("|"),i=attrs.length;while(i--){Expr.attrHandle[attrs[i]]=interpolationHandler}}});assert(function(div){if(div.getAttribute("disabled")!=null){var attrs=booleans.split("|"),i=attrs.length;while(i--){Expr.attrHandle[attrs[i]]=boolHandler}}});jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains})(window);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else{if(memory){list=[]}else{self.disable()}}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else{if(arg&&arg.length&&type!=="string"){add(arg)}}})})(arguments);if(firing){firingLength=list.length}else{if(memory){firingStart=start;fire(memory)}}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return !list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return !stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return !!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else{if(!(--remaining)){deferred.resolveWith(contexts,values)}}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});jQuery.support=(function(support){var input=document.createElement("input"),fragment=document.createDocumentFragment(),div=document.createElement("div"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));if(!input.type){return support}input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;support.reliableMarginRight=true;support.boxSizingReliable=true;support.pixelPosition=false;input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";input.setAttribute("checked","t");input.setAttribute("name","t");fragment.appendChild(input);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.focusinBubbles="onfocusin" in window;div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";jQuery(function(){var container,marginDiv,divReset="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",body=document.getElementsByTagName("body")[0];if(!body){return}container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";body.appendChild(container).appendChild(div);div.innerHTML="";div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";jQuery.swap(body,body.style.zoom!=null?{zoom:1}:{},function(){support.boxSizing=div.offsetWidth===4});if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}body.removeChild(container)});return support})({});var data_user,data_priv,rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=jQuery.expando+Math.random()}Data.uid=1;Data.accepts=function(owner){return owner.nodeType?owner.nodeType===1||owner.nodeType===9:true};Data.prototype={key:function(owner){if(!Data.accepts(owner)){return 0}var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock]){this.cache[unlock]={}}return unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value}else{if(jQuery.isEmptyObject(cache)){this.cache[unlock]=data}else{for(prop in data){cache[prop]=data[prop]}}}},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function(owner,key,value){if(key===undefined||((key&&typeof key==="string")&&value===undefined)){return this.get(owner,key)}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={}}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{if(key in cache){name=[key]}else{name=jQuery.camelCase(key);name=name in cache?[name]:(name.match(core_rnotwhite)||[])}}i=name.length;while(i--){delete cache[name[i]]}}},hasData:function(owner){return !jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){delete this.cache[this.key(owner)]}};data_user=new Data();data_priv=new Data();jQuery.extend({acceptData:Data.accepts,hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){attrs=elem.attributes;for(;i<attrs.length;i++){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name])}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){data_user.set(this,key)})}return jQuery.access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data}data=data_user.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}});function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?JSON.parse(data):data}catch(e){}data_user.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}hooks.cur=fn;if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=typeof value==="string"&&value;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}elem.className=jQuery.trim(cur)}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=arguments.length===0||typeof value==="string"&&value;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}elem.className=value?jQuery.trim(cur):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else{if(type===core_strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,self.val())}else{val=value}if(val==null){val=""}else{if(typeof val==="number"){val+=""}else{if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}}}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return !val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if((option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}},attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute===core_strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match["boolean"].test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else{if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){propName=jQuery.propFix[name]||name;if(jQuery.expr.match["boolean"].test(name)){elem[propName]=false}elem.removeAttribute(name)}}},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem[name]=value)}else{return hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match["boolean"].source.match(/\w+/g),function(i,name){var getter=jQuery.expr.attrHandle[name]||jQuery.find.attr;jQuery.expr.attrHandle[name]=function(elem,name,isXML){var fn=jQuery.expr.attrHandle[name],ret=isXML?undefined:(jQuery.expr.attrHandle[name]=undefined)!=getter(elem,name,isXML)?name.toLowerCase():null;jQuery.expr.attrHandle[name]=fn;return ret}});if(!jQuery.support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0)}}};if(!jQuery.support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==core_strundefined&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=(types||"").match(core_rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}elem=null},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(core_rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false){event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=core_slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)))}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined){event.originalEvent.returnValue=event.result}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true)}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else{if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}}if(fn===false){fn=returnFalse}else{if(!fn){return this}}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var self,matched,i,l=this.length;if(typeof selector!=="string"){self=this;return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<l;i++){if(jQuery.contains(self[i],this)){return true}}}))}matched=[];for(i=0;i<l;i++){jQuery.find(selector,this[i],matched)}matched=this.pushStack(l>1?jQuery.unique(matched):matched);matched.selector=(this.selector?this.selector+" ":"")+selector;return matched},has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},is:function(selector){return !!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=(rneedsContext.test(selectors)||typeof selectors!=="string")?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){cur=matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof elem==="string"){return core_indexOf.call(jQuery(elem),this[0])}return core_indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)}if(name[0]==="p"){matched.reverse()}}return this.pushStack(matched)}});jQuery.extend({filter:function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))},dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched},sibling:function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched}});function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return !!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not})}if(typeof qualifier==="string"){if(isSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return(core_indexOf.call(qualifier,elem)>=0)!==not})}var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.col=wrapMap.thead;wrapMap.th=wrapMap.td;jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var args=jQuery.map(this,function(elem){return[elem.nextSibling,elem.parentNode]}),i=0;this.domManip(arguments,function(elem){var next=args[i++],parent=args[i++];if(parent){jQuery(this).remove();parent.insertBefore(elem,next)}},true);return i?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback,allowIntersection){args=core_concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(l<=1||typeof value!=="string"||jQuery.support.checkClone||!rchecked.test(value))){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback,allowIntersection)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,!allowIntersection&&this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){jQuery._evalUrl(node.src)}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);core_push.apply(ret,elems.get())}return this.pushStack(ret)}});jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!jQuery.support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,i=0,l=elems.length,fragment=context.createDocumentFragment(),nodes=[];for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else{if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.firstChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}}fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment},cleanData:function(elems){var data,elem,type,l=elems.length,i=0,special=jQuery.event.special;for(;i<l;i++){elem=elems[i];if(jQuery.acceptData(elem)){data=data_priv.access(elem);if(data){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}}data_user.discard(elem);data_priv.discard(elem)}},_evalUrl:function(url){return jQuery.ajax({url:url,type:"GET",dataType:"text",async:false,global:false,success:jQuery.globalEval})}});function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType===1?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var l=elems.length,i=0;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=jQuery.extend({},pdataOld);events=pdataOld.events;data_priv.set(dest,pdataCur);if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&manipulation_rcheckableType.test(src.type)){dest.checked=src.checked}else{if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}}jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});var curCSS,iframe,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name}var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}function getStyles(elem){return window.getComputedStyle(elem,null)}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}}else{if(!values[index]){hidden=isHidden(elem);if(display&&display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){var bool=typeof state==="boolean";return this.each(function(){if(bool?state:isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value)){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!jQuery.support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get" in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret};function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0}return(val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;doc.write("<!doctype html><html><body>");doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.remove();return display}jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return elem.offsetWidth===0&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}}}}if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}}}})}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0};jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else{if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}}jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else{if(seekingTransport){return !(selected=dataTypeOrTransport)}}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else{if(params&&typeof params==="object"){type="POST"}}if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=(s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data);delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in {success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204){statusText="nocontent"}else{if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else{if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else{if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}}return{state:"success",data:response}}jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(ajax_nonce++));this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else{if(s.jsonp!==false){s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest()}catch(e){}};var xhrSupported=jQuery.ajaxSettings.xhr(),xhrSuccessStatus={0:200,1223:204},xhrId=0,xhrCallbacks={};if(window.ActiveXObject){jQuery(window).on("unload",function(){for(var key in xhrCallbacks){xhrCallbacks[key]()}xhrCallbacks=undefined})}jQuery.support.cors=!!xhrSupported&&("withCredentials" in xhrSupported);jQuery.support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback;if(jQuery.support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,id,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){delete xhrCallbacks[id];callback=xhr.onload=xhr.onerror=null;if(type==="abort"){xhr.abort()}else{if(type==="error"){complete(xhr.status||404,xhr.statusText)}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders())}}}}};xhr.onload=callback();xhr.onerror=callback("error");callback=xhrCallbacks[(id=xhrId++)]=callback("abort");xhr.send(options.hasContent&&options.data||null)},abort:function(){if(callback){callback()}}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||end||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return(fxNow=jQuery.now())}function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(collection[index].call(animation,prop,value)){return}}})}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}createTweens(animation,props);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand" in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height" in props||"width" in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}dataShow=data_priv.get(elem,"fxshow");for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow!==undefined&&dataShow[index]!==undefined){hidden=true}else{continue}}handled.push(index)}}length=handled.length;if(length){dataShow=data_priv.get(elem,"fxshow")||data_priv.access(elem,"fxshow",{});if("hidden" in dataShow){hidden=dataShow.hidden}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return !result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else{if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);doAnimation.finish=function(){anim.stop(true)};if(empty||data_priv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.cur&&hooks.cur.finish){hooks.cur.finish.call(this)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)){jQuery.fx.start()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}}jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!==core_strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}};jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=(options.top-curOffset.top)+curTop}if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft}if("using" in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)}else{elem[method]=val}},method,val,arguments.length,null)}});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof module==="object"&&typeof module.exports==="object"){module.exports=jQuery}else{if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}}if(typeof window==="object"&&typeof window.document==="object"){window.jQuery=window.$=jQuery}})(window);/*
    Copyright 2013 jQuery Foundation and other contributors
    http://jquery.com/
*/
(function(b,e,d){var c,a;b.uaMatch=function(h){h=h.toLowerCase();var f=/(chrome)[ \/]([\w.]+)/.exec(h)||/(webkit)[ \/]([\w.]+)/.exec(h)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(h)||/(msie) ([\w.]+)/.exec(h)||h.indexOf("trident")&&/(rv) ([\w.]+)/.exec(h)||h.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(h)||[];var g=/(ipad)/.exec(h)||/(iphone)/.exec(h)||/(android)/.exec(h)||[];return{browser:f[1]||"",version:f[2]||"0",platform:g[0]||""}};c=b.uaMatch(e.navigator.userAgent);a={};if(c.browser){a[c.browser]=true;a.version=c.version}if(c.platform){a[c.platform]=true}if(a.chrome){a.webkit=true}else{if(a.webkit){a.safari=true}}if(a.rv){a.msie=true}b.browser=a})(jQuery,window);/* jQuery UI - v1.10.2 - 2013-05-01
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.sortable.js, jquery.ui.tabs.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(a,d){var e=0,c=/^ui-id-\d+$/;a.ui=a.ui||{};a.extend(a.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({focus:(function(g){return function(h,i){return typeof h==="number"?this.each(function(){var j=this;setTimeout(function(){a(j).focus();if(i){i.call(j)}},h)}):g.apply(this,arguments)}})(a.fn.focus),scrollParent:function(){var g;if((a.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.css(this,"position"))&&(/(auto|scroll)/).test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?a(document):g},zIndex:function(j){if(j!==d){return this.css("zIndex",j)}if(this.length){var g=a(this[0]),h,i;while(g.length&&g[0]!==document){h=g.css("position");if(h==="absolute"||h==="relative"||h==="fixed"){i=parseInt(g.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}g=g.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++e)}})},removeUniqueId:function(){return this.each(function(){if(c.test(this.id)){a(this).removeAttr("id")}})}});function b(g,i){var j,k,h,l=g.nodeName.toLowerCase();if("area"===l){j=g.parentNode;k=j.name;if(!g.href||!k||j.nodeName.toLowerCase()!=="map"){return false}h=a("img[usemap=#"+k+"]")[0];return !!h&&f(h)}return(/input|select|textarea|button|object/.test(l)?!g.disabled:"a"===l?g.href||i:i)&&f(g)}function f(g){return a.expr.filters.visible(g)&&!a(g).parents().addBack().filter(function(){return a.css(this,"visibility")==="hidden"}).length}a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(g){return function(h){return !!a.data(h,g)}}):function(g,h,j){return !!a.data(g,j[3])},focusable:function(g){return b(g,!isNaN(a.attr(g,"tabindex")))},tabbable:function(g){var i=a.attr(g,"tabindex"),h=isNaN(i);return(h||i>=0)&&b(g,!h)}});if(!a("<a>").outerWidth(1).jquery){a.each(["Width","Height"],function(g,h){var l=h==="Width"?["Left","Right"]:["Top","Bottom"],m=h.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function k(n,p,i,o){a.each(l,function(){p-=parseFloat(a.css(n,"padding"+this))||0;if(i){p-=parseFloat(a.css(n,"border"+this+"Width"))||0}if(o){p-=parseFloat(a.css(n,"margin"+this))||0}});return p}a.fn["inner"+h]=function(i){if(i===d){return j["inner"+h].call(this)}return this.each(function(){a(this).css(m,k(this,i)+"px")})};a.fn["outer"+h]=function(n,i){if(typeof n!=="number"){return j["outer"+h].call(this,n)}return this.each(function(){a(this).css(m,k(this,n,true,i)+"px")})}})}if(!a.fn.addBack){a.fn.addBack=function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}}if(a("<a>").data("a-b","a").removeData("a-b").data("a-b")){a.fn.removeData=(function(g){return function(h){if(arguments.length){return g.call(this,a.camelCase(h))}else{return g.call(this)}}})(a.fn.removeData)}a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.support.selectstart="onselectstart" in document.createElement("div");a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.extend(a.ui,{plugin:{add:function(h,j,l){var g,k=a.ui[h].prototype;for(g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(j,k,g){var h,l=j.plugins[k];if(!l||!j.element[0].parentNode||j.element[0].parentNode.nodeType===11){return}for(h=0;h<l.length;h++){if(j.options[l[h][0]]){l[h][1].apply(j.element,g)}}}},hasScroll:function(h,g){if(a(h).css("overflow")==="hidden"){return false}var j=(g&&g==="left")?"scrollLeft":"scrollTop",i=false;if(h[j]>0){return true}h[j]=1;i=(h[j]>0);h[j]=0;return i}})})(jQuery);(function(a,d){var e=0,c=Array.prototype.slice,b=a.cleanData;a.cleanData=function(h){for(var j=0,g;(g=h[j])!=null;j++){try{a(g).triggerHandler("remove")}catch(f){}}b(h)};a.widget=function(k,f,m){var j,i,h,g,n={},l=k.split(".")[0];k=k.split(".")[1];j=l+"-"+k;if(!m){m=f;f=a.Widget}a.expr[":"][j.toLowerCase()]=function(o){return !!a.data(o,j)};a[l]=a[l]||{};i=a[l][k];h=a[l][k]=function(p,o){if(!this._createWidget){return new h(p,o)}if(arguments.length){this._createWidget(p,o)}};a.extend(h,i,{version:m.version,_proto:a.extend({},m),_childConstructors:[]});g=new f();g.options=a.widget.extend({},g.options);a.each(m,function(o,p){if(!a.isFunction(p)){n[o]=p;return}n[o]=(function(){var q=function(){return f.prototype[o].apply(this,arguments)},r=function(s){return f.prototype[o].apply(this,s)};return function(){var s=this._super,t=this._superApply,u;this._super=q;this._superApply=r;u=p.apply(this,arguments);this._super=s;this._superApply=t;return u}})()});h.prototype=a.widget.extend(g,{widgetEventPrefix:i?g.widgetEventPrefix:k},n,{constructor:h,namespace:l,widgetName:k,widgetFullName:j});if(i){a.each(i._childConstructors,function(q,o){var p=o.prototype;a.widget(p.namespace+"."+p.widgetName,h,o._proto)});delete i._childConstructors}else{f._childConstructors.push(h)}a.widget.bridge(k,h)};a.widget.extend=function(j){var f=c.call(arguments,1),g=0,h=f.length,i,k;for(;g<h;g++){for(i in f[g]){k=f[g][i];if(f[g].hasOwnProperty(i)&&k!==d){if(a.isPlainObject(k)){j[i]=a.isPlainObject(j[i])?a.widget.extend({},j[i],k):a.widget.extend({},k)}else{j[i]=k}}}}return j};a.widget.bridge=function(g,h){var f=h.prototype.widgetFullName||g;a.fn[g]=function(k){var j=typeof k==="string",i=c.call(arguments,1),l=this;k=!j&&i.length?a.widget.extend.apply(null,[k].concat(i)):k;if(j){this.each(function(){var n,m=a.data(this,f);if(!m){return a.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+k+"'")}if(!a.isFunction(m[k])||k.charAt(0)==="_"){return a.error("no such method '"+k+"' for "+g+" widget instance")}n=m[k].apply(m,i);if(n!==m&&n!==d){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=a.data(this,f);if(m){m.option(k||{})._init()}else{a.data(this,f,new h(k,this))}})}return l}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(g,f){f=a(f||this.defaultElement||this)[0];this.element=a(f);this.uuid=e++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),g);this.bindings=a();this.hoverable=a();this.focusable=a();if(f!==this){a.data(f,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===f){this.destroy()}}});this.document=a(f.style?f.ownerDocument:f.document||f);this.window=a(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(h,l){var j=h,k,f,g;if(arguments.length===0){return a.widget.extend({},this.options)}if(typeof h==="string"){j={};k=h.split(".");h=k.shift();if(k.length){f=j[h]=a.widget.extend({},this.options[h]);for(g=0;g<k.length-1;g++){f[k[g]]=f[k[g]]||{};f=f[k[g]]}h=k.pop();if(l===d){return f[h]===d?null:f[h]}f[h]=l}else{if(l===d){return this.options[h]===d?null:this.options[h]}j[h]=l}}this._setOptions(j);return this},_setOptions:function(g){var f;for(f in g){this._setOption(f,g[f])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(j,g,h){var f,i=this;if(typeof j!=="boolean"){h=g;g=j;j=false}if(!h){h=g;g=this.element;f=this.widget()}else{g=f=a(g);this.bindings=this.bindings.add(g)}a.each(h,function(k,m){function n(){if(!j&&(i.options.disabled===true||a(this).hasClass("ui-state-disabled"))){return}return(typeof m==="string"?i[m]:m).apply(i,arguments)}if(typeof m!=="string"){n.guid=m.guid=m.guid||n.guid||a.guid++}var o=k.match(/^(\w+)\s*(.*)$/),l=o[1]+i.eventNamespace,p=o[2];if(p){f.delegate(p,l,n)}else{g.bind(l,n)}})},_off:function(f,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;f.unbind(g).undelegate(g)},_delay:function(g,f){function h(){return(typeof g==="string"?i[g]:g).apply(i,arguments)}var i=this;return setTimeout(h,f||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){a(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){a(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){a(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){a(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(k,h,g){var j,i,f=this.options[k];g=g||{};h=a.Event(h);h.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase();h.target=this.element[0];i=h.originalEvent;if(i){for(j in i){if(!(j in h)){h[j]=i[j]}}}this.element.trigger(h,g);return !(a.isFunction(f)&&f.apply(this.element[0],[h].concat(g))===false||h.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(g,f){a.Widget.prototype["_"+g]=function(j,l,h){if(typeof l==="string"){l={effect:l}}var k,i=!l?g:l===true||typeof l==="number"?f:l.effect||f;l=l||{};if(typeof l==="number"){l={duration:l}}k=!a.isEmptyObject(l);l.complete=h;if(l.delay){j.delay(l.delay)}if(k&&a.effects&&a.effects.effect[i]){j[g](l)}else{if(i!==g&&j[i]){j[i](l.duration,l.easing,h)}else{j.queue(function(m){a(this)[g]();if(h){h.call(j[0])}m()})}}}})})(jQuery);(function(a,c){var b=false;a(document).mouseup(function(){b=false});a.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(e){return d._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(true===a.data(e.target,d.widgetName+".preventClickEvent")){a.removeData(e.target,d.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(f){if(b){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var g=this,d=(f.which===1),e=(typeof this.options.cancel==="string"&&f.target.nodeName?a(f.target).closest(this.options.cancel).length:false);if(!d||e||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===a.data(f.target,this.widgetName+".preventClickEvent")){a.removeData(f.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return g._mouseMove(h)};this._mouseUpDelegate=function(h){return g._mouseUp(h)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();b=true;return true},_mouseMove:function(d){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){a.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var d=this.options;if(this.helper||d.disabled||a(c.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(c);if(!this.handle){return false}a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(c){var d=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));if(d.containment){this._setContainment()}if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!d.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,c)}this._mouseDrag(c,true);if(a.ui.ddmanager){a.ui.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,d){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!d){var e=this._uiHash();if(this._trigger("drag",c,e)===false){this._mouseUp({});return false}this.position=e.position}if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,c)}return false},_mouseStop:function(f){var d,g=this,e=false,c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){c=a.ui.ddmanager.drop(this,f)}if(this.dropped){c=this.dropped;this.dropped=false}d=this.element[0];while(d&&(d=d.parentNode)){if(d===document){e=true}}if(!e&&this.options.helper==="original"){return false}if((this.options.revert==="invalid"&&!c)||(this.options.revert==="valid"&&c)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c))){a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(g._trigger("stop",f)!==false){g._clear()}})}else{if(this._trigger("stop",f)!==false){this._clear()}}return false},_mouseUp:function(c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.ui.ddmanager){a.ui.ddmanager.dragStop(this,c)}return a.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){return this.options.handle?!!a(c.target).closest(this.element.find(this.options.handle)).length:true},_createHelper:function(c){var e=this.options,d=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[c])):(e.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!d.parents("body").length){d.appendTo((e.appendTo==="parent"?this.element[0].parentNode:e.appendTo))}if(d[0]!==this.element[0]&&!(/(fixed|absolute)/).test(d.css("position"))){d.css("position","absolute")}return d},_adjustOffsetFromHelper:function(c){if(typeof c==="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]===document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g,d,e,f=this.options;if(f.containment==="parent"){f.containment=this.helper[0].parentNode}if(f.containment==="document"||f.containment==="window"){this.containment=[f.containment==="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,f.containment==="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(f.containment==="document"?0:a(window).scrollLeft())+a(f.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(f.containment==="document"?0:a(window).scrollTop())+(a(f.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)&&f.containment.constructor!==Array){d=a(f.containment);e=d[0];if(!e){return}g=(a(e).css("overflow")!=="hidden");this.containment=[(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0),(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0),(g?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderRightWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(g?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderBottomWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=d}else{if(f.containment.constructor===Array){this.containment=f.containment}}},_convertPositionTo:function(c,f){if(!f){f=this.position}var e=c==="absolute"?1:-1,g=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(g[0].tagName);return{top:(f.top+this.offset.relative.top*e+this.offset.parent.top*e-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(h?0:g.scrollTop()))*e)),left:(f.left+this.offset.relative.left*e+this.offset.parent.left*e-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:g.scrollLeft())*e))}},_generatePosition:function(e){var d,c,l,f,g=this.options,j=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=(/(html|body)/i).test(j[0].tagName),h=e.pageX,i=e.pageY;if(this.originalPosition){if(this.containment){if(this.relative_container){c=this.relative_container.offset();d=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]}else{d=this.containment}if(e.pageX-this.offset.click.left<d[0]){h=d[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<d[1]){i=d[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>d[2]){h=d[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>d[3]){i=d[3]+this.offset.click.top}}if(g.grid){l=g.grid[1]?this.originalPageY+Math.round((i-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY;i=d?((l-this.offset.click.top>=d[1]||l-this.offset.click.top>d[3])?l:((l-this.offset.click.top>=d[1])?l-g.grid[1]:l+g.grid[1])):l;f=g.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX;h=d?((f-this.offset.click.left>=d[0]||f-this.offset.click.left>d[2])?f:((f-this.offset.click.left>=d[0])?f-g.grid[0]:f+g.grid[0])):f}}return{top:(i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(k?0:j.scrollTop())))),left:(h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():k?0:j.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,c,e){e=e||this._uiHash();a.ui.plugin.call(this,d,[c,e]);if(d==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,d,c,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,f){var d=a(this).data("ui-draggable"),e=d.options,g=a.extend({},f,{item:d.element});d.sortables=[];a(e.connectToSortable).each(function(){var h=a.data(this,"ui-sortable");if(h&&!h.options.disabled){d.sortables.push({instance:h,shouldRevert:h.options.revert});h.refreshPositions();h._trigger("activate",c,g)}})},stop:function(c,e){var d=a(this).data("ui-draggable"),f=a.extend({},e,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert}this.instance._mouseStop(c);this.instance.options.helper=this.instance.options._helper;if(d.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",c,f)}})},drag:function(c,f){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var g=false,h=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){g=true;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(h.instance.element[0],this.instance.element[0])){g=false}return g})}if(g){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};c.target=this.instance.currentItem[0];this.instance._mouseCapture(c,true);this.instance._mouseStart(c,true,true);this.instance.offset.click.top=d.offset.click.top;this.instance.offset.click.left=d.offset.click.left;this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top;d._trigger("toSortable",c);d.dropped=this.instance.element;d.currentItem=d.element;this.instance.fromOutside=d}if(this.instance.currentItem){this.instance._mouseDrag(c)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",c,this.instance._uiHash(this.instance));this.instance._mouseStop(c,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}d._trigger("fromSortable",c);d.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("ui-draggable").options;if(d.css("cursor")){c._cursor=d.css("cursor")}d.css("cursor",c.cursor)},stop:function(){var c=a(this).data("ui-draggable").options;if(c._cursor){a("body").css("cursor",c._cursor)}}});a.ui.plugin.add("draggable","opacity",{start:function(c,f){var e=a(f.helper),d=a(this).data("ui-draggable").options;if(e.css("opacity")){d._opacity=e.css("opacity")}e.css("opacity",d.opacity)},stop:function(c,e){var d=a(this).data("ui-draggable").options;if(d._opacity){a(e.helper).css("opacity",d._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(){var c=a(this).data("ui-draggable");if(c.scrollParent[0]!==document&&c.scrollParent[0].tagName!=="HTML"){c.overflowOffset=c.scrollParent.offset()}},drag:function(c){var d=a(this).data("ui-draggable"),e=d.options,f=false;if(d.scrollParent[0]!==document&&d.scrollParent[0].tagName!=="HTML"){if(!e.axis||e.axis!=="x"){if((d.overflowOffset.top+d.scrollParent[0].offsetHeight)-c.pageY<e.scrollSensitivity){d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed}else{if(c.pageY-d.overflowOffset.top<e.scrollSensitivity){d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed}}}if(!e.axis||e.axis!=="y"){if((d.overflowOffset.left+d.scrollParent[0].offsetWidth)-c.pageX<e.scrollSensitivity){d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed}else{if(c.pageX-d.overflowOffset.left<e.scrollSensitivity){d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed}}}}else{if(!e.axis||e.axis!=="x"){if(c.pageY-a(document).scrollTop()<e.scrollSensitivity){f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed)}else{if(a(window).height()-(c.pageY-a(document).scrollTop())<e.scrollSensitivity){f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed)}}}if(!e.axis||e.axis!=="y"){if(c.pageX-a(document).scrollLeft()<e.scrollSensitivity){f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed)}else{if(a(window).width()-(c.pageX-a(document).scrollLeft())<e.scrollSensitivity){f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)}}}}if(f!==false&&a.ui.ddmanager&&!e.dropBehaviour){a.ui.ddmanager.prepareOffsets(d,c)}}});a.ui.plugin.add("draggable","snap",{start:function(){var c=a(this).data("ui-draggable"),d=c.options;c.snapElements=[];a(d.snap.constructor!==String?(d.snap.items||":data(ui-draggable)"):d.snap).each(function(){var f=a(this),e=f.offset();if(this!==c.element[0]){c.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:e.top,left:e.left})}})},drag:function(g,w){var v,e,n,s,m,q,u,c,j,h,k=a(this).data("ui-draggable"),p=k.options,f=p.snapTolerance,x=w.offset.left,y=x+k.helperProportions.width,z=w.offset.top,A=z+k.helperProportions.height;for(j=k.snapElements.length-1;j>=0;j--){m=k.snapElements[j].left;q=m+k.snapElements[j].width;u=k.snapElements[j].top;c=u+k.snapElements[j].height;if(!((m-f<x&&x<q+f&&u-f<z&&z<c+f)||(m-f<x&&x<q+f&&u-f<A&&A<c+f)||(m-f<y&&y<q+f&&u-f<z&&z<c+f)||(m-f<y&&y<q+f&&u-f<A&&A<c+f))){if(k.snapElements[j].snapping){(k.options.snap.release&&k.options.snap.release.call(k.element,g,a.extend(k._uiHash(),{snapItem:k.snapElements[j].item})))}k.snapElements[j].snapping=false;continue}if(p.snapMode!=="inner"){v=Math.abs(u-A)<=f;e=Math.abs(c-z)<=f;n=Math.abs(m-y)<=f;s=Math.abs(q-x)<=f;if(v){w.position.top=k._convertPositionTo("relative",{top:u-k.helperProportions.height,left:0}).top-k.margins.top}if(e){w.position.top=k._convertPositionTo("relative",{top:c,left:0}).top-k.margins.top}if(n){w.position.left=k._convertPositionTo("relative",{top:0,left:m-k.helperProportions.width}).left-k.margins.left}if(s){w.position.left=k._convertPositionTo("relative",{top:0,left:q}).left-k.margins.left}}h=(v||e||n||s);if(p.snapMode!=="outer"){v=Math.abs(u-z)<=f;e=Math.abs(c-A)<=f;n=Math.abs(m-x)<=f;s=Math.abs(q-y)<=f;if(v){w.position.top=k._convertPositionTo("relative",{top:u,left:0}).top-k.margins.top}if(e){w.position.top=k._convertPositionTo("relative",{top:c-k.helperProportions.height,left:0}).top-k.margins.top}if(n){w.position.left=k._convertPositionTo("relative",{top:0,left:m}).left-k.margins.left}if(s){w.position.left=k._convertPositionTo("relative",{top:0,left:q-k.helperProportions.width}).left-k.margins.left}}if(!k.snapElements[j].snapping&&(v||e||n||s||h)){(k.options.snap.snap&&k.options.snap.snap.call(k.element,g,a.extend(k._uiHash(),{snapItem:k.snapElements[j].item})))}k.snapElements[j].snapping=(v||e||n||s||h)}}});a.ui.plugin.add("draggable","stack",{start:function(){var d,e=this.data("ui-draggable").options,c=a.makeArray(a(e.stack)).sort(function(f,g){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(!c.length){return}d=parseInt(a(c[0]).css("zIndex"),10)||0;a(c).each(function(f){a(this).css("zIndex",d+f)});this.css("zIndex",(d+c.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(c,f){var e=a(f.helper),d=a(this).data("ui-draggable").options;if(e.css("zIndex")){d._zIndex=e.css("zIndex")}e.css("zIndex",d.zIndex)},stop:function(c,e){var d=a(this).data("ui-draggable").options;if(d._zIndex){a(e.helper).css("zIndex",d._zIndex)}}})})(jQuery);(function(a,c){function b(f,d,e){return(f>d)&&(f<(d+e))}a.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,d=e.accept;this.isover=false;this.isout=true;this.accept=a.isFunction(d)?d:function(f){return f.is(d)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[e.scope]=a.ui.ddmanager.droppables[e.scope]||[];a.ui.ddmanager.droppables[e.scope].push(this);(e.addClasses&&this.element.addClass("ui-droppable"))},_destroy:function(){var e=0,d=a.ui.ddmanager.droppables[this.options.scope];for(;e<d.length;e++){if(d[e]===this){d.splice(e,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(d,e){if(d==="accept"){this.accept=a.isFunction(e)?e:function(f){return f.is(e)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var d=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(d){this._trigger("activate",e,this.ui(d))}},_deactivate:function(e){var d=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(d){this._trigger("deactivate",e,this.ui(d))}},_over:function(e){var d=a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",e,this.ui(d))}},_out:function(e){var d=a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(d))}},_drop:function(g,e){var f=e||a.ui.ddmanager.current,d=false;if(!f||(f.currentItem||f.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var h=a.data(this,"ui-droppable");if(h.options.greedy&&!h.options.disabled&&h.options.scope===f.options.scope&&h.accept.call(h.element[0],(f.currentItem||f.element))&&a.ui.intersect(f,a.extend(h,{offset:h.element.offset()}),h.options.tolerance)){d=true;return false}});if(d){return false}if(this.accept.call(this.element[0],(f.currentItem||f.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",g,this.ui(f));return this.element}return false},ui:function(d){return{draggable:(d.currentItem||d.element),helper:d.helper,position:d.position,offset:d.positionAbs}}});a.ui.intersect=function(e,h,m){if(!h.offset){return false}var f,g,n=(e.positionAbs||e.position.absolute).left,o=n+e.helperProportions.width,p=(e.positionAbs||e.position.absolute).top,q=p+e.helperProportions.height,i=h.offset.left,j=i+h.proportions.width,k=h.offset.top,d=k+h.proportions.height;switch(m){case"fit":return(i<=n&&o<=j&&k<=p&&q<=d);case"intersect":return(i<n+(e.helperProportions.width/2)&&o-(e.helperProportions.width/2)<j&&k<p+(e.helperProportions.height/2)&&q-(e.helperProportions.height/2)<d);case"pointer":f=((e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left);g=((e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top);return b(g,k,h.proportions.height)&&b(f,i,h.proportions.width);case"touch":return((p>=k&&p<=d)||(q>=k&&q<=d)||(p<k&&q>d))&&((n>=i&&n<=j)||(o>=i&&o<=j)||(n<i&&o>j));default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(k,d){var e,f,h=a.ui.ddmanager.droppables[k.options.scope]||[],l=d?d.type:null,g=(k.currentItem||k.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(e=0;e<h.length;e++){if(h[e].options.disabled||(k&&!h[e].accept.call(h[e].element[0],(k.currentItem||k.element)))){continue}for(f=0;f<g.length;f++){if(g[f]===h[e].element[0]){h[e].proportions.height=0;continue droppablesLoop}}h[e].visible=h[e].element.css("display")!=="none";if(!h[e].visible){continue}if(l==="mousedown"){h[e]._activate.call(h[e],d)}h[e].offset=h[e].element.offset();h[e].proportions={width:h[e].element[0].offsetWidth,height:h[e].element[0].offsetHeight}}},drop:function(d,f){var e=false;a.each((a.ui.ddmanager.droppables[d.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(d,this,this.options.tolerance)){e=this._drop.call(this,f)||e}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(d.currentItem||d.element))){this.isout=true;this.isover=false;this._deactivate.call(this,f)}});return e},dragStart:function(d,e){d.element.parentsUntil("body").bind("scroll.droppable",function(){if(!d.options.refreshPositions){a.ui.ddmanager.prepareOffsets(d,e)}})},drag:function(d,e){if(d.options.refreshPositions){a.ui.ddmanager.prepareOffsets(d,e)}a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var i,j,h,g=a.ui.intersect(d,this,this.options.tolerance),f=!g&&this.isover?"isout":(g&&!this.isover?"isover":null);if(!f){return}if(this.options.greedy){j=this.options.scope;h=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===j});if(h.length){i=a.data(h[0],"ui-droppable");i.greedyChild=(f==="isover")}}if(i&&f==="isover"){i.isover=false;i.isout=true;i._out.call(i,e)}this[f]=true;this[f==="isout"?"isover":"isout"]=false;this[f==="isover"?"_over":"_out"].call(this,e);if(i&&f==="isout"){i.isout=false;i.isover=true;i._over.call(i,e)}})},dragStop:function(d,e){d.element.parentsUntil("body").unbind("scroll.droppable");if(!d.options.refreshPositions){a.ui.ddmanager.prepareOffsets(d,e)}}}})(jQuery);(function(a,d){function c(g,e,f){return(g>e)&&(g<(e+f))}function b(e){return(/left|right/).test(e.css("float"))||(/inline|table-cell/).test(e.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?e.axis==="x"||b(this.items[0].item):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_setOption:function(e,f){if(e==="disabled"){this.options[e]=f;this.widget().toggleClass("ui-sortable-disabled",!!f)}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(f,g){var e=null,i=false,h=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(f);a(f.target).parents().each(function(){if(a.data(this,h.widgetName+"-item")===h){e=a(this);return false}});if(a.data(f.target,h.widgetName+"-item")===h){e=a(f.target)}if(!e){return false}if(this.options.handle&&!g){a(this.options.handle,e).find("*").addBack().each(function(){if(this===f.target){i=true}});if(!i){return false}}this.currentItem=e;this._removeCurrentsFromItems();return true},_mouseStart:function(f,k,h){var g,e,j=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;(j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(j.containment){this._setContainment()}if(j.cursor&&j.cursor!=="auto"){e=this.document.find("body");this.storedCursor=e.css("cursor");e.css("cursor",j.cursor);this.storedStylesheet=a("<style>*{ cursor: "+j.cursor+" !important; }</style>").appendTo(e)}if(j.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",j.opacity)}if(j.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",j.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",f,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!h){for(g=this.containers.length-1;g>=0;g--){this.containers[g]._trigger("activate",f,this._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}if(a.ui.ddmanager&&!j.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,f)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);return true},_mouseDrag:function(e){var f,h,j,g,k=this.options,l=false;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-e.pageY<k.scrollSensitivity){this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop+k.scrollSpeed}else{if(e.pageY-this.overflowOffset.top<k.scrollSensitivity){this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop-k.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-e.pageX<k.scrollSensitivity){this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft+k.scrollSpeed}else{if(e.pageX-this.overflowOffset.left<k.scrollSensitivity){this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft-k.scrollSpeed}}}else{if(e.pageY-a(document).scrollTop()<k.scrollSensitivity){l=a(document).scrollTop(a(document).scrollTop()-k.scrollSpeed)}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<k.scrollSensitivity){l=a(document).scrollTop(a(document).scrollTop()+k.scrollSpeed)}}if(e.pageX-a(document).scrollLeft()<k.scrollSensitivity){l=a(document).scrollLeft(a(document).scrollLeft()-k.scrollSpeed)}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<k.scrollSensitivity){l=a(document).scrollLeft(a(document).scrollLeft()+k.scrollSpeed)}}}if(l!==false&&a.ui.ddmanager&&!k.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,e)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(f=this.items.length-1;f>=0;f--){h=this.items[f];j=h.item[0];g=this._intersectsWithPointer(h);if(!g){continue}if(h.instance!==this.currentContainer){continue}if(j!==this.currentItem[0]&&this.placeholder[g===1?"next":"prev"]()[0]!==j&&!a.contains(this.placeholder[0],j)&&(this.options.type==="semi-dynamic"?!a.contains(this.element[0],j):true)){this.direction=g===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(h)){this._rearrange(e,h)}else{break}this._trigger("change",e,this._uiHash());break}}this._contactContainers(e);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,e)}this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(h,i){if(!h){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,h)}if(this.options.revert){var j=this,g=this.placeholder.offset(),f=this.options.axis,e={};if(!f||f==="x"){e.left=g.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)}if(!f||f==="y"){e.top=g.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)}this.reverting=true;a(this.helper).animate(e,parseInt(this.options.revert,10)||500,function(){j._clear(h)})}else{this._clear(h,i)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(f){var e=this._getItemsAsjQuery(f&&f.connected),g=[];f=f||{};a(e).each(function(){var h=(a(f.item||this).attr(f.attribute||"id")||"").match(f.expression||(/(.+)[\-=_](.+)/));if(h){g.push((f.key||h[1]+"[]")+"="+(f.key&&f.expression?h[1]:h[2]))}});if(!g.length&&f.key){g.push(f.key+"=")}return g.join("&")},toArray:function(f){var e=this._getItemsAsjQuery(f&&f.connected),g=[];f=f||{};e.each(function(){g.push(a(f.item||this).attr(f.attribute||"id")||"")});return g},_intersectsWith:function(i){var n=this.positionAbs.left,o=n+this.helperProportions.width,p=this.positionAbs.top,q=p+this.helperProportions.height,j=i.left,k=j+i.width,m=i.top,e=m+i.height,g=this.offset.click.top,f=this.offset.click.left,h=(p+g)>m&&(p+g)<e&&(n+f)>j&&(n+f)<k;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>i[this.floating?"width":"height"])){return h}else{return(j<n+(this.helperProportions.width/2)&&o-(this.helperProportions.width/2)<k&&m<p+(this.helperProportions.height/2)&&q-(this.helperProportions.height/2)<e)}},_intersectsWithPointer:function(i){var g=(this.options.axis==="x")||c(this.positionAbs.top+this.offset.click.top,i.top,i.height),h=(this.options.axis==="y")||c(this.positionAbs.left+this.offset.click.left,i.left,i.width),f=g&&h,j=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();if(!f){return false}return this.floating?(((e&&e==="right")||j==="down")?2:1):(j&&(j==="down"?2:1))},_intersectsWithSides:function(h){var f=c(this.positionAbs.top+this.offset.click.top,h.top+(h.height/2),h.height),g=c(this.positionAbs.left+this.offset.click.left,h.left+(h.width/2),h.width),i=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();if(this.floating&&e){return((e==="right"&&g)||(e==="left"&&!g))}else{return i&&((i==="down"&&f)||(i==="up"&&!f))}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var h,m,g,k,l=[],n=[],f=this._connectWith();if(f&&e){for(h=f.length-1;h>=0;h--){g=a(f[h]);for(m=g.length-1;m>=0;m--){k=a.data(g[m],this.widgetFullName);if(k&&k!==this&&!k.options.disabled){n.push([a.isFunction(k.options.items)?k.options.items.call(k.element):a(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}}}}n.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(h=n.length-1;h>=0;h--){n[h][0].each(function(){l.push(this)})}return a(l)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(f){for(var g=0;g<e.length;g++){if(e[g]===f.item[0]){return false}}return true})},_refreshItems:function(h){this.items=[];this.containers=[this];var k,o,g,l,r,e,m,q,n=this.items,p=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],h,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready){for(k=f.length-1;k>=0;k--){g=a(f[k]);for(o=g.length-1;o>=0;o--){l=a.data(g[o],this.widgetFullName);if(l&&l!==this&&!l.options.disabled){p.push([a.isFunction(l.options.items)?l.options.items.call(l.element[0],h,{item:this.currentItem}):a(l.options.items,l.element),l]);this.containers.push(l)}}}}for(k=p.length-1;k>=0;k--){r=p[k][1];e=p[k][0];for(o=0,q=e.length;o<q;o++){m=a(e[o]);m.data(this.widgetName+"-item",r);n.push({item:m,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var f,g,j,h;for(f=this.items.length-1;f>=0;f--){g=this.items[f];if(g.instance!==this.currentContainer&&this.currentContainer&&g.item[0]!==this.currentItem[0]){continue}j=this.options.toleranceElement?a(this.options.toleranceElement,g.item):g.item;if(!e){g.width=j.outerWidth();g.height=j.outerHeight()}h=j.offset();g.left=h.left;g.top=h.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(f=this.containers.length-1;f>=0;f--){h=this.containers[f].element.offset();this.containers[f].containerCache.left=h.left;this.containers[f].containerCache.top=h.top;this.containers[f].containerCache.width=this.containers[f].element.outerWidth();this.containers[f].containerCache.height=this.containers[f].element.outerHeight()}}return this},_createPlaceholder:function(g){g=g||this;var e,f=g.options;if(!f.placeholder||f.placeholder.constructor===String){e=f.placeholder;f.placeholder={element:function(){var i=g.currentItem[0].nodeName.toLowerCase(),h=a(g.document[0].createElement(i)).addClass(e||g.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(i==="tr"){h.append("<td colspan='99'>&#160;</td>")}else{if(i==="img"){h.attr("src",g.currentItem.attr("src"))}}if(!e){h.css("visibility","hidden")}return h},update:function(h,i){if(e&&!f.forcePlaceholderSize){return}if(!i.height()){i.height(g.currentItem.innerHeight()-parseInt(g.currentItem.css("paddingTop")||0,10)-parseInt(g.currentItem.css("paddingBottom")||0,10))}if(!i.width()){i.width(g.currentItem.innerWidth()-parseInt(g.currentItem.css("paddingLeft")||0,10)-parseInt(g.currentItem.css("paddingRight")||0,10))}}}}g.placeholder=a(f.placeholder.element.call(g.element,g.currentItem));g.currentItem.after(g.placeholder);f.placeholder.update(g,g.placeholder)},_contactContainers:function(h){var l,p,g,o,r,s,e,f,q,k,m=null,n=null;for(l=this.containers.length-1;l>=0;l--){if(a.contains(this.currentItem[0],this.containers[l].element[0])){continue}if(this._intersectsWith(this.containers[l].containerCache)){if(m&&a.contains(this.containers[l].element[0],m.element[0])){continue}m=this.containers[l];n=l}else{if(this.containers[l].containerCache.over){this.containers[l]._trigger("out",h,this._uiHash(this));this.containers[l].containerCache.over=0}}}if(!m){return}if(this.containers.length===1){if(!this.containers[n].containerCache.over){this.containers[n]._trigger("over",h,this._uiHash(this));this.containers[n].containerCache.over=1}}else{g=10000;o=null;k=m.floating||b(this.currentItem);r=k?"left":"top";s=k?"width":"height";e=this.positionAbs[r]+this.offset.click[r];for(p=this.items.length-1;p>=0;p--){if(!a.contains(this.containers[n].element[0],this.items[p].item[0])){continue}if(this.items[p].item[0]===this.currentItem[0]){continue}if(k&&!c(this.positionAbs.top+this.offset.click.top,this.items[p].top,this.items[p].height)){continue}f=this.items[p].item.offset()[r];q=false;if(Math.abs(f-e)>Math.abs(f+this.items[p][s]-e)){q=true;f+=this.items[p][s]}if(Math.abs(f-e)<g){g=Math.abs(f-e);o=this.items[p];this.direction=q?"up":"down"}}if(!o&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[n]){return}o?this._rearrange(h,o,null,true):this._rearrange(h,null,this.containers[n].element,true);this._trigger("change",h,this._uiHash());this.containers[n]._trigger("change",h,this._uiHash(this));this.currentContainer=this.containers[n];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[n]._trigger("over",h,this._uiHash(this));this.containers[n].containerCache.over=1}},_createHelper:function(e){var g=this.options,f=a.isFunction(g.helper)?a(g.helper.apply(this.element[0],[e,this.currentItem])):(g.helper==="clone"?this.currentItem.clone():this.currentItem);if(!f.parents("body").length){a(g.appendTo!=="parent"?g.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0])}if(f[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!f[0].style.width||g.forceHelperSize){f.width(this.currentItem.width())}if(!f[0].style.height||g.forceHelperSize){f.height(this.currentItem.height())}return f},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(a.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left" in e){this.offset.click.left=e.left+this.margins.left}if("right" in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top" in e){this.offset.click.top=e.top+this.margins.top}if("bottom" in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie)){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,f,h,g=this.options;if(g.containment==="parent"){g.containment=this.helper[0].parentNode}if(g.containment==="document"||g.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(g.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(g.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(g.containment)){e=a(g.containment)[0];f=a(g.containment).offset();h=(a(e).css("overflow")!=="hidden");this.containment=[f.left+(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0)-this.margins.left,f.top+(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0)-this.margins.top,f.left+(h?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,f.top+(h?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,g){if(!g){g=this.position}var f=e==="absolute"?1:-1,h=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(h[0].tagName);return{top:(g.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(i?0:h.scrollTop()))*f)),left:(g.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())*f))}},_generatePosition:function(e){var l,f,g=this.options,h=e.pageX,i=e.pageY,j=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=(/(html|body)/i).test(j[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){h=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){i=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){h=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){i=this.containment[3]+this.offset.click.top}}if(g.grid){l=this.originalPageY+Math.round((i-this.originalPageY)/g.grid[1])*g.grid[1];i=this.containment?((l-this.offset.click.top>=this.containment[1]&&l-this.offset.click.top<=this.containment[3])?l:((l-this.offset.click.top>=this.containment[1])?l-g.grid[1]:l+g.grid[1])):l;f=this.originalPageX+Math.round((h-this.originalPageX)/g.grid[0])*g.grid[0];h=this.containment?((f-this.offset.click.left>=this.containment[0]&&f-this.offset.click.left<=this.containment[2])?f:((f-this.offset.click.left>=this.containment[0])?f-g.grid[0]:f+g.grid[0])):f}}return{top:(i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(k?0:j.scrollTop())))),left:(h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():k?0:j.scrollLeft())))}},_rearrange:function(g,j,e,h){e?e[0].appendChild(this.placeholder[0]):j.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?j.item[0]:j.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var f=this.counter;this._delay(function(){if(f===this.counter){this.refreshPositions(!h)}})},_clear:function(f,h){this.reverting=false;var g,e=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(g in this._storedCSS){if(this._storedCSS[g]==="auto"||this._storedCSS[g]==="static"){this._storedCSS[g]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!h){e.push(function(i){this._trigger("receive",i,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!h){e.push(function(i){this._trigger("update",i,this._uiHash())})}if(this!==this.currentContainer){if(!h){e.push(function(i){this._trigger("remove",i,this._uiHash())});e.push((function(i){return function(j){i._trigger("receive",j,this._uiHash(this))}}).call(this,this.currentContainer));e.push((function(i){return function(j){i._trigger("update",j,this._uiHash(this))}}).call(this,this.currentContainer))}}for(g=this.containers.length-1;g>=0;g--){if(!h){e.push((function(i){return function(j){i._trigger("deactivate",j,this._uiHash(this))}}).call(this,this.containers[g]))}if(this.containers[g].containerCache.over){e.push((function(i){return function(j){i._trigger("out",j,this._uiHash(this))}}).call(this,this.containers[g]));this.containers[g].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!h){this._trigger("beforeStop",f,this._uiHash());for(g=0;g<e.length;g++){e[g].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return false}if(!h){this._trigger("beforeStop",f,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null;if(!h){for(g=0;g<e.length;g++){e[g].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(e){var f=e||this;return{helper:f.helper,placeholder:f.placeholder||a([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:e?e.element:null}}})})(jQuery);(function(a,f){var e=0,d=/#.*$/;function b(){return ++e}function c(g){return g.hash.length>1&&decodeURIComponent(g.href.replace(d,""))===decodeURIComponent(location.href.replace(d,""))}a.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var h=this,g=this.options;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",g.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(i){if(a(this).is(".ui-state-disabled")){i.preventDefault()}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if(a(this).closest("li").is(".ui-state-disabled")){this.blur()}});this._processTabs();g.active=this._initialActive();if(a.isArray(g.disabled)){g.disabled=a.unique(g.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(i){return h.tabs.index(i)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(g.active)}else{this.active=a()}this._refresh();if(this.active.length){this.load(g.active)}},_initialActive:function(){var g=this.options.active,h=this.options.collapsible,i=location.hash.substring(1);if(g===null){if(i){this.tabs.each(function(j,k){if(a(k).attr("aria-controls")===i){g=j;return false}})}if(g===null){g=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(g===null||g===-1){g=this.tabs.length?0:false}}if(g!==false){g=this.tabs.index(this.tabs.eq(g));if(g===-1){g=h?false:0}}if(!h&&g===false&&this.anchors.length){g=0}return g},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?a():this._getPanelForTab(this.active)}},_tabKeydown:function(g){var h=a(this.document[0].activeElement).closest("li"),j=this.tabs.index(h),i=true;if(this._handlePageNav(g)){return}switch(g.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:j++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:i=false;j--;break;case a.ui.keyCode.END:j=this.anchors.length-1;break;case a.ui.keyCode.HOME:j=0;break;case a.ui.keyCode.SPACE:g.preventDefault();clearTimeout(this.activating);this._activate(j);return;case a.ui.keyCode.ENTER:g.preventDefault();clearTimeout(this.activating);this._activate(j===this.options.active?false:j);return;default:return}g.preventDefault();clearTimeout(this.activating);j=this._focusNextTab(j,i);if(!g.ctrlKey){h.attr("aria-selected","false");this.tabs.eq(j).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",j)},this.delay)}},_panelKeydown:function(g){if(this._handlePageNav(g)){return}if(g.ctrlKey&&g.keyCode===a.ui.keyCode.UP){g.preventDefault();this.active.focus()}},_handlePageNav:function(g){if(g.altKey&&g.keyCode===a.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(g.altKey&&g.keyCode===a.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(i,h){var j=this.tabs.length-1;function g(){if(i>j){i=0}if(i<0){i=j}return i}while(a.inArray(g(),this.options.disabled)!==-1){i=h?i+1:i-1}return i},_focusNextTab:function(h,g){h=this._findNextTab(h,g);this.tabs.eq(h).focus();return h},_setOption:function(g,h){if(g==="active"){this._activate(h);return}if(g==="disabled"){this._setupDisabled(h);return}this._super(g,h);if(g==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",h);if(!h&&this.options.active===false){this._activate(0)}}if(g==="event"){this._setupEvents(h)}if(g==="heightStyle"){this._setupHeightStyle(h)}},_tabId:function(g){return g.attr("aria-controls")||"ui-tabs-"+b()},_sanitizeSelector:function(g){return g?g.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var h=this.options,g=this.tablist.children(":has(a[href])");h.disabled=a.map(g.filter(".ui-state-disabled"),function(i){return g.index(i)});this._processTabs();if(h.active===false||!this.anchors.length){h.active=false;this.active=a()}else{if(this.active.length&&!a.contains(this.tablist[0],this.active[0])){if(this.tabs.length===h.disabled.length){h.active=false;this.active=a()}else{this._activate(this._findNextTab(Math.max(0,h.active-1),false))}}else{h.active=this.tabs.index(this.active)}}this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})}},_processTabs:function(){var g=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(k,h){var o,m,n,j=a(h).uniqueId().attr("id"),p=a(h).closest("li"),l=p.attr("aria-controls");if(c(h)){o=h.hash;m=g.element.find(g._sanitizeSelector(o))}else{n=g._tabId(p);o="#"+n;m=g.element.find(o);if(!m.length){m=g._createPanel(n);m.insertAfter(g.panels[k-1]||g.tablist)}m.attr("aria-live","polite")}if(m.length){g.panels=g.panels.add(m)}if(l){p.data("ui-tabs-aria-controls",l)}p.attr({"aria-controls":o.substring(1),"aria-labelledby":j});m.attr("aria-labelledby",j)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(g){return a("<div>").attr("id",g).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)},_setupDisabled:function(g){if(a.isArray(g)){if(!g.length){g=false}else{if(g.length===this.anchors.length){g=true}}}for(var h=0,j;(j=this.tabs[h]);h++){if(g===true||a.inArray(h,g)!==-1){a(j).addClass("ui-state-disabled").attr("aria-disabled","true")}else{a(j).removeClass("ui-state-disabled").removeAttr("aria-disabled")}}this.options.disabled=g},_setupEvents:function(g){var h={click:function(i){i.preventDefault()}};if(g){a.each(g.split(" "),function(j,i){h[i]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,h);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(g){var h,i=this.element.parent();if(g==="fill"){h=i.height();h-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var j=a(this),k=j.css("position");if(k==="absolute"||k==="fixed"){return}h-=j.outerHeight(true)});this.element.children().not(this.panels).each(function(){h-=a(this).outerHeight(true)});this.panels.each(function(){a(this).height(Math.max(0,h-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(g==="auto"){h=0;this.panels.each(function(){h=Math.max(h,a(this).height("").height())}).height(h)}}},_eventHandler:function(k){var m=this.options,g=this.active,h=a(k.currentTarget),n=h.closest("li"),i=n[0]===g[0],j=i&&m.collapsible,p=j?a():this._getPanelForTab(n),o=!g.length?a():this._getPanelForTab(g),l={oldTab:g,oldPanel:o,newTab:j?a():n,newPanel:p};k.preventDefault();if(n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||(i&&!m.collapsible)||(this._trigger("beforeActivate",k,l)===false)){return}m.active=j?false:this.tabs.index(n);this.active=i?a():n;if(this.xhr){this.xhr.abort()}if(!o.length&&!p.length){a.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(p.length){this.load(this.tabs.index(n),k)}this._toggle(k,l)},_toggle:function(h,i){var k=this,m=i.newPanel,l=i.oldPanel;this.running=true;function g(){k.running=false;k._trigger("activate",h,i)}function j(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(m.length&&k.options.show){k._show(m,k.options.show,g)}else{m.show();g()}}if(l.length&&this.options.hide){this._hide(l,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");j()})}else{i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");l.hide();j()}l.attr({"aria-expanded":"false","aria-hidden":"true"});i.oldTab.attr("aria-selected","false");if(m.length&&l.length){i.oldTab.attr("tabIndex",-1)}else{if(m.length){this.tabs.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}m.attr({"aria-expanded":"true","aria-hidden":"false"});i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(i){var h,g=this._findActive(i);if(g[0]===this.active[0]){return}if(!g.length){g=this.active}h=g.find(".ui-tabs-anchor")[0];this._eventHandler({target:h,currentTarget:h,preventDefault:a.noop})},_findActive:function(g){return g===false?a():this.tabs.eq(g)},_getIndex:function(g){if(typeof g==="string"){g=this.anchors.index(this.anchors.filter("[href$='"+g+"']"))}return g},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if(a.data(this,"ui-tabs-destroy")){a(this).remove()}else{a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}});this.tabs.each(function(){var g=a(this),h=g.data("ui-tabs-aria-controls");if(h){g.attr("aria-controls",h).removeData("ui-tabs-aria-controls")}else{g.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(h){var g=this.options.disabled;if(g===false){return}if(h===f){g=false}else{h=this._getIndex(h);if(a.isArray(g)){g=a.map(g,function(i){return i!==h?i:null})}else{g=a.map(this.tabs,function(i,j){return j!==h?j:null})}}this._setupDisabled(g)},disable:function(h){var g=this.options.disabled;if(g===true){return}if(h===f){g=true}else{h=this._getIndex(h);if(a.inArray(h,g)!==-1){return}if(a.isArray(g)){g=a.merge([h],g).sort()}else{g=[h]}}this._setupDisabled(g)},load:function(j,h){j=this._getIndex(j);var m=this,l=this.tabs.eq(j),g=l.find(".ui-tabs-anchor"),k=this._getPanelForTab(l),i={tab:l,panel:k};if(c(g[0])){return}this.xhr=a.ajax(this._ajaxSettings(g,h,i));if(this.xhr&&this.xhr.statusText!=="canceled"){l.addClass("ui-tabs-loading");k.attr("aria-busy","true");this.xhr.success(function(n){setTimeout(function(){k.html(n);m._trigger("load",h,i)},1)}).complete(function(n,o){setTimeout(function(){if(o==="abort"){m.panels.stop(false,true)}l.removeClass("ui-tabs-loading");k.removeAttr("aria-busy");if(n===m.xhr){delete m.xhr}},1)})}},_ajaxSettings:function(g,h,i){var j=this;return{url:g.attr("href"),beforeSend:function(k,l){return j._trigger("beforeLoad",h,a.extend({jqXHR:k,ajaxSettings:l},i))}}},_getPanelForTab:function(h){var g=a(h).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+g))}})})(jQuery);$(function(){var a=$("input[data-errormessage]");a.each(function(){var b=$(this).data("errormessage");$(this)[0].oninvalid=function(c){c.target.setCustomValidity("");if(!c.target.validity.valid){c.target.setCustomValidity(b)}};$(this)[0].oninput=function(c){c.target.setCustomValidity("")}})});/* ===================================================
 * bootstrap-transition.js v2.1.1
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 * http://www.apache.org/licenses/LICENSE-2.0
 */
!function(a){a(function(){a.support.transition=(function(){var b=(function(){var c=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},d;for(d in e){if(c.style[d]!==undefined){return e[d]}}}());return b&&{end:b}})()})}(window.jQuery);!function(a){var c='[data-dismiss="alert"]',b=function(d){a(d).on("click",c,this.close)};b.prototype.close=function(g){var f=a(this),i=f.attr("data-target"),d;if(!i){i=f.attr("href");i=i&&i.replace(/.*(?=#[^\s]*$)/,"")}d=a(i);g&&g.preventDefault();d.length||(d=f.hasClass("alert")?f:f.parent());d.trigger(g=a.Event("close"));if(g.isDefaultPrevented()){return}d.removeClass("in");function h(){d.trigger("closed").remove()}a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,h):h()};a.fn.alert=function(d){return this.each(function(){var e=a(this),f=e.data("alert");if(!f){e.data("alert",(f=new b(this)))}if(typeof d=="string"){f[d].call(e)}})};a.fn.alert.Constructor=b;a(function(){a("body").on("click.alert.data-api",c,b.prototype.close)})}(window.jQuery);!function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.button.defaults,d)};b.prototype.setState=function(g){var e="disabled",c=this.$element,f=c.data(),h=c.is("input")?"val":"html";g=g+"Text";f.resetText||c.data("resetText",c[h]());c[h](f[g]||this.options[g]);setTimeout(function(){g=="loadingText"?c.addClass(e).attr(e,e):c.removeClass(e).removeAttr(e)},0)};b.prototype.toggle=function(){var c=this.$element.closest('[data-toggle="buttons-radio"]');c&&c.find(".active").removeClass("active");this.$element.toggleClass("active")};a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;if(!e){d.data("button",(e=new b(this,f)))}if(c=="toggle"){e.toggle()}else{if(c){e.setState(c)}}})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=b;a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(d){var c=a(d.target);if(!c.hasClass("btn")){c=c.closest(".btn")}c.button("toggle")})})}(window.jQuery);!function(a){var b=function(c,d){this.$element=a(c);this.options=d;this.options.slide&&this.slide(this.options.slide);this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(c){if(!c){this.paused=false}this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this},to:function(f){var c=this.$element.find(".item.active"),e=c.parent().children(),d=e.index(c),g=this;if(f>(e.length-1)||f<0){return}if(this.sliding){return this.$element.one("slid",function(){g.to(f)})}if(d==f){return this.pause().cycle()}return this.slide(f>d?"next":"prev",a(e[f]))},pause:function(c){if(!c){this.paused=true}if(this.$element.find(".next, .prev").length&&a.support.transition.end){this.$element.trigger(a.support.transition.end);this.cycle()}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(l,j){var c=this.$element.find(".item.active"),d=j||c[l](),i=this.interval,f=l=="next"?"left":"right",h=l=="next"?"first":"last",k=this,g=a.Event("slide",{relatedTarget:d[0]});this.sliding=true;i&&this.pause();d=d.length?d:this.$element.find(".item")[h]();if(d.hasClass("active")){return}if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(g);if(g.isDefaultPrevented()){return}d.addClass(l);d[0].offsetWidth;c.addClass(f);d.addClass(f);this.$element.one(a.support.transition.end,function(){d.removeClass([l,f].join(" ")).addClass("active");c.removeClass(["active",f].join(" "));k.sliding=false;setTimeout(function(){k.$element.trigger("slid")},0)})}else{this.$element.trigger(g);if(g.isDefaultPrevented()){return}c.removeClass("active");d.addClass("active");this.sliding=false;this.$element.trigger("slid")}i&&this.cycle();return this}};a.fn.carousel=function(c){return this.each(function(){var d=a(this),f=d.data("carousel"),g=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),e=typeof c=="string"?c:g.slide;if(!f){d.data("carousel",(f=new b(this,g)))}if(typeof c=="number"){f.to(c)}else{if(e){f[e]()}else{if(g.interval){f.cycle()}}}})};a.fn.carousel.defaults={interval:5000,pause:"hover"};a.fn.carousel.Constructor=b;a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(f){var d=a(this),g,c=a(d.attr("data-target")||(g=d.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")),h=!c.data("modal")&&a.extend({},c.data(),d.data());c.carousel(h);f.preventDefault()})})}(window.jQuery);!function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.collapse.defaults,d);if(this.options.parent){this.$parent=a(this.options.parent)}this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var c=this.$element.hasClass("width");return c?"width":"height"},show:function(){var d,f,c,e;if(this.transitioning){return}d=this.dimension();f=a.camelCase(["scroll",d].join("-"));c=this.$parent&&this.$parent.find("> .accordion-group > .in");if(c&&c.length){e=c.data("collapse");if(e&&e.transitioning){return}c.collapse("hide");e||c.data("collapse",null)}this.$element[d](0);this.transition("addClass",a.Event("show"),"shown");a.support.transition&&this.$element[d](this.$element[0][f])},hide:function(){var c;if(this.transitioning){return}c=this.dimension();this.reset(this.$element[c]());this.transition("removeClass",a.Event("hide"),"hidden");this.$element[c](0)},reset:function(d){var c=this.dimension();this.$element.removeClass("collapse")[c](d||"auto")[0].offsetWidth;this.$element[d!==null?"addClass":"removeClass"]("collapse");return this},transition:function(e,f,d){var g=this,c=function(){if(f.type=="show"){g.reset()}g.transitioning=0;g.$element.trigger(d)};this.$element.trigger(f);if(f.isDefaultPrevented()){return}this.transitioning=1;this.$element[e]("in");a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,c):c()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;if(!e){d.data("collapse",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}})};a.fn.collapse.defaults={toggle:true};a.fn.collapse.Constructor=b;a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(d){var c=a(this),f,h=c.attr("data-target")||d.preventDefault()||(f=c.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,""),g=a(h).data("collapse")?"toggle":c.data();c[a(h).hasClass("in")?"addClass":"removeClass"]("collapsed");a(h).collapse(g)})})}(window.jQuery);!function(a){var e="[data-toggle=dropdown]",c=function(g){var f=a(g).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){f.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(h){var g=a(this),f,i;if(g.is(".disabled, :disabled")){return}f=d(g);i=f.hasClass("open");b();if(!i){f.toggleClass("open");g.focus()}return false},keydown:function(j){var i,g,f,h,l,k;if(!/(38|40|27)/.test(j.keyCode)){return}i=a(this);j.preventDefault();j.stopPropagation();if(i.is(".disabled, :disabled")){return}h=d(i);l=h.hasClass("open");if(!l||(l&&j.keyCode==27)){return i.click()}g=a("[role=menu] li:not(.divider) a",h);if(!g.length){return}k=g.index(g.filter(":focus"));if(j.keyCode==38&&k>0){k--}if(j.keyCode==40&&k<g.length-1){k++}if(!~k){k=0}g.eq(k).focus()}};function b(){d(a(e)).removeClass("open")}function d(g){var h=g.attr("data-target"),f;if(!h){h=g.attr("href");h=h&&/#/.test(h)&&h.replace(/.*(?=#[^\s]*$)/,"")}f=a(h);f.length||(f=g.parent());return f}a.fn.dropdown=function(f){return this.each(function(){var g=a(this),h=g.data("dropdown");if(!h){g.data("dropdown",(h=new c(this)))}if(typeof f=="string"){h[f].call(g)}})};a.fn.dropdown.Constructor=c;a(function(){a("html").on("click.dropdown.data-api touchstart.dropdown.data-api",b);a("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(f){f.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",e,c.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",e+", [role=menu]",c.prototype.keydown)})}(window.jQuery);!function(a){var b=function(c,d){this.options=d;this.$element=a(c).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var d=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented()){return}a("body").addClass("modal-open");this.isShown=true;this.escape();this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(e){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false).focus();d.enforceFocus();e?d.$element.one(a.support.transition.end,function(){d.$element.trigger("shown")}):d.$element.trigger("shown")})},hide:function(c){c&&c.preventDefault();var d=this;c=a.Event("hide");this.$element.trigger(c);if(!this.isShown||c.isDefaultPrevented()){return}this.isShown=false;a("body").removeClass("modal-open");this.escape();a(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var c=this;a(document).on("focusin.modal",function(d){if(c.$element[0]!==d.target&&!c.$element.has(d.target).length){c.$element.focus()}})},escape:function(){var c=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(d){d.which==27&&c.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(a.support.transition.end);c.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);c.hideModal()})},hideModal:function(c){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(d){var f=this,c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&c;this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body);if(this.options.backdrop!="static"){this.$backdrop.click(a.proxy(this.hide,this))}if(e){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");e?this.$backdrop.one(a.support.transition.end,d):d()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()}else{if(d){d()}}}}};a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);if(!e){d.data("modal",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}else{if(f.show){e.show()}}})};a.fn.modal.defaults={backdrop:true,keyboard:true,show:true};a.fn.modal.Constructor=b;a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(f){var d=a(this),g=d.attr("href"),c=a(d.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,""))),h=c.data("modal")?"toggle":a.extend({remote:!/#/.test(g)&&g},c.data(),d.data());f.preventDefault();c.modal(h).one("hide",function(){d.focus()})})})}(window.jQuery);!function(a){var b=function(c,d){this.init("tooltip",c,d)};b.prototype={constructor:b,init:function(g,c,f){var d,e;this.type=g;this.$element=a(c);this.options=this.getOptions(f);this.enabled=true;if(this.options.trigger=="click"){this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this))}else{if(this.options.trigger!="manual"){d=this.options.trigger=="hover"?"mouseenter":"focus";e=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(d+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?(this._options=a.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(c){c=a.extend({},a.fn[this.type].defaults,c,this.$element.data());if(c.delay&&typeof c.delay=="number"){c.delay={show:c.delay,hide:c.delay}}return c},enter:function(c){var d=a(c.currentTarget)[this.type](this._options).data(this.type);if(!d.options.delay||!d.options.delay.show){return d.show()}clearTimeout(this.timeout);d.hoverState="in";this.timeout=setTimeout(function(){if(d.hoverState=="in"){d.show()}},d.options.delay.show)},leave:function(c){var d=a(c.currentTarget)[this.type](this._options).data(this.type);if(this.timeout){clearTimeout(this.timeout)}if(!d.options.delay||!d.options.delay.hide){return d.hide()}d.hoverState="out";this.timeout=setTimeout(function(){if(d.hoverState=="out"){d.hide()}},d.options.delay.hide)},show:function(){var c,f,h,e,d,g,i;if(this.hasContent()&&this.enabled){c=this.tip();this.setContent();if(this.options.animation){c.addClass("fade")}g=typeof this.options.placement=="function"?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement;f=/in/.test(g);c.remove().css({top:0,left:0,display:"block"}).appendTo(f?this.$element:document.body);h=this.getPosition(f);e=c[0].offsetWidth;d=c[0].offsetHeight;switch(f?g.split(" ")[1]:g){case"bottom":i={top:h.top+h.height,left:h.left+h.width/2-e/2};break;case"top":i={top:h.top-d,left:h.left+h.width/2-e/2};break;case"left":i={top:h.top+h.height/2-d/2,left:h.left-e};break;case"right":i={top:h.top+h.height/2-d/2,left:h.left+h.width};break}c.css(i).addClass(g).addClass("in")}},setContent:function(){var c=this.tip(),d=this.getTitle();c.find(".tooltip-inner")[this.options.html?"html":"text"](d);c.removeClass("fade in top bottom left right")},hide:function(){var e=this,c=this.tip();c.removeClass("in");function d(){var f=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(f);c.remove()})}a.support.transition&&this.$tip.hasClass("fade")?d():c.remove();return this},fixTitle:function(){var c=this.$element;if(c.attr("title")||typeof(c.attr("data-original-title"))!="string"){c.attr("data-original-title",c.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(c){return a.extend({},(c?{top:0,left:0}:this.$element.offset()),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,c=this.$element,d=this.options;e=c.attr("data-original-title")||(typeof d.title=="function"?d.title.call(c[0]):d.title);return e},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;if(!e){d.data("tooltip",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:true}}(window.jQuery);!function(a){var b=function(c,d){this.init("popover",c,d)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var c=this.tip(),e=this.getTitle(),d=this.getContent();c.find(".popover-title")[this.options.html?"html":"text"](e);c.find(".popover-content > *")[this.options.html?"html":"text"](d);c.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var d,c=this.$element,e=this.options;d=c.attr("data-content")||(typeof e.content=="function"?e.content.call(c[0]):e.content);return d},tip:function(){if(!this.$tip){this.$tip=a(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;if(!e){d.data("popover",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}})};a.fn.popover.Constructor=b;a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(a){function b(d,f){var g=a.proxy(this.process,this),c=a(d).is("body")?a(window):a(d),e;this.options=a.extend({},a.fn.scrollspy.defaults,f);this.$scrollElement=c.on("scroll.scroll-spy.data-api",g);this.selector=(this.options.target||((e=a(d).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""))||"")+" .nav li > a";this.$body=a("body");this.refresh();this.process()}b.prototype={constructor:b,refresh:function(){var d=this,c;this.offsets=a([]);this.targets=a([]);c=this.$body.find(this.selector).map(function(){var e=a(this),g=e.data("target")||e.attr("href"),f=/^#\w/.test(g)&&a(g);return(f&&f.length&&[[f.position().top,g]])||null}).sort(function(e,f){return e[0]-f[0]}).each(function(){d.offsets.push(this[0]);d.targets.push(this[1])})},process:function(){var h=this.$scrollElement.scrollTop()+this.options.offset,g=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,e=g-this.$scrollElement.height(),f=this.offsets,j=this.targets,c=this.activeTarget,d;if(h>=e){return c!=(d=j.last()[0])&&this.activate(d)}for(d=f.length;d--;){c!=j[d]&&h>=f[d]&&(!f[d+1]||h<=f[d+1])&&this.activate(j[d])}},activate:function(e){var c,d;this.activeTarget=e;a(this.selector).parent(".active").removeClass("active");d=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]';c=a(d).parent("li").addClass("active");if(c.parent(".dropdown-menu").length){c=c.closest("li.dropdown").addClass("active")}c.trigger("activate")}};a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;if(!e){d.data("scrollspy",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.defaults={offset:10};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var c=a(this);c.scrollspy(c.data())})})}(window.jQuery);!function(a){var b=function(c){this.element=a(c)};b.prototype={constructor:b,show:function(){var d=this.element,f=d.closest("ul:not(.dropdown-menu)"),i=d.attr("data-target"),h,c,g;if(!i){i=d.attr("href");i=i&&i.replace(/.*(?=#[^\s]*$)/,"")}if(d.parent("li").hasClass("active")){return}h=f.find(".active a").last()[0];g=a.Event("show",{relatedTarget:h});d.trigger(g);if(g.isDefaultPrevented()){return}c=a(i);this.activate(d.parent("li"),f);this.activate(c,c.parent(),function(){d.trigger({type:"shown",relatedTarget:h})})},activate:function(f,e,d){var c=e.find("> .active"),h=d&&a.support.transition&&c.hasClass("fade");function g(){c.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");if(h){f[0].offsetWidth;f.addClass("in")}else{f.removeClass("fade")}if(f.parent(".dropdown-menu")){f.closest("li.dropdown").addClass("active")}d&&d()}h?c.one(a.support.transition.end,g):g();c.removeClass("in")}};a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");if(!e){d.data("tab",(e=new b(this)))}if(typeof c=="string"){e[c]()}})};a.fn.tab.Constructor=b;a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault();a(this).tab("show")})})}(window.jQuery);!function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.typeahead.defaults,d);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=a(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=false;this.listen()};b.prototype={constructor:b,select:function(){var c=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(c)).change();return this.hide()},updater:function(c){return c},show:function(){var c=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:c.top+c.height,left:c.left});this.$menu.show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(c){var d;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}d=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source;return d?this.process(d):this},process:function(c){var d=this;c=a.grep(c,function(e){return d.matcher(e)});c=this.sorter(c);if(!c.length){return this.shown?this.hide():this}return this.render(c.slice(0,this.options.items)).show()},matcher:function(c){return ~c.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(g){var c=[],e=[],d=[],f;while(f=g.shift()){if(!f.toLowerCase().indexOf(this.query.toLowerCase())){c.push(f)}else{if(~f.indexOf(this.query)){e.push(f)}else{d.push(f)}}}return c.concat(e,d)},highlighter:function(c){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return c.replace(new RegExp("("+d+")","ig"),function(e,f){return"<strong>"+f+"</strong>"})},render:function(c){var d=this;c=a(c).map(function(e,f){e=a(d.options.item).attr("data-value",f);e.find("a").html(d.highlighter(f));return e[0]});c.first().addClass("active");this.$menu.html(c);return this},next:function(d){var c=this.$menu.find(".active").removeClass("active"),e=c.next();if(!e.length){e=a(this.$menu.find("li")[0])}e.addClass("active")},prev:function(d){var c=this.$menu.find(".active").removeClass("active"),e=c.prev();if(!e.length){e=this.$menu.find("li").last()}e.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(a.browser.chrome||a.browser.webkit||a.browser.msie){this.$element.on("keydown",a.proxy(this.keydown,this))}this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},move:function(c){if(!this.shown){return}switch(c.keyCode){case 9:case 13:case 27:c.preventDefault();break;case 38:c.preventDefault();this.prev();break;case 40:c.preventDefault();this.next();break}c.stopPropagation()},keydown:function(c){this.suppressKeyPressRepeat=!~a.inArray(c.keyCode,[40,38,9,13,27]);this.move(c)},keypress:function(c){if(this.suppressKeyPressRepeat){return}this.move(c)},keyup:function(c){switch(c.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}c.stopPropagation();c.preventDefault()},blur:function(c){var d=this;setTimeout(function(){d.hide()},150)},click:function(c){c.stopPropagation();c.preventDefault();this.select()},mouseenter:function(c){this.$menu.find(".active").removeClass("active");a(c.currentTarget).addClass("active")}};a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;if(!e){d.data("typeahead",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};a.fn.typeahead.Constructor=b;a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var c=a(this);if(c.data("typeahead")){return}d.preventDefault();c.typeahead(c.data())})})}(window.jQuery);!function(a){var b=function(c,d){this.options=a.extend({},a.fn.affix.defaults,d);this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this));this.$element=a(c);this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var i=a(document).height(),j=this.$window.scrollTop(),g=this.$element.offset(),d=this.options.offset,e=d.bottom,f=d.top,h="affix affix-top affix-bottom",c;if(typeof d!="object"){e=f=d}if(typeof f=="function"){f=d.top()}if(typeof e=="function"){e=d.bottom()}c=this.unpin!=null&&(j+this.unpin<=g.top)?false:e!=null&&(g.top+this.$element.height()>=i-e)?"bottom":f!=null&&j<=f?"top":false;if(this.affixed===c){return}this.affixed=c;this.unpin=c=="bottom"?g.top-j:null;this.$element.removeClass(h).addClass("affix"+(c?"-"+c:""))};a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;if(!e){d.data("affix",(e=new b(this,f)))}if(typeof c=="string"){e[c]()}})};a.fn.affix.Constructor=b;a.fn.affix.defaults={offset:0};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{};d.offsetBottom&&(d.offset.bottom=d.offsetBottom);d.offsetTop&&(d.offset.top=d.offsetTop);c.affix(d)})})}(window.jQuery);!function(a){var b=function(d,f,c){if(c){c.stopPropagation();c.preventDefault()}this.$element=a(d);this.$newElement=null;this.button=null;this.options=a.extend({},a.fn.selectpicker.defaults,this.$element.data(),typeof f=="object"&&f);if(this.options.title==null){this.options.title=this.$element.attr("title")}this.val=b.prototype.val;this.render=b.prototype.render;this.refresh=b.prototype.refresh;this.selectAll=b.prototype.selectAll;this.deselectAll=b.prototype.deselectAll;this.init()};b.prototype={constructor:b,init:function(d){if(!this.options.container){this.$element.hide()}else{this.$element.css("visibility","hidden")}this.multiple=this.$element.prop("multiple");var f=this.$element.attr("id");this.$newElement=this.createView();this.$element.after(this.$newElement);if(this.options.container){this.selectPosition()}this.button=this.$newElement.find("> button");if(f!==undefined){var c=this;this.button.attr("data-id",f);a('label[for="'+f+'"]').click(function(){c.button.focus()})}if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker/gi,""))}if(this.multiple){this.$newElement.addClass("show-tick")}this.button.addClass(this.options.style);this.checkDisabled();this.checkTabIndex();this.clickListener();this.render();this.setSize()},createDropdown:function(){var c="<div class='btn-group bootstrap-select'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><div class='filter-option pull-left'></div>&nbsp;<div class='caret'></div></button><ul class='dropdown-menu' role='menu'></ul></div>";return a(c)},createView:function(){var c=this.createDropdown();var d=this.createLi();c.find("ul").append(d);return c},reloadLi:function(){this.destroyLi();var c=this.createLi();this.$newElement.find("ul").append(c)},destroyLi:function(){this.$newElement.find("li").remove()},createLi:function(){var e=this;var c=[];var d="";this.$element.find("option").each(function(h){var f=a(this);var l=f.attr("class")||"";var n=f.text();var m=f.data("subtext")!==undefined?'<small class="muted">'+f.data("subtext")+"</small>":"";var g=f.data("icon")!==undefined?'<i class="'+f.data("icon")+'"></i> ':"";if(g!==""&&(f.is(":disabled")||f.parent().is(":disabled"))){g="<span>"+g+"</span>"}n=g+'<span class="text">'+n+m+"</span>";if(e.options.hideDisabled&&(f.is(":disabled")||f.parent().is(":disabled"))){c.push('<a style="min-height: 0; padding: 0"></a>')}else{if(f.parent().is("optgroup")&&f.data("divider")!=true){if(f.index()==0){var i=f.parent().attr("label");var k=f.parent().data("subtext")!==undefined?'<small class="muted">'+f.parent().data("subtext")+"</small>":"";var j=f.parent().data("icon")?'<i class="'+f.parent().data("icon")+'"></i> ':"";i=j+'<span class="text">'+i+k+"</span>";if(f[0].index!=0){c.push('<div class="div-contain"><div class="divider"></div></div><dt>'+i+"</dt>"+e.createA(n,"opt "+l))}else{c.push("<dt>"+i+"</dt>"+e.createA(n,"opt "+l))}}else{c.push(e.createA(n,"opt "+l))}}else{if(f.data("divider")==true){c.push('<div class="div-contain"><div class="divider"></div></div>')}else{if(a(this).data("hidden")==true){c.push("")}else{c.push(e.createA(n,l))}}}}});a.each(c,function(f,g){d+="<li rel="+f+">"+g+"</li>"});if(!this.multiple&&this.$element.find("option:selected").length==0&&!e.options.title){this.$element.find("option").eq(0).prop("selected",true).attr("selected","selected")}return a(d)},createA:function(d,c){return'<a tabindex="0" class="'+c+'">'+d+"</a>"},render:function(){var c=this;this.$element.find("option").each(function(l){c.setDisabled(l,a(this).is(":disabled")||a(this).parent().is(":disabled"));c.setSelected(l,a(this).is(":selected"))});var h=this.$element.find("option:selected").map(function(l,n){var m;if(c.options.showSubtext&&a(this).attr("data-subtext")&&!c.multiple){m=' <small class="muted">'+a(this).data("subtext")+"</small>"}else{m=""}if(a(this).attr("title")!=undefined){return a(this).attr("title")}else{return a(this).text()+m}}).toArray();var k=!this.multiple?h[0]:h.join(", "),i=c.options.separatorText||c.options.defaultSeparatorText,g=c.options.selectedText||c.options.defaultSelectedText;if(c.multiple&&c.options.selectedTextFormat.indexOf("count")>-1){var e=c.options.selectedTextFormat.split(">");var f=this.options.hideDisabled?":not([disabled])":"";if((e.length>1&&h.length>e[1])||(e.length==1&&h.length>=2)){k=c.options.countSelectedText.replace("{0}",h.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+f).length)}}if(!k){k=c.options.title!=undefined?c.options.title:c.options.noneSelectedText}var j;if(this.options.showSubtext&&this.$element.find("option:selected").attr("data-subtext")){j=' <small class="muted">'+this.$element.find("option:selected").data("subtext")+"</small>"}else{j=""}var d=this.$element.find("option:selected").data("icon")||"";if(d.length){d='<i class="'+d+'"></i> '}c.$newElement.find(".filter-option").html(d+k+j)},setSize:function(){if(this.options.container){this.$newElement.toggle(this.$element.parent().is(":visible"))}var c=this;var h=this.$newElement.find(".dropdown-menu");var i=h.find("li > a");var g=this.$newElement.addClass("open").find(".dropdown-menu li > a").outerHeight();this.$newElement.removeClass("open");var d=h.find("li .divider").outerHeight(true);var o=this.$newElement.offset().top;var n=this.$newElement.outerHeight();var k=parseInt(h.css("padding-top"),10)+parseInt(h.css("padding-bottom"),10)+parseInt(h.css("border-top-width"),10)+parseInt(h.css("border-bottom-width"),10);var l=this.options.hideDisabled?":not(.disabled)":"";var j;if(this.options.size=="auto"){var f=function(){var t=o-a(window).scrollTop();var u=window.innerHeight;var q=k+parseInt(h.css("margin-top"))+parseInt(h.css("margin-bottom"))+2;var s=u-t-n-q;var r;j=s;if(c.$newElement.hasClass("dropup")){j=t-q}if((h.find("li").length+h.find("dt").length)>3){r=g*3+q-2}else{r=0}h.css({"max-height":j+"px","overflow-y":"auto","min-height":r+"px"})};f();a(window).resize(f);a(window).scroll(f)}else{if(this.options.size&&this.options.size!="auto"&&h.find("li"+l).length>this.options.size){var m=h.find("li"+l+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index();var e=h.find("li").slice(0,m+1).find(".div-contain").length;j=g*this.options.size+e*d+k;h.css({"max-height":j+"px","overflow-y":"auto"})}}if(this.options.width=="auto"){this.$newElement.find(".dropdown-menu").css("min-width","0");var p=this.$newElement.find(".dropdown-menu").css("width");this.$newElement.css("width",p);if(this.options.container){this.$element.css("width",p)}}else{if(this.options.width){if(this.options.container){this.$element.css("width",this.options.width);this.$newElement.width(this.$element.outerWidth())}else{this.$newElement.css("width",this.options.width)}}else{if(this.options.container){this.$newElement.width(this.$element.outerWidth())}}}},selectPosition:function(){var c=a(this.options.container).offset();var d=this.$element.offset();if(c&&d){var f=d.top-c.top;var e=d.left-c.left;this.$newElement.appendTo(this.options.container);this.$newElement.css({position:"absolute",top:f+"px",left:e+"px"})}},refresh:function(){this.reloadLi();this.render();this.setSize();this.checkDisabled();if(this.options.container){this.selectPosition()}},setSelected:function(c,d){if(d){this.$newElement.find("li").eq(c).addClass("selected")}else{this.$newElement.find("li").eq(c).removeClass("selected")}},setDisabled:function(d,c){if(c){this.$newElement.find("li").eq(d).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1)}else{this.$newElement.find("li").eq(d).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)}},isDisabled:function(){return this.$element.is(":disabled")||this.$element.attr("readonly")},checkDisabled:function(){if(this.isDisabled()){this.button.addClass("disabled");this.button.click(function(c){c.preventDefault()});this.button.attr("tabindex","-1")}else{if(!this.isDisabled()&&this.button.hasClass("disabled")){this.button.removeClass("disabled");this.button.click(function(){return true});this.button.removeAttr("tabindex")}}},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var c=this.$element.attr("tabindex");this.button.attr("tabindex",c)}},clickListener:function(){var c=this;a("body").on("touchstart.dropdown",".dropdown-menu",function(d){d.stopPropagation()});this.$newElement.on("click","li a",function(h){var g=a(this).parent().index(),f=a(this).parent(),d=f.parents(".bootstrap-select"),i=c.$element.val();if(c.multiple){h.stopPropagation()}h.preventDefault();if(c.$element.not(":disabled")&&!a(this).parent().hasClass("disabled")){if(!c.multiple){c.$element.find("option").prop("selected",false);c.$element.find("option").eq(g).prop("selected",true)}else{var j=c.$element.find("option").eq(g).prop("selected");if(j){c.$element.find("option").eq(g).prop("selected",false)}else{c.$element.find("option").eq(g).prop("selected",true)}}d.find("button").focus();if(i!=c.$element.val()){c.$element.trigger("change")}c.render()}});this.$newElement.on("click","li.disabled a, li dt, li .div-contain",function(f){f.preventDefault();f.stopPropagation();var d=a(this).parent().parents(".bootstrap-select");d.find("button").focus()});this.$element.on("change",function(d){c.render()})},val:function(c){if(c!=undefined){this.$element.val(c);this.$element.trigger("change");return this.$element}else{return this.$element.val()}},selectAll:function(){this.$element.find("option").prop("selected",true).attr("selected","selected");this.render()},deselectAll:function(){this.$element.find("option").prop("selected",false).removeAttr("selected");this.render()},keydown:function(h){var f,c,d,j,n,i,m,p,o;f=a(this);d=f.parent();c=a("[role=menu] li:not(.divider):visible a",d);if(!c.length){return}if(/(38|40)/.test(h.keyCode)){j=c.index(c.filter(":focus"));i=c.parent(":not(.disabled)").first().index();m=c.parent(":not(.disabled)").last().index();n=c.eq(j).parent().nextAll(":not(.disabled)").eq(0).index();p=c.eq(j).parent().prevAll(":not(.disabled)").eq(0).index();o=c.eq(n).parent().prevAll(":not(.disabled)").eq(0).index();if(h.keyCode==38){if(j!=o&&j>p){j=p}if(j<i){j=i}}if(h.keyCode==40){if(j!=o&&j<n){j=n}if(j>m){j=m}}c.eq(j).focus()}else{var k={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};var l=[];c.each(function(){if(a(this).parent().is(":not(.disabled)")){if(a.trim(a(this).text().toLowerCase()).substring(0,1)==k[h.keyCode]){l.push(a(this).parent().index())}}});var g=a(document).data("keycount");g++;a(document).data("keycount",g);var q=a.trim(a(":focus").text().toLowerCase()).substring(0,1);if(q!=k[h.keyCode]){g=1;a(document).data("keycount",g)}else{if(g>=l.length){a(document).data("keycount",0)}}c.eq(l[g-1]).focus()}if(/(13)/.test(h.keyCode)){a(":focus").click();d.addClass("open");a(document).data("keycount",0)}}};a.fn.selectpicker=function(f,e){var c=arguments;var g;var d=this.each(function(){if(a(this).is("select")){var h=a(this),j=h.data("selectpicker"),l=typeof f=="object"&&f;if(!j){h.data("selectpicker",(j=new b(this,l,e)))}else{if(l){for(var k in l){j.options[k]=l[k]}}}if(typeof f=="string"){var m=f;if(j[m] instanceof Function){[].shift.apply(c);g=j[m].apply(j,c)}else{g=j.options[m]}}}});if(g!=undefined){return g}else{return d}};a.fn.selectpicker.defaults={style:null,size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",countSelectedText:"{0} of {1} selected",width:null,container:false,hideDisabled:false,showSubtext:false};a(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",b.prototype.keydown)}(window.jQuery);!function(a){var d=(window.orientation!==undefined),c=navigator.userAgent.toLowerCase().indexOf("android")>-1;a.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."},dataName:"rawMaskFn"};var b=function(e,f){if(c){return}this.$element=a(e);this.mask=String(f.mask);this.options=a.extend({},a.fn.inputmask.defaults,f);this.init();this.listen();this.checkVal()};b.prototype={init:function(){var e=a.mask.definitions;var f=this.mask.length;this.tests=[];this.partialPosition=this.mask.length;this.firstNonMaskPos=null;a.each(this.mask.split(""),a.proxy(function(h,g){if(g=="?"){f--;this.partialPosition=h}else{if(e[g]){this.tests.push(new RegExp(e[g]));if(this.firstNonMaskPos===null){this.firstNonMaskPos=this.tests.length-1}}else{this.tests.push(null)}}},this));this.buffer=a.map(this.mask.split(""),a.proxy(function(g,h){if(g!="?"){return e[g]?this.options.placeholder:g}},this));this.focusText=this.$element.val();this.$element.data(a.mask.dataName,a.proxy(function(){return a.map(this.buffer,function(g,h){return this.tests[h]&&g!=this.options.placeholder?g:null}).join("")},this))},listen:function(){if(this.$element.attr("readonly")){return}var e=(a.browser.msie?"paste":"input")+".mask";this.$element.on("unmask",a.proxy(this.unmask,this)).on("focus.mask",a.proxy(this.focusEvent,this)).on("blur.mask",a.proxy(this.blurEvent,this)).on("keydown.mask",a.proxy(this.keydownEvent,this)).on("keypress.mask",a.proxy(this.keypressEvent,this)).on(e,a.proxy(this.pasteEvent,this))},caret:function(e,f){if(this.$element.length===0){return}if(typeof e=="number"){f=(typeof f=="number")?f:e;return this.$element.each(function(){if(this.setSelectionRange){this.setSelectionRange(e,f)}else{if(this.createTextRange){var h=this.createTextRange();h.collapse(true);h.moveEnd("character",f);h.moveStart("character",e);h.select()}}})}else{if(this.$element[0].setSelectionRange){e=this.$element[0].selectionStart;f=this.$element[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var g=document.selection.createRange();e=0-g.duplicate().moveStart("character",-100000);f=e+g.text.length}}return{begin:e,end:f}}},seekNext:function(f){var e=this.mask.length;while(++f<=e&&!this.tests[f]){}return f},seekPrev:function(e){while(--e>=0&&!this.tests[e]){}return e},shiftL:function(e,f){var k=this.mask.length;if(e<0){return}for(var g=e,h=this.seekNext(f);g<k;g++){if(this.tests[g]){if(h<k&&this.tests[g].test(this.buffer[h])){this.buffer[g]=this.buffer[h];this.buffer[h]=this.options.placeholder}else{break}h=this.seekNext(h)}}this.writeBuffer();this.caret(Math.max(this.firstNonMaskPos,e))},shiftR:function(k){var h=this.mask.length;for(var f=k,e=this.options.placeholder;f<h;f++){if(this.tests[f]){var g=this.seekNext(f);var l=this.buffer[f];this.buffer[f]=e;if(g<h&&this.tests[g].test(l)){e=l}else{break}}}},unmask:function(){this.$element.unbind(".mask").removeData("inputmask")},focusEvent:function(){this.focusText=this.$element.val();var e=this.mask.length;var g=this.checkVal();this.writeBuffer();var h=this;var f=function(){if(g==e){h.caret(0,g)}else{h.caret(g)}};if(a.browser.msie){f()}else{setTimeout(f,0)}},blurEvent:function(){this.checkVal();if(this.$element.val()!=this.focusText){this.$element.trigger("change")}},keydownEvent:function(g){var i=g.which;if(i==8||i==46||(d&&i==127)){var j=this.caret(),f=j.begin,h=j.end;if(h-f===0){f=i!=46?this.seekPrev(f):(h=this.seekNext(f-1));h=i==46?this.seekNext(h):h}this.clearBuffer(f,h);this.shiftL(f,h-1);return false}else{if(i==27){this.$element.val(this.focusText);this.caret(0,this.checkVal());return false}}},keypressEvent:function(g){var i=this.mask.length;var h=g.which,m=this.caret();if(g.ctrlKey||g.altKey||g.metaKey||h<32){return true}else{if(h){if(m.end-m.begin!==0){this.clearBuffer(m.begin,m.end);this.shiftL(m.begin,m.end-1)}var l=this.seekNext(m.begin-1);if(l<i){var f=String.fromCharCode(h);if(this.tests[l].test(f)){this.shiftR(l);this.buffer[l]=f;this.writeBuffer();var j=this.seekNext(l);this.caret(j)}}return false}}},pasteEvent:function(){var e=this;setTimeout(function(){e.caret(e.checkVal(true))},0)},clearBuffer:function(h,e){var g=this.mask.length;for(var f=h;f<e&&f<g;f++){if(this.tests[f]){this.buffer[f]=this.options.placeholder}}},writeBuffer:function(){return this.$element.val(this.buffer.join("")).val()},checkVal:function(e){var j=this.mask.length;var l=this.$element.val();var h=-1;for(var g=0,k=0;g<j;g++){if(this.tests[g]){this.buffer[g]=this.options.placeholder;while(k++<l.length){var f=l.charAt(k-1);if(this.tests[g].test(f)){this.buffer[g]=f;h=g;break}}if(k>l.length){break}}else{if(this.buffer[g]==l.charAt(k)&&g!=this.partialPosition){k++;h=g}}}if(!e&&h+1<this.partialPosition){this.$element.val("");this.clearBuffer(0,j)}else{if(e||h+1>=this.partialPosition){this.writeBuffer();if(!e){this.$element.val(this.$element.val().substring(0,h+1))}}}return(this.partialPosition?g:this.firstNonMaskPos)}};a.fn.inputmask=function(e){return this.each(function(){var f=a(this),g=f.data("inputmask");if(!g){f.data("inputmask",(g=new b(this,e)))}})};a.fn.inputmask.defaults={placeholder:"_"};a.fn.inputmask.Constructor=b;a(function(){a("body").on("focus.inputmask.data-api","[data-mask]",function(g){var f=a(this);if(f.data("inputmask")){return}g.preventDefault();f.inputmask(f.data())})})}(window.jQuery);!function(a){var b=function(c,d){d=a.extend({},a.fn.rowlink.defaults,d);var e=c.nodeName=="tr"?a(c):a(c).find("tr:has(td)");e.each(function(){var g=a(this).find(d.target).first();if(!g.length){return}var f=g.attr("href");a(this).find("td").not(".nolink").click(function(){window.location=f});a(this).addClass("rowlink");g.replaceWith(g.html())})};a.fn.rowlink=function(c){return this.each(function(){var d=a(this),e=d.data("rowlink");if(!e){d.data("rowlink",(e=new b(this,c)))}})};a.fn.rowlink.defaults={target:"a"};a.fn.rowlink.Constructor=b;a(function(){a('[data-provides="rowlink"]').each(function(){a(this).rowlink(a(this).data())})})}(window.jQuery);!function(a){var b=function(c,e){this.$element=a(c);this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file");this.$input=this.$element.find(":file");if(this.$input.length===0){return}this.name=this.$input.attr("name")||e.name;this.$hidden=this.$element.find(':hidden[name="'+this.name+'"]');if(this.$hidden.length===0){this.$hidden=a('<input type="hidden" />');this.$element.prepend(this.$hidden)}this.$preview=this.$element.find(".fileupload-preview");var d=this.$preview.css("height");if(this.$preview.css("display")!="inline"&&d!="0px"&&d!="none"){this.$preview.css("line-height",d)}this.$remove=this.$element.find('[data-dismiss="fileupload"]');this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",a.proxy(this.trigger,this));this.listen()};b.prototype={listen:function(){this.$input.on("change.fileupload",a.proxy(this.change,this));if(this.$remove){this.$remove.on("click.fileupload",a.proxy(this.clear,this))}},change:function(c,g){var f=c.target.files!==undefined?c.target.files[0]:(c.target.value?{name:c.target.value.replace(/^.+\\/,"")}:null);if(g==="clear"){return}if(!f){this.clear();return}this.$hidden.val("");this.$hidden.attr("name","");this.$input.attr("name",this.name);if(this.type==="image"&&this.$preview.length>0&&(typeof f.type!=="undefined"?f.type.match("image.*"):f.name.match("\\.(gif|png|jpe?g)$"))&&typeof FileReader!=="undefined"){var i=new FileReader();var h=this.$preview;var d=this.$element;i.onload=function(j){h.html('<img src="'+j.target.result+'" '+(h.css("max-height")!="none"?'style="max-height: '+h.css("max-height")+';"':"")+" />");d.addClass("fileupload-exists").removeClass("fileupload-new")};i.readAsDataURL(f)}else{this.$preview.text(f.name);this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(c){this.$hidden.val("");this.$hidden.attr("name",this.name);this.$input.attr("name","");this.$input.val("");this.$preview.html("");this.$element.addClass("fileupload-new").removeClass("fileupload-exists");if(c){this.$input.trigger("change",["clear"]);c.preventDefault()}},trigger:function(c){this.$input.trigger("click");c.preventDefault()}};a.fn.fileupload=function(c){return this.each(function(){var d=a(this),e=d.data("fileupload");if(!e){d.data("fileupload",(e=new b(this,c)))}})};a.fn.fileupload.Constructor=b;a(function(){a("body").on("click.fileupload.data-api",'[data-provides="fileupload"]',function(f){var d=a(this);if(d.data("fileupload")){return}d.fileupload(d.data());var c=a(f.target).parents("[data-dismiss=fileupload],[data-trigger=fileupload]").first();if(c.length>0){c.trigger("click.fileupload");f.preventDefault()}})})}(window.jQuery);(function(e,f){var g=e.History=e.History||{},h=e.jQuery;if(typeof g.Adapter!="undefined"){throw new Error("History.js Adapter has already been loaded...")}g.Adapter={bind:function(d,i,j){h(d).bind(i,j)},trigger:function(d,i,j){h(d).trigger(i,j)},extractEventData:function(b,i,j){var k=i&&i.originalEvent&&i.originalEvent[b]||j&&j[b]||f;return k},onDomLoad:function(b){h(b)}},typeof g.init!="undefined"&&g.init()})(window),function(o,p){var q=o.console||p,r=o.document,s=o.navigator,t=o.sessionStorage||!1,u=o.setTimeout,v=o.clearTimeout,w=o.setInterval,x=o.clearInterval,y=o.JSON,z=o.alert,A=o.History=o.History||{},B=o.history;y.stringify=y.stringify||y.encode,y.parse=y.parse||y.decode;if(typeof A.init!="undefined"){throw new Error("History.js Core has already been loaded...")}A.init=function(){return typeof A.Adapter=="undefined"?!1:(typeof A.initCore!="undefined"&&A.initCore(),typeof A.initHtml4!="undefined"&&A.initHtml4(),!0)},A.initCore=function(){if(typeof A.initCore.initialized!="undefined"){return !1}A.initCore.initialized=!0,A.options=A.options||{},A.options.hashChangeInterval=A.options.hashChangeInterval||100,A.options.safariPollInterval=A.options.safariPollInterval||500,A.options.doubleCheckInterval=A.options.doubleCheckInterval||500,A.options.storeInterval=A.options.storeInterval||1000,A.options.busyDelay=A.options.busyDelay||250,A.options.debug=A.options.debug||!1,A.options.initialTitle=A.options.initialTitle||r.title,A.intervalList=[],A.clearAllIntervals=function(){var c,d=A.intervalList;if(typeof d!="undefined"&&d!==null){for(c=0;c<d.length;c++){x(d[c])}A.intervalList=null}},A.debug=function(){(A.options.debug||!1)&&A.log.apply(A,arguments)},A.log=function(){var c=typeof q!="undefined"&&typeof q.log!="undefined"&&typeof q.log.apply!="undefined",d=r.getElementById("log"),k,l,m,n,C;c?(n=Array.prototype.slice.call(arguments),k=n.shift(),typeof q.debug!="undefined"?q.debug.apply(q,[k,n]):q.log.apply(q,[k,n])):k="\n"+arguments[0]+"\n";for(l=1,m=arguments.length;l<m;++l){C=arguments[l];if(typeof C=="object"&&typeof y!="undefined"){try{C=y.stringify(C)}catch(D){}}k+="\n"+C+"\n"}return d?(d.value+=k+"\n-----\n",d.scrollTop=d.scrollHeight-d.clientHeight):c||z(k),!0},A.getInternetExplorerMajorVersion=function(){var c=A.getInternetExplorerMajorVersion.cached=typeof A.getInternetExplorerMajorVersion.cached!="undefined"?A.getInternetExplorerMajorVersion.cached:function(){var d=3,e=r.createElement("div"),f=e.getElementsByTagName("i");while((e.innerHTML="<!--[if gt IE "+ ++d+"]><i></i><![endif]-->")&&f[0]){}return d>4?d:!1}();return c},A.isInternetExplorer=function(){var c=A.isInternetExplorer.cached=typeof A.isInternetExplorer.cached!="undefined"?A.isInternetExplorer.cached:Boolean(A.getInternetExplorerMajorVersion());return c},A.emulated={pushState:!Boolean(o.history&&o.history.pushState&&o.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(s.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(s.userAgent)),hashChange:Boolean(!("onhashchange" in o||"onhashchange" in r)||A.isInternetExplorer()&&A.getInternetExplorerMajorVersion()<8)},A.enabled=!A.emulated.pushState,A.bugs={setHash:Boolean(!A.emulated.pushState&&s.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),safariPoll:Boolean(!A.emulated.pushState&&s.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),ieDoubleCheck:Boolean(A.isInternetExplorer()&&A.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(A.isInternetExplorer()&&A.getInternetExplorerMajorVersion()<7)},A.isEmptyObject=function(c){for(var d in c){return !1}return !0},A.cloneObject=function(d){var e,f;return d?(e=y.stringify(d),f=y.parse(e)):f={},f},A.getRootUrl=function(){var c=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||!1){c+=":"+r.location.port}return c+="/",c},A.getBaseHref=function(){var d=r.getElementsByTagName("base"),e=null,f="";return d.length===1&&(e=d[0],f=e.href.replace(/[^\/]+$/,"")),f=f.replace(/\/+$/,""),f&&(f+="/"),f},A.getBaseUrl=function(){var c=A.getBaseHref()||A.getBasePageUrl()||A.getRootUrl();return c},A.getPageUrl=function(){var d=A.getState(!1,!1),e=(d||{}).url||r.location.href,f;return f=e.replace(/\/+$/,"").replace(/[^\/]+$/,function(g,h,i){return/\./.test(g)?g:g+"/"}),f},A.getBasePageUrl=function(){var c=r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(d,e,f){return/[^\/]$/.test(d)?"":d}).replace(/\/+$/,"")+"/";return c},A.getFullUrl=function(e,f){var g=e,h=e.substring(0,1);return f=typeof f=="undefined"?!0:f,/[a-z]+\:\/\//.test(e)||(h==="/"?g=A.getRootUrl()+e.replace(/^\/+/,""):h==="#"?g=A.getPageUrl().replace(/#.*/,"")+e:h==="?"?g=A.getPageUrl().replace(/[\?#].*/,"")+e:f?g=A.getBaseUrl()+e.replace(/^(\.\/)+/,""):g=A.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),g.replace(/\#$/,"")},A.getShortUrl=function(e){var f=e,g=A.getBaseUrl(),h=A.getRootUrl();return A.emulated.pushState&&(f=f.replace(g,"")),f=f.replace(h,"/"),A.isTraditionalAnchor(f)&&(f="./"+f),f=f.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),f},A.store={},A.idToState=A.idToState||{},A.stateToId=A.stateToId||{},A.urlToId=A.urlToId||{},A.storedStates=A.storedStates||[],A.savedStates=A.savedStates||[],A.normalizeStore=function(){A.store.idToState=A.store.idToState||{},A.store.urlToId=A.store.urlToId||{},A.store.stateToId=A.store.stateToId||{}},A.getState=function(d,e){typeof d=="undefined"&&(d=!0),typeof e=="undefined"&&(e=!0);var f=A.getLastSavedState();return !f&&e&&(f=A.createStateObject()),d&&(f=A.cloneObject(f),f.url=f.cleanUrl||f.url),f},A.getIdByState=function(d){var e=A.extractId(d.url),f;if(!e){f=A.getStateString(d);if(typeof A.stateToId[f]!="undefined"){e=A.stateToId[f]}else{if(typeof A.store.stateToId[f]!="undefined"){e=A.store.stateToId[f]}else{for(;;){e=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof A.idToState[e]=="undefined"&&typeof A.store.idToState[e]=="undefined"){break}}A.stateToId[f]=e,A.idToState[e]=d}}}return e},A.normalizeState=function(d){var e,f;if(!d||typeof d!="object"){d={}}if(typeof d.normalized!="undefined"){return d}if(!d.data||typeof d.data!="object"){d.data={}}e={},e.normalized=!0,e.title=d.title||"",e.url=A.getFullUrl(A.unescapeString(d.url||r.location.href)),e.hash=A.getShortUrl(e.url),e.data=A.cloneObject(d.data),e.id=A.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,f=!A.isEmptyObject(e.data);if(e.title||f){e.hash=A.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id}return e.hashedUrl=A.getFullUrl(e.hash),(A.emulated.pushState||A.bugs.safariPoll)&&A.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e},A.createStateObject=function(e,f,g){var h={data:e,title:f,url:g};return h=A.normalizeState(h),h},A.getStateById=function(d){d=String(d);var e=A.idToState[d]||A.store.idToState[d]||p;return e},A.getStateString=function(e){var f,g,h;return f=A.normalizeState(e),g={data:f.data,title:e.title,url:e.url},h=y.stringify(g),h},A.getStateId=function(d){var e,f;return e=A.normalizeState(d),f=e.id,f},A.getHashByState=function(d){var e,f;return e=A.normalizeState(d),f=e.hash,f},A.extractId=function(e){var f,g,h;return g=/(.*)\&_suid=([0-9]+)$/.exec(e),h=g?g[1]||e:e,f=g?String(g[2]||""):"",f||!1},A.isTraditionalAnchor=function(c){var d=!/[\/\?\.]/.test(c);return d},A.extractState=function(f,g){var h=null,i,j;return g=g||!1,i=A.extractId(f),i&&(h=A.getStateById(i)),h||(j=A.getFullUrl(f),i=A.getIdByUrl(j)||!1,i&&(h=A.getStateById(i)),!h&&g&&!A.isTraditionalAnchor(f)&&(h=A.createStateObject(null,null,j))),h},A.getIdByUrl=function(d){var e=A.urlToId[d]||A.store.urlToId[d]||p;return e},A.getLastSavedState=function(){return A.savedStates[A.savedStates.length-1]||p},A.getLastStoredState=function(){return A.storedStates[A.storedStates.length-1]||p},A.hasUrlDuplicate=function(d){var e=!1,f;return f=A.extractState(d.url),e=f&&f.id!==d.id,e},A.storeState=function(c){return A.urlToId[c.url]=c.id,A.storedStates.push(A.cloneObject(c)),c},A.isLastSavedState=function(f){var g=!1,h,i,j;return A.savedStates.length&&(h=f.id,i=A.getLastSavedState(),j=i.id,g=h===j),g},A.saveState=function(c){return A.isLastSavedState(c)?!1:(A.savedStates.push(A.cloneObject(c)),!0)},A.getStateByIndex=function(c){var d=null;return typeof c=="undefined"?d=A.savedStates[A.savedStates.length-1]:c<0?d=A.savedStates[A.savedStates.length+c]:d=A.savedStates[c],d},A.getHash=function(){var c=A.unescapeHash(r.location.hash);return c},A.unescapeString=function(e){var f=e,g;for(;;){g=o.unescape(f);if(g===f){break}f=g}return f},A.unescapeHash=function(c){var d=A.normalizeHash(c);return d=A.unescapeString(d),d},A.normalizeHash=function(c){var d=c.replace(/[^#]*#/,"").replace(/#.*/,"");return d},A.setHash=function(d,g){var h,i,j;return g!==!1&&A.busy()?(A.pushQueue({scope:A,callback:A.setHash,args:arguments,queue:g}),!1):(h=A.escapeHash(d),A.busy(!0),i=A.extractState(d,!0),i&&!A.emulated.pushState?A.pushState(i.data,i.title,i.url,!1):r.location.hash!==h&&(A.bugs.setHash?(j=A.getPageUrl(),A.pushState(null,null,j+"#"+h,!1)):r.location.hash=h),A)},A.escapeHash=function(d){var e=A.normalizeHash(d);return e=o.escape(e),A.bugs.hashEscape||(e=e.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),e},A.getHashByUrl=function(c){var d=String(c).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return d=A.unescapeHash(d),d},A.setTitle=function(d){var f=d.title,g;f||(g=A.getStateByIndex(0),g&&g.url===d.url&&(f=g.title||A.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=f.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(h){}return r.title=f,A},A.queues=[],A.busy=function(c){typeof c!="undefined"?A.busy.flag=c:typeof A.busy.flag=="undefined"&&(A.busy.flag=!1);if(!A.busy.flag){v(A.busy.timeout);var d=function(){var e,f,g;if(A.busy.flag){return}for(e=A.queues.length-1;e>=0;--e){f=A.queues[e];if(f.length===0){continue}g=f.shift(),A.fireQueueItem(g),A.busy.timeout=u(d,A.options.busyDelay)}};A.busy.timeout=u(d,A.options.busyDelay)}return A.busy.flag},A.busy.flag=!1,A.fireQueueItem=function(c){return c.callback.apply(c.scope||A,c.args||[])},A.pushQueue=function(c){return A.queues[c.queue||0]=A.queues[c.queue||0]||[],A.queues[c.queue||0].push(c),A},A.queue=function(c,d){return typeof c=="function"&&(c={callback:c}),typeof d!="undefined"&&(c.queue=d),A.busy()?A.pushQueue(c):A.fireQueueItem(c),A},A.clearQueue=function(){return A.busy.flag=!1,A.queues=[],A},A.stateChanged=!1,A.doubleChecker=!1,A.doubleCheckComplete=function(){return A.stateChanged=!0,A.doubleCheckClear(),A},A.doubleCheckClear=function(){return A.doubleChecker&&(v(A.doubleChecker),A.doubleChecker=!1),A},A.doubleCheck=function(c){return A.stateChanged=!1,A.doubleCheckClear(),A.bugs.ieDoubleCheck&&(A.doubleChecker=u(function(){return A.doubleCheckClear(),A.stateChanged||c(),!0},A.options.doubleCheckInterval)),A},A.safariStatePoll=function(){var d=A.extractState(r.location.href),e;if(!A.isLastSavedState(d)){e=d}else{return}return e||(e=A.createStateObject()),A.Adapter.trigger(o,"popstate"),A},A.back=function(c){return c!==!1&&A.busy()?(A.pushQueue({scope:A,callback:A.back,args:arguments,queue:c}),!1):(A.busy(!0),A.doubleCheck(function(){A.back(!1)}),B.go(-1),!0)},A.forward=function(c){return c!==!1&&A.busy()?(A.pushQueue({scope:A,callback:A.forward,args:arguments,queue:c}),!1):(A.busy(!0),A.doubleCheck(function(){A.forward(!1)}),B.go(1),!0)},A.go=function(d,e){var f;if(d>0){for(f=1;f<=d;++f){A.forward(e)}}else{if(!(d<0)){throw new Error("History.go: History.go requires a positive or negative integer passed.")}for(f=-1;f>=d;--f){A.back(e)}}return A};if(A.emulated.pushState){var a=function(){};A.pushState=A.pushState||a,A.replaceState=A.replaceState||a}else{A.onPopState=function(d,i){var j=!1,k=!1,l,m;return A.doubleCheckComplete(),l=A.getHash(),l?(m=A.extractState(l||r.location.href,!0),m?A.replaceState(m.data,m.title,m.url,!1):(A.Adapter.trigger(o,"anchorchange"),A.busy(!1)),A.expectedStateId=!1,!1):(j=A.Adapter.extractEventData("state",d,i)||!1,j?k=A.getStateById(j):A.expectedStateId?k=A.getStateById(A.expectedStateId):k=A.extractState(r.location.href),k||(k=A.createStateObject(null,null,r.location.href)),A.expectedStateId=!1,A.isLastSavedState(k)?(A.busy(!1),!1):(A.storeState(k),A.saveState(k),A.setTitle(k),A.Adapter.trigger(o,"statechange"),A.busy(!1),!0))},A.Adapter.bind(o,"popstate",A.onPopState),A.pushState=function(g,h,i,j){if(A.getHashByUrl(i)&&A.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(j!==!1&&A.busy()){return A.pushQueue({scope:A,callback:A.pushState,args:arguments,queue:j}),!1}A.busy(!0);var k=A.createStateObject(g,h,i);return A.isLastSavedState(k)?A.busy(!1):(A.storeState(k),A.expectedStateId=k.id,B.pushState(k.id,k.title,k.url),A.Adapter.trigger(o,"popstate")),!0},A.replaceState=function(g,h,i,j){if(A.getHashByUrl(i)&&A.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(j!==!1&&A.busy()){return A.pushQueue({scope:A,callback:A.replaceState,args:arguments,queue:j}),!1}A.busy(!0);var k=A.createStateObject(g,h,i);return A.isLastSavedState(k)?A.busy(!1):(A.storeState(k),A.expectedStateId=k.id,B.replaceState(k.id,k.title,k.url),A.Adapter.trigger(o,"popstate")),!0}}if(t){try{A.store=y.parse(t.getItem("History.store"))||{}}catch(b){A.store={}}A.normalizeStore()}else{A.store={},A.normalizeStore()}A.Adapter.bind(o,"beforeunload",A.clearAllIntervals),A.Adapter.bind(o,"unload",A.clearAllIntervals),A.saveState(A.storeState(A.extractState(r.location.href,!0))),t&&(A.onUnload=function(){var d,e;try{d=y.parse(t.getItem("History.store"))||{}}catch(f){d={}}d.idToState=d.idToState||{},d.urlToId=d.urlToId||{},d.stateToId=d.stateToId||{};for(e in A.idToState){if(!A.idToState.hasOwnProperty(e)){continue}d.idToState[e]=A.idToState[e]}for(e in A.urlToId){if(!A.urlToId.hasOwnProperty(e)){continue}d.urlToId[e]=A.urlToId[e]}for(e in A.stateToId){if(!A.stateToId.hasOwnProperty(e)){continue}d.stateToId[e]=A.stateToId[e]}A.store=d,A.normalizeStore(),t.setItem("History.store",y.stringify(d))},A.intervalList.push(w(A.onUnload,A.options.storeInterval)),A.Adapter.bind(o,"beforeunload",A.onUnload),A.Adapter.bind(o,"unload",A.onUnload));if(!A.emulated.pushState){A.bugs.safariPoll&&A.intervalList.push(w(A.safariStatePoll,A.options.safariPollInterval));if(s.vendor==="Apple Computer, Inc."||(s.appCodeName||"")==="Mozilla"){A.Adapter.bind(o,"hashchange",function(){A.Adapter.trigger(o,"popstate")}),A.getHash()&&A.Adapter.onDomLoad(function(){A.Adapter.trigger(o,"hashchange")})}}},A.init()}(window);/* 
 * AjaxQ jQuery Plugin
 * Copyright (c) 2012 Foliotek Inc.
 * MIT License
 * https://github.com/Foliotek/ajaxq
*/
(function(a){var b={};a.ajaxq=function(i,g){if(typeof g==="undefined"){throw ("AjaxQ: queue name is not provided")}var d=a.Deferred(),h=d.promise();h.success=h.done;h.error=h.fail;h.complete=h.always;var c=a.extend(true,{},g);f(function(){var j=a.ajax.apply(window,[c]).always(e);j.done(function(){d.resolve.apply(this,arguments)});j.fail(function(){d.reject.apply(this,arguments)})});return h;function f(j){if(!b[i]){b[i]=[];j()}else{b[i].push(j)}}function e(){var j=b[i].shift();if(j){j()}else{delete b[i]}}};a.each(["getq","postq"],function(c,d){a[d]=function(g,i,f,e,h){if(a.isFunction(f)){h=h||e;e=f;f=undefined}return a.ajaxq(g,{type:d==="postq"?"post":"get",url:i,data:f,success:e,dataType:h})}});a.ajaxq.isRunning=function(d){for(var c in b){if(b.hasOwnProperty(c)){return(!d||d===c)}}return false}})(jQuery);/*
*  Ajax Autocomplete for jQuery, version 1.1.5
*  (c) 2010 Tomas Kirda, Vytautas Pranskunas
*
*  Ajax Autocomplete for jQuery is freely distributable under the terms of an MIT-style license.
*  For details, see the web site: http://www.devbridge.com/projects/autocomplete/jquery/
*
*  Last Review: 07/24/2012
*  NOTE: Modified by Aaron Marasco for use within the moovers CRM Application
*/
(function($){function Autosearch(el,container,options){this.el=$(el);this.el.attr("autosearch","off");this.container=$(container);this.suggestions=[];this.badQueries=[];this.currentValue=this.el.val();this.intervalId=0;this.cachedResponse=[];this.onChange=null;this.ignoreValueChange=false;this.serviceUrl=options.serviceUrl;this.isLocal=false;this.options={minChars:4,deferRequestBy:100,params:{},delimiter:null,onSuggest:$.noop,cache:true};this.initialize();this.setOptions(options);this.el.data("autosearch",this)}$.fn.autosearch=function(container,options){var autosearchControl;if(typeof container=="string"){var optionName=container;var option=options;autosearchControl=this.data("autosearch");if(typeof autosearchControl[optionName]=="function"){autosearchControl[optionName](option)}}else{autosearchControl=new Autosearch(this.get(0)||$("<input />"),container,options)}return autosearchControl};Autosearch.prototype={initialize:function(){var me=this;this.el.keydown(function(e){me.onKeyPress(e)});this.el.keyup(function(e){me.onKeyUp(e)});this.el[0].onsearch=function(e){me.onKeyUp(e)}},extendOptions:function(options){$.extend(this.options,options)},setOptions:function(options){var o=this.options;this.extendOptions(options);if(o.lookup||o.isLocal){this.isLocal=true;if($.isArray(o.lookup)){o.lookup={suggestions:o.lookup,data:[]}}}},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},onKeyPress:function(e){if(this.disabled||!this.enabled){return}switch(e.keyCode){case 27:this.el.val(this.currentValue);this.hide();break;case 9:case 13:return;default:return}},onKeyUp:function(e){if(this.disabled){return}switch(e.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el.val()){if(this.options.deferRequestBy>0){var me=this;this.onChangeInterval=setInterval(function(){me.onValueChange()},this.options.deferRequestBy)}else{this.onValueChange()}}},onValueChange:function(){clearInterval(this.onChangeInterval);this.currentValue=this.el.val();var q=this.getQuery(this.currentValue);this.selectedIndex=-1;if(this.ignoreValueChange){this.ignoreValueChange=false;return}this.getSuggestions(q)},getQuery:function(val){var d,arr;d=this.options.delimiter;if(!d){return $.trim(val)}arr=val.split(d);return $.trim(arr[arr.length-1])},getSuggestionsLocal:function(q){var ret,arr,len,val,i;arr=this.options.lookup;len=arr.suggestions.length;ret={suggestions:[],data:[]};q=q.toLowerCase();for(i=0;i<len;i++){val=arr.suggestions[i];if(val.toLowerCase().indexOf(q)===0){ret.suggestions.push(val);ret.data.push(arr.data[i])}}return ret},getSuggestions:function(q){var cr=this.isLocal?this.getSuggestionsLocal(q):this.cachedResponse[q];var me=this;if(cr&&$.isArray(cr)){this.suggestions=cr;this.suggest()}else{if(!this.isBadQuery(q)){me=this;me.options.params.q=q;if(!me.options.cache){me.options.params._=$.now()}$.get(this.serviceUrl,me.options.params,function(txt){me.processResponse(q,txt)},"text")}}},isBadQuery:function(q){var i=this.badQueries.length;while(i--){if(q.indexOf(this.badQueries[i])===0){return true}}return false},suggest:function(){this.options.onSuggest(this.suggestions)},processResponse:function(query,text){var response;try{response=eval("("+text+")")}catch(err){return}if(!$.isArray(response.data)){response.data=[]}this.cachedResponse[query]=response;if(response.length==0){this.badQueries.push(query)}if(query===this.getQuery(this.currentValue)){this.suggestions=response;this.suggest()}}}}(jQuery));/*
*  Ajax Autocomplete for jQuery, version 1.1.5
*  (c) 2012 Tomas Kirda, Vytautas Pranskunas
*
*  Ajax Autocomplete for jQuery is freely distributable under the terms of an MIT-style license.
*  For details, see the web site: http://www.devbridge.com/projects/autocomplete/jquery/
*
*  Modifications available at:
*  https://github.com/Moovers/jQuery-Autocomplete
*  Modifications (c) 2012 Moovers, Inc.
*/
(function($){var reEscape=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g");function fnFormatResult(value,data,currentValue){var pattern="("+currentValue.replace(reEscape,"\\$1")+")";return value.replace(new RegExp(pattern,"gi"),"<strong>$1</strong>")}function Autocomplete(el,options){this.el=$(el);this.el.attr("autocomplete","off");this.suggestions=[];this.data=[];this.badQueries=[];this.selectedIndex=-1;this.currentValue=this.el.val();this.intervalId=0;this.cachedResponse=[];this.onChangeInterval=null;this.onChange=null;this.ignoreValueChange=false;this.serviceUrl=options.serviceUrl;this.isLocal=false;this.options={autoSubmit:false,minChars:1,maxHeight:300,deferRequestBy:0,width:0,highlight:true,params:{},partialMatch:false,fnFormatResult:fnFormatResult,delimiter:null,zIndex:9999,selectFirst:false,maxSuggestions:-1,orderBy:null};this.initialize();this.setOptions(options);this.el.data("autocomplete",this)}$.fn.autocomplete=function(options,args){var instance;if(typeof options==="string"){instance=this.data("autocomplete");if(typeof instance[options]==="function"){instance[options](args)}}else{instance=new Autocomplete(this.get(0)||$("<input />"),options)}return instance};Autocomplete.prototype={killerFn:null,initialize:function(){var me=this,uid=Math.floor(Math.random()*1048576).toString(16),autocompleteElId="Autocomplete_"+uid,onKeyPress=function(e){me.onKeyPress(e)};this.killerFn=function(e){if($(e.target).parents(".autocomplete").size()===0){me.killSuggestions();me.disableKillerFn()}};if(!this.options.width){this.options.width=this.el.outerWidth()}this.mainContainerId="AutocompleteContainter_"+uid;$('<div id="'+this.mainContainerId+'" style="position:absolute;z-index:9999;"><div class="autocomplete-w1"><div class="autocomplete" id="'+autocompleteElId+'" style="display:none; width:300px;"></div></div></div>').appendTo("body");this.container=$("#"+autocompleteElId);this.fixPosition();if(window.opera){this.el.keypress(onKeyPress)}else{this.el.keydown(onKeyPress)}this.el.keyup(function(e){me.onKeyUp(e)});this.el.blur(function(){me.enableKillerFn()});this.el.focus(function(){me.fixPosition()});this.el.change(function(){me.onValueChanged()})},extendOptions:function(options){$.extend(this.options,options)},setOptions:function(options){var o=this.options;this.extendOptions(options);if(o.lookup||o.isLocal){this.isLocal=true;if($.isArray(o.lookup)){o.lookup={suggestions:o.lookup,data:[]}}}$("#"+this.mainContainerId).css({zIndex:o.zIndex});this.container.css({maxHeight:o.maxHeight+"px",width:o.width})},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},disable:function(){this.disabled=true},enable:function(){this.disabled=false},fixPosition:function(){var offset=this.el.offset();$("#"+this.mainContainerId).css({top:(offset.top+this.el.outerHeight())+"px",left:offset.left+"px"})},enableKillerFn:function(){var me=this;$(document).bind("click touchstart",me.killerFn)},disableKillerFn:function(){var me=this;$(document).unbind("click touchstart",me.killerFn)},killSuggestions:function(){var me=this;me.stopKillSuggestions();me.intervalId=window.setInterval(function(){me.hide();me.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onValueChanged:function(){this.change(this.selectedIndex)},onKeyPress:function(e){if(this.disabled||!this.enabled){return}switch(e.keyCode){case 27:this.el.val(this.currentValue);this.hide();break;case 9:case 13:if(this.selectedIndex===-1){this.hide();return}this.select(this.selectedIndex,e);if(e.keyCode===9){return}break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}e.stopImmediatePropagation();e.preventDefault()},onKeyUp:function(e){if(this.disabled){return}switch(e.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el.val()){if(this.options.deferRequestBy>0){var me=this;this.onChangeInterval=setInterval(function(){me.onValueChange()},this.options.deferRequestBy)}else{this.onValueChange()}}},onValueChange:function(){clearInterval(this.onChangeInterval);this.currentValue=this.el.val();var q=this.getQuery(this.currentValue);this.selectedIndex=-1;if(this.ignoreValueChange){this.ignoreValueChange=false;return}if(q===""||q.length<this.options.minChars){this.hide()}else{this.getSuggestions(q)}},getQuery:function(val){var d,arr;d=this.options.delimiter;if(!d){return $.trim(val)}arr=val.split(d);return $.trim(arr[arr.length-1])},getSuggestionsLocal:function(q){var ret,arr,len,val,i,j,option,options,isMatch,order,max;arr=this.options.lookup;len=arr.suggestions.length;ret={suggestions:[],data:[]};q=q.toLowerCase();for(i=0;i<len;i++){val=arr.suggestions[i];if($.isPlainObject(val)&&val.value&&val.alts){options=[val.value].concat(val.alts).map(function(i){return{value:i,partial:val.value===i||!parseFloat(i)}});val=val.value}else{options=[{value:val,partial:true}]}for(j=0;j<options.length;j++){isMatch=false;option=options[j];if(!option.value){isMatch=false}else{if(this.options.partialMatch&&option.partial&&(option.value.toLowerCase().indexOf(q)>=0)){isMatch=true}else{if(!this.options.partialMatch&&option.partial&&(option.value.toLowerCase().indexOf(q)===0)){isMatch=true}else{if(!option.partial&&option.value.toLowerCase()===q){isMatch=true}}}}if(isMatch){ret.suggestions.push(val);ret.data.push(arr.data[i]);break}}}order=$.isFunction(this.options.orderBy)?this.options.orderBy(q):undefined;max=this.options.maxSuggestions;if(max>0){ret.suggestions=ret.suggestions.sort(order).slice(0,max)}return ret},getSuggestions:function(q){var cr,me;cr=this.isLocal?this.getSuggestionsLocal(q):this.cachedResponse[q];if(cr&&$.isArray(cr.suggestions)){this.suggestions=cr.suggestions;this.data=cr.data;this.suggest()}else{if(!this.isBadQuery(q)){me=this;me.options.params.query=q;$.get(this.serviceUrl,me.options.params,function(txt){me.processResponse(txt)},"text")}}},isBadQuery:function(q){var i=this.badQueries.length;while(i--){if(q.indexOf(this.badQueries[i])===0){return true}}return false},hide:function(){this.enabled=false;this.selectedIndex=-1;this.container.hide()},suggest:function(){if(this.suggestions.length===0){this.hide();return}var me,len,div,f,v,i,s,mOver,mClick;me=this;len=this.suggestions.length;f=this.options.fnFormatResult;v=this.getQuery(this.currentValue);if(this.options.selectFirst){this.selectedIndex=0}mOver=function(xi){return function(){me.activate(xi)}};mClick=function(xi){return function(e){me.select(xi,e)}};this.container.hide().empty();for(i=0;i<len;i++){s=this.suggestions[i];div=$((me.selectedIndex===i?'<div class="selected"':"<div")+' title="'+s+'">'+f(s,this.data[i],v)+"</div>");div.mouseover(mOver(i));div.bind("click touchstart",mClick(i));this.container.append(div)}this.enabled=true;this.container.show()},processResponse:function(text){var response;try{response=eval("("+text+")")}catch(err){return}if(!$.isArray(response.data)){response.data=[]}if(!this.options.noCache){this.cachedResponse[response.query]=response;if(response.suggestions.length===0){this.badQueries.push(response.query)}}if(response.query===this.getQuery(this.currentValue)){this.suggestions=response.suggestions;this.data=response.data;this.suggest()}},activate:function(index){var divs,activeItem;divs=this.container.children();if(this.selectedIndex!==-1&&divs.length>this.selectedIndex){$(divs.get(this.selectedIndex)).removeClass()}this.selectedIndex=index;if(this.selectedIndex!==-1&&divs.length>this.selectedIndex){activeItem=divs.get(this.selectedIndex);$(activeItem).addClass("selected");return activeItem}return null},deactivate:function(div,index){div.className="";if(this.selectedIndex===index){this.selectedIndex=-1}},destroy:function(){this.disable();$("#"+this.mainContainerId).remove()},select:function(i,originalEvent){var selectedValue,f;selectedValue=this.suggestions[i];if(selectedValue){this.el.val(selectedValue);if(this.options.autoSubmit){f=this.el.parents("form");if(f.length>0){f.get(0).submit()}}this.ignoreValueChange=true;this.hide();this.onSelect(i,originalEvent)}},change:function(i){var selectedValue,onChange,me,s,d;me=this;selectedValue=this.suggestions[i];if(selectedValue){s=me.suggestions[i];d=me.data[i];me.el.val(me.getValue(s))}else{s="";d=-1}onChange=me.options.onChange;if($.isFunction(onChange)){onChange(s,d,me.el)}},moveUp:function(){if(this.selectedIndex===-1){return}if(this.selectedIndex===0){this.container.children().get(0).className="";this.selectedIndex=-1;this.el.val(this.currentValue);return}this.adjustScroll(this.selectedIndex-1)},moveDown:function(){if(this.selectedIndex===(this.suggestions.length-1)){return}this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(i){var activeItem,offsetTop,upperBound,lowerBound;activeItem=this.activate(i);offsetTop=activeItem.offsetTop;upperBound=this.container.scrollTop();lowerBound=upperBound+this.options.maxHeight-25;if(offsetTop<upperBound){this.container.scrollTop(offsetTop)}else{if(offsetTop>lowerBound){this.container.scrollTop(offsetTop-this.options.maxHeight+25)}}this.el.val(this.getValue(this.suggestions[i]))},onSelect:function(i,originalEvent){var me=this,callback=me.options.onSelect,suggestion=me.suggestions[i];me.el.val(me.getValue(suggestion));if($.isFunction(callback)){callback(suggestion,originalEvent)}},getValue:function(value){var me=this,separator=me.options.delimiter,currentValue,array;if(!separator){return value}currentValue=me.currentValue;array=currentValue.split(separator);if(array.length===1){return value}return currentValue.substr(0,currentValue.length-array[array.length-1].length)+value}}}(jQuery));/*
 * FullCalendar v1.5.4
 * http://arshaw.com/fullcalendar/
 * Copyright (c) 2011 Adam Shaw
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 */
(function(a,ax){var E={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},highlightDays:[],buttonClick:a.noop,theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"};var ai={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}};var J=a.fullCalendar={version:"1.5.4"};var K=J.views={};a.fn.fullCalendar=function(aH){if(typeof aH=="string"){var aF=Array.prototype.slice.call(arguments,1);var aI;this.each(function(){var aJ=a.data(this,"fullCalendar");if(aJ&&a.isFunction(aJ[aH])){var aK=aJ[aH].apply(aJ,aF);if(aI===ax){aI=aK}if(aH=="destroy"){a.removeData(this,"fullCalendar")}}});if(aI!==ax){return aI}return this}var aG=aH.eventSources||[];delete aH.eventSources;if(aH.events){aG.push(aH.events);delete aH.events}aH=a.extend(true,{},E,(aH.isRTL||aH.isRTL===ax&&E.isRTL)?ai:{},aH);this.each(function(aM,aJ){var aL=a(aJ);var aK=new s(aL,aH,aG);aL.data("fullCalendar",aK);aK.render()});return this};function an(aF){a.extend(true,E,aF)}function s(aP,ba,aT){var bn=this;bn.options=ba;bn.render=be;bn.destroy=aO;bn.refetchEvents=bd;bn.reportEvents=bh;bn.reportEventChange=bg;bn.rerenderEvents=bi;bn.changeView=aK;bn.select=bk;bn.unselect=br;bn.prev=bb;bn.next=a7;bn.prevYear=bc;bn.nextYear=a8;bn.today=bp;bn.gotoDate=aX;bn.incrementDate=a1;bn.formatDate=function(bx,bw){return N(bx,bw,ba)};bn.formatDates=function(by,bw,bx){return O(by,bw,bx,ba)};bn.getDate=aV;bn.getView=aW;bn.option=a9;bn.trigger=bq;H.call(bn,ba,aT);var a3=bn.isFetchNeeded;var aU=bn.fetchEvents;var aG=aP[0];var aY;var aZ;var aL;var bo;var aM;var bu={};var aQ;var bm;var aH;var bj=0;var a0=0;var aN=new Date();var aS=[];var aF;ar(aN,ba.year,ba.month,ba.date);function be(bw){if(!aL){a2()}else{aJ();a6();a5();bf(bw)}}function a2(){bo=ba.theme?"ui":"fc";aP.addClass("fc");if(ba.isRTL){aP.addClass("fc-rtl")}if(ba.theme){aP.addClass("ui-widget")}aL=a("<div class='fc-content' style='position:relative'/>").prependTo(aP);aY=new R(bn,ba);aZ=aY.render();if(aZ){aP.prepend(aZ)}aK(ba.defaultView);a(window).resize(bv);if(!aI()){a4()}}function a4(){setTimeout(function(){if(!aM.start&&aI()){bf()}},0)}function aO(){a(window).unbind("resize",bv);aY.destroy();aL.remove();aP.removeClass("fc fc-rtl ui-widget")}function aR(){return aG.offsetWidth!==0}function aI(){return a("body")[0].offsetWidth!==0}function aK(bx){if(!aM||bx!=aM.name){a0++;br();var by=aM;var bw;if(by){(by.beforeHide||ad)();ao(aL,aL.height());by.element.hide()}else{ao(aL,1)}aL.css("overflow","hidden");aM=bu[bx];if(aM){aM.element.show()}else{aM=bu[bx]=new K[bx](bw=aH=a("<div class='fc-view fc-view-"+bx+"' style='position:absolute'/>").appendTo(aL),bn)}if(by){aY.deactivateButton(by.name)}aY.activateButton(bx);bf();aL.css("overflow","");if(by){ao(aL,1)}if(!bw){(aM.afterShow||ad)()}a0--}}function bf(bx){if(aR()){a0++;br();if(bm===ax){aJ()}var bw=false;if(!aM.start||bx||aN<aM.start||aN>=aM.end){aM.render(aN,bx||0);bl(true);bw=true}else{if(aM.sizeDirty){aM.clearEvents();bl();bw=true}else{if(aM.eventsDirty){aM.clearEvents();bw=true}}}aM.sizeDirty=false;aM.eventsDirty=false;bs(bw);aQ=aP.outerWidth();aY.updateTitle(aM.title);var by=new Date();if(by>=aM.start&&by<aM.end){aY.disableButton("today")}else{aY.enableButton("today")}a0--;aM.trigger("viewDisplay",aG)}}function bt(){a6();if(aR()){aJ();bl();br();aM.clearEvents();aM.renderEvents(aS);aM.sizeDirty=false}}function a6(){a.each(bu,function(bw,bx){bx.sizeDirty=true})}function aJ(){if(ba.contentHeight){bm=ba.contentHeight}else{if(ba.height){bm=ba.height-(aZ?aZ.height():0)-aC(aL)}else{bm=Math.round(aL.width()/Math.max(ba.aspectRatio,0.5))}}}function bl(bw){a0++;aM.setHeight(bm,bw);if(aH){aH.css("position","relative");aH=null}aM.setWidth(aL.width(),bw);a0--}function bv(){if(!a0){if(aM.start){var bw=++bj;setTimeout(function(){if(bw==bj&&!a0&&aR()){if(aQ!=(aQ=aP.outerWidth())){a0++;bt();aM.trigger("windowResize",aG);a0--}}},200)}else{a4()}}}function bs(bw){if(!ba.lazyFetching||a3(aM.visStart,aM.visEnd)){bd()}else{if(bw){bi()}}}function bd(){aU(aM.visStart,aM.visEnd)}function bh(bw){aS=bw;bi()}function bg(bw){bi(bw)}function bi(bw){a5();if(aR()){aM.clearEvents();aM.renderEvents(aS,bw);aM.eventsDirty=false}}function a5(){a.each(bu,function(bw,bx){bx.eventsDirty=true})}function bk(by,bx,bw){aM.select(by,bx,bw===ax?true:bw)}function br(){if(aM){aM.unselect()}}function bb(){bf(-1)}function a7(){bf(1)}function bc(){g(aN,-1);bf()}function a8(){g(aN,1);bf()}function bp(){aN=new Date();bf()}function aX(by,bx,bw){if(by instanceof Date){aN=u(by)}else{ar(aN,by,bx,bw)}bf()}function a1(by,bx,bw){if(by!==ax){g(aN,by)}if(bx!==ax){f(aN,bx)}if(bw!==ax){d(aN,bw)}bf()}function aV(){return u(aN)}function aW(){return aM}function a9(bw,bx){if(bx===ax){return ba[bw]}if(bw=="height"||bw=="contentHeight"||bw=="aspectRatio"){ba[bw]=bx;bt()}}function bq(bw,bx){if(ba[bw]){return ba[bw].apply(bx||aG,Array.prototype.slice.call(arguments,2))}}if(ba.droppable){a(document).bind("dragstart",function(bz,bA){var bw=bz.target;var by=a(bw);if(!by.parents(".fc").length){var bx=ba.dropAccept;if(a.isFunction(bx)?bx.call(bw,by):by.is(bx)){aF=bw;aM.dragStart(aF,bz,bA)}}}).bind("dragstop",function(bw,bx){if(aF){aM.dragStop(aF,bw,bx);aF=null}})}}function R(aG,aM){var aP=this;aP.render=aN;aP.destroy=aI;aP.updateTitle=aR;aP.activateButton=aF;aP.deactivateButton=aH;aP.disableButton=aJ;aP.enableButton=aL;var aK=a([]);var aQ;function aN(){aQ=aM.theme?"ui":"fc";var aS=aM.header;if(aS){aK=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(aO("left")).append(aO("center")).append(aO("right")));return aK}}function aI(){aK.remove()}function aO(aU){var aT=a("<td class='fc-header-"+aU+"'/>");var aS=aM.header[aU];if(aS){a.each(aS.split(" "),function(aV){if(aV>0){aT.append("<span class='fc-header-space'/>")}var aW;a.each(this.split(","),function(a1,aZ){if(aZ=="title"){aT.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");if(aW){aW.addClass(aQ+"-corner-right")}aW=null}else{var aY;if(aG[aZ]){aY=aG[aZ]}else{if(K[aZ]){aY=function(){aX.removeClass(aQ+"-state-hover");aG.changeView(aZ)}}}if(aY){var a0=aM.theme?av(aM.buttonIcons,aZ):null;var a2=av(aM.buttonText,aZ);var aX=a("<span class='fc-button fc-button-"+aZ+" "+aQ+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(a0?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+a0+"'/></span>":a2)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(aX){aX.click(function(a3){if(!aX.hasClass(aQ+"-state-disabled")){aY();aM.buttonClick(a3)}}).mousedown(function(){aX.not("."+aQ+"-state-active").not("."+aQ+"-state-disabled").addClass(aQ+"-state-down")}).mouseup(function(){aX.removeClass(aQ+"-state-down")}).hover(function(){aX.not("."+aQ+"-state-active").not("."+aQ+"-state-disabled").addClass(aQ+"-state-hover")},function(){aX.removeClass(aQ+"-state-hover").removeClass(aQ+"-state-down")}).appendTo(aT);if(!aW){aX.addClass(aQ+"-corner-left")}aW=aX}}}});if(aW){aW.addClass(aQ+"-corner-right")}})}return aT}function aR(aS){aK.find("h2").html(aS)}function aF(aS){aK.find("span.fc-button-"+aS).addClass(aQ+"-state-active")}function aH(aS){aK.find("span.fc-button-"+aS).removeClass(aQ+"-state-active")}function aJ(aS){aK.find("span.fc-button-"+aS).addClass(aQ+"-state-disabled")}function aL(aS){aK.find("span.fc-button-"+aS).removeClass(aQ+"-state-disabled")}}J.sourceNormalizers=[];J.sourceFetchers=[];var l={dataType:"json",cache:false};var G=1;function H(aW,aH){var a8=this;a8.isFetchNeeded=aR;a8.fetchEvents=aM;a8.addEventSource=aI;a8.removeEventSource=a3;a8.updateEvent=ba;a8.renderEvent=a4;a8.removeEvents=a2;a8.clientEvents=aK;a8.normalizeEvent=aU;var a9=a8.trigger;var aP=a8.getView;var a5=a8.reportEvents;var a7={events:[]};var a6=[a7];var a1,a0;var aL=0;var aX=0;var aT=0;var aJ=[];for(var aQ=0;aQ<aH.length;aQ++){aF(aH[aQ])}function aR(bc,bb){return !a1||bc<a1||bb>a0}function aM(bf,bb){a1=bf;a0=bb;aJ=[];var bc=++aL;var be=a6.length;aX=be;for(var bd=0;bd<be;bd++){aN(a6[bd],bc)}}function aN(bc,bb){aG(bc,function(bd){if(bb==aL){if(bd){for(var be=0;be<bd.length;be++){bd[be].source=bc;aU(bd[be])}aJ=aJ.concat(bd)}aX--;if(!aX){a5(aJ)}}})}function aG(bk,bb){var bi;var bh=J.sourceFetchers;var bj;for(bi=0;bi<bh.length;bi++){bj=bh[bi](bk,a1,a0,bb);if(bj===true){return}else{if(typeof bj=="object"){aG(bj,bb);return}}}var bg=bk.events;if(bg){if(a.isFunction(bg)){aZ();bg(u(a1),u(a0),function(bo){bb(bo);aY()})}else{if(a.isArray(bg)){bb(bg)}else{bb()}}}else{var bn=bk.url;if(bn){var bm=bk.success;var bf=bk.error;var bc=bk.complete;var bd=a.extend({},bk.data||{});var bl=L(bk.startParam,aW.startParam);var be=L(bk.endParam,aW.endParam);if(bl){bd[bl]=Math.round(+a1/1000)}if(be){bd[be]=Math.round(+a0/1000)}aZ();a.ajax(a.extend({},l,bk,{data:bd,success:function(bo){bo=bo||[];var bp=m(bm,this,arguments);if(a.isArray(bp)){bo=bp}bb(bo)},error:function(){m(bf,this,arguments);bb()},complete:function(){m(bc,this,arguments);aY()}}))}else{bb()}}}function aI(bb){bb=aF(bb);if(bb){aX++;aN(bb,aL)}}function aF(bb){if(a.isFunction(bb)||a.isArray(bb)){bb={events:bb}}else{if(typeof bb=="string"){bb={url:bb}}}if(typeof bb=="object"){aV(bb);a6.push(bb);return bb}}function a3(bb){a6=a.grep(a6,function(bc){return !aS(bc,bb)});aJ=a.grep(aJ,function(bc){return !aS(bc.source,bb)});a5(aJ)}function ba(be){var bf,bg=aJ.length,bc,bb=aP().defaultEventEnd,bh=be.start-be._start,bd=be.end?(be.end-(be._end||bb(be))):0;for(bf=0;bf<bg;bf++){bc=aJ[bf];if(bc._id==be._id&&bc!=be){bc.start=new Date(+bc.start+bh);if(be.end){if(bc.end){bc.end=new Date(+bc.end+bd)}else{bc.end=new Date(+bb(bc)+bd)}}else{bc.end=null}bc.title=be.title;bc.url=be.url;bc.allDay=be.allDay;bc.className=be.className;bc.editable=be.editable;bc.color=be.color;bc.backgroudColor=be.backgroudColor;bc.borderColor=be.borderColor;bc.textColor=be.textColor;aU(bc)}}aU(be);a5(aJ)}function a4(bb,bc){aU(bb);if(!bb.source){if(bc){a7.events.push(bb);bb.source=a7}aJ.push(bb)}a5(aJ)}function a2(bb){if(!bb){aJ=[];for(var bc=0;bc<a6.length;bc++){if(a.isArray(a6[bc].events)){a6[bc].events=[]}}}else{if(!a.isFunction(bb)){var bd=bb+"";bb=function(be){return be._id==bd}}aJ=a.grep(aJ,bb,true);for(var bc=0;bc<a6.length;bc++){if(a.isArray(a6[bc].events)){a6[bc].events=a.grep(a6[bc].events,bb,true)}}}a5(aJ)}function aK(bb){if(a.isFunction(bb)){return a.grep(aJ,bb)}else{if(bb){bb+="";return a.grep(aJ,function(bc){return bc._id==bb})}}return aJ}function aZ(){if(!aT++){a9("loading",null,true)}}function aY(){if(!--aT){a9("loading",null,false)}}function aU(bb){var bd=bb.source||{};var bc=L(bd.ignoreTimezone,aW.ignoreTimezone);bb._id=bb._id||(bb.id===ax?"_fc"+G++:bb.id+"");if(bb.date){if(!bb.start){bb.start=bb.date}delete bb.date}bb._start=u(bb.start=af(bb.start,bc));bb.end=af(bb.end,bc);if(bb.end&&bb.end<=bb.start){bb.end=null}bb._end=bb.end?u(bb.end):null;if(bb.allDay===ax){bb.allDay=L(bd.allDayDefault,aW.allDayDefault)}if(bb.className){if(typeof bb.className=="string"){bb.className=bb.className.split(/\s+/)}}else{bb.className=[]}}function aV(bd){if(bd.className){if(typeof bd.className=="string"){bd.className=bd.className.split(/\s+/)}}else{bd.className=[]}var bc=J.sourceNormalizers;for(var bb=0;bb<bc.length;bb++){bc[bb](bd)}}function aS(bb,bc){return bb&&bc&&aO(bb)==aO(bc)}function aO(bb){return((typeof bb=="object")?(bb.events||bb.url):"")||bb}}J.addDays=d;J.cloneDate=u;J.parseDate=af;J.parseISO8601=ag;J.parseTime=ah;J.formatDate=N;J.formatDates=O;var D=["sun","mon","tue","wed","thu","fri","sat"],A=86400000,U=3600000,ab=60000;function g(aF,aH,aG){aF.setFullYear(aF.getFullYear()+aH);if(!aG){t(aF)}return aF}function f(aG,aJ,aH){if(+aG){var aI=aG.getMonth()+aJ,aF=u(aG);aF.setDate(1);aF.setMonth(aI);aG.setMonth(aI);if(!aH){t(aG)}while(aG.getMonth()!=aF.getMonth()){aG.setDate(aG.getDate()+(aG<aF?1:-1))}}return aG}function d(aG,aJ,aI){if(+aG){var aH=aG.getDate()+aJ,aF=u(aG);aF.setHours(9);aF.setDate(aH);aG.setDate(aH);if(!aI){t(aG)}M(aG,aF)}return aG}function M(aG,aF){if(+aG){while(aG.getDate()!=aF.getDate()){aG.setTime(+aG+(aG<aF?1:-1)*U)}}}function e(aF,aG){aF.setMinutes(aF.getMinutes()+aG);return aF}function t(aF){aF.setHours(0);aF.setMinutes(0);aF.setSeconds(0);aF.setMilliseconds(0);return aF}function u(aF,aG){if(aG){return t(new Date(+aF))}return new Date(+aF)}function aD(){var aG=0,aF;do{aF=new Date(1970,aG++,1)}while(aF.getHours());return aF}function at(aF,aH,aG){aH=aH||1;while(!aF.getDay()||(aG&&aF.getDay()==1||!aG&&aF.getDay()==6)){d(aF,aH)}return aF}function B(aF,aG){return Math.round((u(aF,true)-u(aG,true))/A)}function ar(aG,aI,aH,aF){if(aI!==ax&&aI!=aG.getFullYear()){aG.setDate(1);aG.setMonth(0);aG.setFullYear(aI)}if(aH!==ax&&aH!=aG.getMonth()){aG.setDate(1);aG.setMonth(aH)}if(aF!==ax){aG.setDate(aF)}}function af(aG,aF){if(typeof aG=="object"){return aG}if(typeof aG=="number"){return new Date(aG*1000)}if(typeof aG=="string"){if(aG.match(/^\d+(\.\d+)?$/)){return new Date(parseFloat(aG)*1000)}if(aF===ax){aF=true}return ag(aG,aF)||(aG?new Date(aG):null)}return null}function ag(aK,aH){var aI=aK.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!aI){return null}var aG=new Date(aI[1],0,1);if(aH||!aI[13]){var aF=new Date(aI[1],0,1,9,0);if(aI[3]){aG.setMonth(aI[3]-1);aF.setMonth(aI[3]-1)}if(aI[5]){aG.setDate(aI[5]);aF.setDate(aI[5])}M(aG,aF);if(aI[7]){aG.setHours(aI[7])}if(aI[8]){aG.setMinutes(aI[8])}if(aI[10]){aG.setSeconds(aI[10])}if(aI[12]){aG.setMilliseconds(Number("0."+aI[12])*1000)}M(aG,aF)}else{aG.setUTCFullYear(aI[1],aI[3]?aI[3]-1:0,aI[5]||1);aG.setUTCHours(aI[7]||0,aI[8]||0,aI[10]||0,aI[12]?Number("0."+aI[12])*1000:0);if(aI[14]){var aJ=Number(aI[16])*60+(aI[18]?Number(aI[18]):0);aJ*=aI[15]=="-"?1:-1;aG=new Date(+aG+(aJ*60*1000))}}return aG}function ah(aH){if(typeof aH=="number"){return aH*60}if(typeof aH=="object"){return aH.getHours()*60+aH.getMinutes()}var aG=aH.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(aG){var aF=parseInt(aG[1],10);if(aG[3]){aF%=12;if(aG[3].toLowerCase().charAt(0)=="p"){aF+=12}}return aF*60+(aG[2]?parseInt(aG[2],10):0)}}function N(aF,aG,aH){return O(aF,null,aG,aH)}function O(aH,aI,aJ,aO){aO=aO||E;var aG=aH,aP=aI,aL,aN=aJ.length,aF,aM,aK,aQ="";for(aL=0;aL<aN;aL++){aF=aJ.charAt(aL);if(aF=="'"){for(aM=aL+1;aM<aN;aM++){if(aJ.charAt(aM)=="'"){if(aG){if(aM==aL+1){aQ+="'"}else{aQ+=aJ.substring(aL+1,aM)}aL=aM}break}}}else{if(aF=="("){for(aM=aL+1;aM<aN;aM++){if(aJ.charAt(aM)==")"){var aS=N(aG,aJ.substring(aL+1,aM),aO);if(parseInt(aS.replace(/\D/,""),10)){aQ+=aS}aL=aM;break}}}else{if(aF=="["){for(aM=aL+1;aM<aN;aM++){if(aJ.charAt(aM)=="]"){var aR=aJ.substring(aL+1,aM);var aS=N(aG,aR,aO);if(aS!=N(aP,aR,aO)){aQ+=aS}aL=aM;break}}}else{if(aF=="{"){aG=aI;aP=aH}else{if(aF=="}"){aG=aH;aP=aI}else{for(aM=aN;aM>aL;aM--){if(aK=z[aJ.substring(aL,aM)]){if(aG){aQ+=aK(aG,aO)}aL=aM-1;break}}if(aM==aL){if(aG){aQ+=aF}}}}}}}}return aQ}var z={s:function(aF){return aF.getSeconds()},ss:function(aF){return aE(aF.getSeconds())},m:function(aF){return aF.getMinutes()},mm:function(aF){return aE(aF.getMinutes())},h:function(aF){return aF.getHours()%12||12},hh:function(aF){return aE(aF.getHours()%12||12)},H:function(aF){return aF.getHours()},HH:function(aF){return aE(aF.getHours())},d:function(aF){return aF.getDate()},dd:function(aF){return aE(aF.getDate())},ddd:function(aF,aG){return aG.dayNamesShort[aF.getDay()]},dddd:function(aF,aG){return aG.dayNames[aF.getDay()]},M:function(aF){return aF.getMonth()+1},MM:function(aF){return aE(aF.getMonth()+1)},MMM:function(aF,aG){return aG.monthNamesShort[aF.getMonth()]},MMMM:function(aF,aG){return aG.monthNames[aF.getMonth()]},yy:function(aF){return(aF.getFullYear()+"").substring(2)},yyyy:function(aF){return aF.getFullYear()},t:function(aF){return aF.getHours()<12?"a":"p"},tt:function(aF){return aF.getHours()<12?"am":"pm"},T:function(aF){return aF.getHours()<12?"A":"P"},TT:function(aF){return aF.getHours()<12?"AM":"PM"},u:function(aF){return N(aF,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(aF){var aG=aF.getDate();if(aG>10&&aG<20){return"th"}return["st","nd","rd"][aG%10-1]||"th"}};J.applyAll=m;function I(aF){if(aF.end){return b(aF.end,aF.allDay)}else{return d(u(aF.start),1)}}function b(aG,aF){aG=u(aG);return aF||aG.getHours()||aG.getMinutes()?d(aG,1):t(aG)}function aj(aF,aG){return(aG.msLength-aF.msLength)*100+(aF.event.start-aG.event.start)}function ak(aF,aG){return aF.end>aG.start&&aF.start<aG.end}function au(aI,aS,aR,aF){var aP=[],aK,aN=aI.length,aG,aJ,aH,aQ,aO,aM,aL;for(aK=0;aK<aN;aK++){aG=aI[aK];aJ=aG.start;aH=aS[aK];if(aH>aR&&aJ<aF){if(aJ<aR){aQ=u(aR);aM=false}else{aQ=aJ;aM=true}if(aH>aF){aO=u(aF);aL=false}else{aO=aH;aL=true}aP.push({event:aG,start:aQ,end:aO,isStart:aM,isEnd:aL,msLength:aO-aQ})}}return aP.sort(aj)}function aw(aM){var aK=[],aG,aJ=aM.length,aL,aH,aF,aI;for(aG=0;aG<aJ;aG++){aL=aM[aG];aH=0;while(true){aF=false;if(aK[aH]){for(aI=0;aI<aK[aH].length;aI++){if(ak(aK[aH][aI],aL)){aF=true;break}}}if(aF){aH++}else{break}}if(aK[aH]){aK[aH].push(aL)}else{aK[aH]=[aL]}}return aK}function Z(aG,aH,aF){aG.unbind("mouseover").mouseover(function(aJ){var aL=aJ.target,aI,aK,aM;while(aL!=this){aI=aL;aL=aL.parentNode}if((aK=aI._fci)!==ax){aI._fci=ax;aM=aH[aK];aF(aM.event,aM.element,aM);a(aJ.target).trigger(aJ)}aJ.stopPropagation()})}function aq(aG,aJ,aI){for(var aH=0,aF;aH<aG.length;aH++){aF=a(aG[aH]);aF.width(Math.max(0,aJ-X(aF,aI)))}}function ap(aG,aH,aJ){for(var aI=0,aF;aI<aG.length;aI++){aF=a(aG[aI]);aF.height(Math.max(0,aH-aC(aF,aJ)))}}function X(aF,aG){return W(aF)+Q(aF)+(aG?S(aF):0)}function W(aF){return(parseFloat(a.css(aF[0],"paddingLeft",true))||0)+(parseFloat(a.css(aF[0],"paddingRight",true))||0)}function S(aF){return(parseFloat(a.css(aF[0],"marginLeft",true))||0)+(parseFloat(a.css(aF[0],"marginRight",true))||0)}function Q(aF){return(parseFloat(a.css(aF[0],"borderLeftWidth",true))||0)+(parseFloat(a.css(aF[0],"borderRightWidth",true))||0)}function aC(aF,aG){return aB(aF)+ay(aF)+(aG?aA(aF):0)}function aB(aF){return(parseFloat(a.css(aF[0],"paddingTop",true))||0)+(parseFloat(a.css(aF[0],"paddingBottom",true))||0)}function aA(aF){return(parseFloat(a.css(aF[0],"marginTop",true))||0)+(parseFloat(a.css(aF[0],"marginBottom",true))||0)}function ay(aF){return(parseFloat(a.css(aF[0],"borderTopWidth",true))||0)+(parseFloat(a.css(aF[0],"borderBottomWidth",true))||0)}function ao(aF,aG){aG=(typeof aG=="number"?aG+"px":aG);aF.each(function(aI,aH){aH.style.cssText+=";min-height:"+aG+";_height:"+aG})}function ad(){}function v(aF,aG){return aF-aG}function n(aF){return Math.max.apply(Math,aF)}function aE(aF){return(aF<10?"0":"")+aF}function av(aH,aG){if(aH[aG]!==ax){return aH[aG]}var aI=aG.split(/(?=[A-Z])/),aF=aI.length-1,aJ;for(;aF>=0;aF--){aJ=aH[aI[aF].toLowerCase()];if(aJ!==ax){return aJ}}return aH[""]}function Y(aF){return aF.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function y(aF){return aF.id+"/"+aF.className+"/"+aF.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function F(aF){aF.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function aa(aF){aF.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function am(aF,aG){aF.each(function(aI,aH){aH.className=aH.className.replace(/^fc-\w*/,"fc-"+D[aG.getDay()])})}function P(aH,aJ){var aL=aH.source||{};var aI=aH.color;var aM=aL.color;var aK=aJ("eventColor");var aF=aH.backgroundColor||aI||aL.backgroundColor||aM||aJ("eventBackgroundColor")||aK;var aG=aH.borderColor||aI||aL.borderColor||aM||aJ("eventBorderColor")||aK;var aO=aH.textColor||aL.textColor||aJ("eventTextColor");var aN=[];if(aF){aN.push("background-color:"+aF)}if(aG){aN.push("border-color:"+aG)}if(aO){aN.push("color:"+aO)}return aN.join(";")}function m(aG,aJ,aF){if(a.isFunction(aG)){aG=[aG]}if(aG){var aH;var aI;for(aH=0;aH<aG.length;aH++){aI=aG[aH].apply(aJ,aF)||aI}return aI}}function L(){for(var aF=0;aF<arguments.length;aF++){if(arguments[aF]!==ax){return arguments[aF]}}}K.month=ac;function ac(aG,aF){var aL=this;aL.render=aJ;q.call(aL,aG,aF,"month");var aI=aL.opt;var aK=aL.renderBasic;var aH=aF.formatDate;function aJ(aM,aN){if(aN){f(aM,aN);aM.setDate(1)}var aS=u(aM,true);aS.setDate(1);var aO=f(u(aS),1);var aU=u(aS);var aT=u(aO);var aP=aI("firstDay");var aQ=aI("weekends")?0:1;if(aQ){at(aU);at(aT,-1,true)}d(aU,-((aU.getDay()-Math.max(aP,aQ)+7)%7));d(aT,(7-aT.getDay()+Math.max(aP,aQ))%7);var aR=Math.round((aT-aU)/(A*7));if(aI("weekMode")=="fixed"){d(aT,(6-aR)*7);aR=6}aL.title=aH(aS,aI("titleFormat"));aL.start=aS;aL.end=aO;aL.visStart=aU;aL.visEnd=aT;aK(6,aR,aQ?5:7,true)}}K.basicWeek=r;function r(aG,aF){var aL=this;aL.render=aJ;q.call(aL,aG,aF,"basicWeek");var aI=aL.opt;var aK=aL.renderBasic;var aH=aF.formatDates;function aJ(aM,aN){if(aN){d(aM,aN*7)}var aP=d(u(aM),-((aM.getDay()-aI("firstDay")+7)%7));var aO=d(u(aP),7);var aR=u(aP);var aQ=u(aO);var aS=aI("weekends");if(!aS){at(aR);at(aQ,-1,true)}aL.title=aH(aR,d(u(aQ),-1),aI("titleFormat"));aL.start=aP;aL.end=aO;aL.visStart=aR;aL.visEnd=aQ;aK(1,1,aS?7:5,false)}}K.basicDay=o;function o(aG,aF){var aL=this;aL.render=aJ;q.call(aL,aG,aF,"basicDay");var aI=aL.opt;var aK=aL.renderBasic;var aH=aF.formatDate;function aJ(aM,aN){if(aN){d(aM,aN);if(!aI("weekends")){at(aM,aN<0?-1:1)}}aL.title=aH(aM,aI("titleFormat"));aL.start=aL.visStart=u(aM,true);aL.end=aL.visEnd=d(u(aL.start),1);aK(1,1,1,false)}}an({weekMode:"fixed"});function q(bc,aO,bB){var bv=this;bv.renderBasic=bl;bv.setHeight=bt;bv.setWidth=bu;bv.renderDayOverlay=bn;bv.defaultSelectionEnd=a7;bv.renderSelection=bp;bv.clearSelection=aS;bv.reportDayClick=bq;bv.dragStart=ba;bv.dragStop=bb;bv.defaultEventEnd=a6;bv.getHoverListener=function(){return bh};bv.colContentLeft=aU;bv.colContentRight=aW;bv.dayOfWeekCol=a3;bv.dateCell=a0;bv.cellDate=aP;bv.cellIsAllDay=function(){return true};bv.allDayRow=aH;bv.allDayBounds=aG;bv.getRowCnt=function(){return br};bv.getColCnt=function(){return aT};bv.getColWidth=function(){return aY};bv.getDaySegmentContainer=function(){return a4};az.call(bv,bc,aO,bB);ae.call(bv);al.call(bv);p.call(bv,aO);var bk=bv.opt;var bx=bv.trigger;var aQ=bv.clearEvents;var bo=bv.renderOverlay;var aR=bv.clearOverlays;var a5=bv.daySelectionMousedown;var be=aO.formatDate;var bf;var bg;var aI;var aM;var aJ;var aL;var aK;var a4;var bC;var bA;var aY;var br,aT;var aZ;var bh;var aV;var bs,a8,a9;var bd;var bj;var bw;var aX;F(bc.addClass("fc-grid"));function bl(bF,bG,bD,bH){br=bG;aT=bD;bz();var bE=!aI;if(bE){aN(bF,bH)}else{aQ()}by(bE)}function bz(){bs=bk("isRTL");if(bs){a8=-1;a9=aT-1}else{a8=1;a9=0}bd=bk("firstDay");bj=bk("weekends")?0:1;bw=bk("theme")?"ui":"fc";aX=bk("columnFormat")}function aN(bH,bJ){var bI;var bE=bw+"-widget-header";var bD=bw+"-widget-content";var bF,bG;var bK;bI="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(bF=0;bF<aT;bF++){bI+="<th class='fc- "+bE+"'/>"}bI+="</tr></thead><tbody>";for(bF=0;bF<bH;bF++){bI+="<tr class='fc-week"+bF+"'>";for(bG=0;bG<aT;bG++){bI+="<td class='fc- "+bD+" fc-day"+(bF*aT+bG)+"'><div>"+(bJ?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}bI+="</tr>"}bI+="</tbody></table>";bK=a(bI).appendTo(bc);bf=bK.find("thead");bg=bf.find("th");aI=bK.find("tbody");aM=aI.find("tr");aJ=aI.find("td");aL=aJ.filter(":first-child");aK=aM.eq(0).find("div.fc-day-content div");aa(bf.add(bf.find("tr")));aa(aM);aM.eq(0).addClass("fc-first");a1(aJ);a4=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bc)}function by(bG){var bF=bG||br==1;var bI=bv.start.getMonth();var bK=t(new Date());var bD;var bE;var bJ;if(bF){bg.each(function(bM,bL){bD=a(bL);bE=bi(bM);bD.html(be(bE,aX));am(bD,bE)})}var bH=_.map(aO.options.highlightDays,function(bL){return +bL});aJ.each(function(bM,bL){bD=a(bL);bE=bi(bM);if(bE.getMonth()==bI){bD.removeClass("fc-other-month")}else{bD.addClass("fc-other-month")}if(+bE==+bK){bD.addClass(bw+"-state-highlight fc-today")}else{bD.removeClass(bw+"-state-highlight fc-today")}if(_.contains(bH,+bE)){bD.addClass("fc-special-hl")}else{bD.removeClass("fc-special-hl")}bD.find("div.fc-day-number").text(bE.getDate());if(bF){am(bD,bE)}});aM.each(function(bM,bL){bJ=a(bL);if(bM<br){bJ.show();if(bM==br-1){bJ.addClass("fc-last")}else{bJ.removeClass("fc-last")}}else{bJ.hide()}})}function bt(bF){bA=bF;var bD=bA-bf.height();var bG;var bH;var bE;if(bk("weekMode")=="variable"){bG=bH=Math.floor(bD/(br==1?2:6))}else{bG=Math.floor(bD/br);bH=bD-bG*(br-1)}aL.each(function(bJ,bI){if(bJ<br){bE=a(bI);ao(bE.find("> div"),(bJ==br-1?bH:bG)-aC(bE))}})}function bu(bD){bC=bD;aV.clear();aY=Math.floor(bC/aT);aq(bg.slice(0,-1),aY)}function a1(bD){bD.click(a2).mousedown(a5)}function a2(bE){if(!bk("selectable")){var bF=parseInt(this.className.match(/fc\-day(\d+)/)[1]);var bD=bi(bF);bx("dayClick",this,bD,true,bE)}}function bn(bH,bG,bI){if(bI){aZ.build()}var bK=u(bv.visStart);var bJ=d(u(bK),aT);for(var bF=0;bF<br;bF++){var bM=new Date(Math.max(bK,bH));var bL=new Date(Math.min(bJ,bG));if(bM<bL){var bE,bD;if(bs){bE=B(bL,bK)*a8+a9+1;bD=B(bM,bK)*a8+a9+1}else{bE=B(bM,bK);bD=B(bL,bK)}a1(bm(bF,bE,bF,bD-1))}d(bK,7);d(bJ,7)}}function bm(bG,bD,bH,bE){var bF=aZ.rect(bG,bD,bH,bE,bc);return bo(bF,bc)}function a7(bE,bD){return u(bE)}function bp(bF,bE,bD){bn(bF,d(u(bE),1),true)}function aS(){aR()}function bq(bG,bE,bH){var bF=a0(bG);var bD=aJ[bF.row*aT+bF.col];bx("dayClick",bD,bG,bE,bH)}function ba(bD,bE,bF){bh.start(function(bG){aR();if(bG){bm(bG.row,bG.col,bG.row,bG.col)}},bE)}function bb(bD,bG,bH){var bE=bh.stop();aR();if(bE){var bF=aP(bE);bx("drop",bD,bF,true,bG,bH)}}function a6(bD){return u(bD.start)}aZ=new w(function(bH,bD){var bE,bF,bG;bg.each(function(bJ,bI){bE=a(bI);bF=bE.offset().left;if(bJ){bG[1]=bF}bG=[bF];bD[bJ]=bG});bG[1]=bF+bE.outerWidth();aM.each(function(bJ,bI){if(bJ<br){bE=a(bI);bF=bE.offset().top;if(bJ){bG[1]=bF}bG=[bF];bH[bJ]=bG}});bG[1]=bF+bE.outerHeight()});bh=new V(aZ);aV=new T(function(bD){return aK.eq(bD)});function aU(bD){return aV.left(bD)}function aW(bD){return aV.right(bD)}function a0(bD){return{row:Math.floor(B(bD,bv.visStart)/7),col:a3(bD.getDay())}}function aP(bD){return aF(bD.row,bD.col)}function aF(bE,bD){return d(u(bv.visStart),bE*7+bD*a8+a9)}function bi(bD){return aF(Math.floor(bD/aT),bD%aT)}function a3(bD){return((bD-Math.max(bd,bj)+aT)%aT)*a8+a9}function aH(bD){return aM.eq(bD)}function aG(bD){return{left:0,right:bC}}}function p(aG){var a2=this;a2.calendar=aG;a2.renderEvents=aX;a2.compileDaySegs=aJ;a2.clearEvents=aH;a2.bindDaySeg=aF;C.call(a2);var aU=a2.opt;var a3=a2.trigger;var aS=a2.isEventDraggable;var aT=a2.isEventResizable;var aZ=a2.reportEvents;var aY=a2.reportEventClear;var aM=a2.eventElementHandlers;var a1=a2.showEvents;var aR=a2.hideEvents;var aL=a2.eventDrop;var aO=a2.getDaySegmentContainer;var aP=a2.getHoverListener;var aV=a2.renderDayOverlay;var aI=a2.clearOverlays;var aQ=a2.getRowCnt;var aN=a2.getColCnt;var aW=a2.renderDaySegs;var a0=a2.resizableDayEvent;function aX(a4,a5){aZ(a4);aW(aJ(a4),a5)}function aH(){aY();aO().empty()}function aJ(a7){var bd=aQ(),a4=aN(),a5=u(a2.visStart),a6=d(u(a5),a4),bg=a.map(a7,I),a8,bc,a9,bb,ba,be,bf=[];for(a8=0;a8<bd;a8++){bc=aw(au(a7,bg,a5,a6));for(a9=0;a9<bc.length;a9++){bb=bc[a9];for(ba=0;ba<bb.length;ba++){be=bb[ba];be.row=a8;be.level=a9;bf.push(be)}}d(a5,7);d(a6,7)}return bf}function aF(a4,a5,a6){if(aS(a4)){aK(a4,a5)}if(a6.isEnd&&aT(a4)){a0(a4,a5,a6)}aM(a4,a5)}function aK(a5,a6){var a7=aP();var a4;a6.draggable({zIndex:9,delay:50,opacity:aU("dragOpacity"),revertDuration:aU("dragRevertDuration"),start:function(a8,a9){a3("eventDragStart",a6,a5,a8,a9);aR(a5,a6);a7.start(function(ba,bc,bd,bb){a6.draggable("option","revert",!ba||!bd&&!bb);aI();if(ba){a4=bd*7+bb*(aU("isRTL")?-1:1);aV(d(u(a5.start),a4),d(I(a5),a4))}else{a4=0}},a8,"drag")},stop:function(a8,a9){a7.stop();aI();a3("eventDragStop",a6,a5,a8,a9);if(a4){aL(this,a5,a4,0,a5.allDay,a8,a9)}else{a6.css("filter","");a1(a5,a6)}}})}}K.agendaWeek=k;function k(aG,aF){var aL=this;aL.render=aJ;j.call(aL,aG,aF,"agendaWeek");var aI=aL.opt;var aK=aL.renderAgenda;var aH=aF.formatDates;function aJ(aM,aN){if(aN){d(aM,aN*7)}var aP=d(u(aM),-((aM.getDay()-aI("firstDay")+7)%7));var aO=d(u(aP),7);var aR=u(aP);var aQ=u(aO);var aS=aI("weekends");if(!aS){at(aR);at(aQ,-1,true)}aL.title=aH(aR,d(u(aQ),-1),aI("titleFormat"));aL.start=aP;aL.end=aO;aL.visStart=aR;aL.visEnd=aQ;aK(aS?7:5)}}K.agendaDay=h;function h(aG,aF){var aL=this;aL.render=aJ;j.call(aL,aG,aF,"agendaDay");var aI=aL.opt;var aK=aL.renderAgenda;var aH=aF.formatDate;function aJ(aM,aN){if(aN){d(aM,aN);if(!aI("weekends")){at(aM,aN<0?-1:1)}}var aP=u(aM,true);var aO=d(u(aP),1);aL.title=aH(aM,aI("titleFormat"));aL.start=aL.visStart=aP;aL.end=aL.visEnd=aO;aK(1)}}an({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});function j(bk,aN,b5){var bX=this;bX.renderAgenda=bv;bX.setWidth=bJ;bX.setHeight=bI;bX.beforeHide=aL;bX.afterShow=aF;bX.defaultEventEnd=be;bX.timePosition=bY;bX.dayOfWeekCol=ba;bX.dateCell=a1;bX.cellDate=aO;bX.cellIsAllDay=aP;bX.allDayRow=bn;bX.allDayBounds=aG;bX.getHoverListener=function(){return bq};bX.colContentLeft=aU;bX.colContentRight=aW;bX.getDaySegmentContainer=function(){return bb};bX.getSlotSegmentContainer=function(){return bS};bX.getMinMinute=function(){return bs};bX.getMaxMinute=function(){return br};bX.getBodyContent=function(){return bN};bX.getRowCnt=function(){return 1};bX.getColCnt=function(){return aT};bX.getColWidth=function(){return aZ};bX.getSlotHeight=function(){return bO};bX.defaultSelectionEnd=bf;bX.renderDayOverlay=bx;bX.renderSelection=bz;bX.clearSelection=aS;bX.reportDayClick=bC;bX.dragStart=bi;bX.dragStop=bj;az.call(bX,bk,aN,b5);ae.call(bX);al.call(bX);i.call(bX);var bu=bX.opt;var b0=bX.trigger;var aQ=bX.clearEvents;var by=bX.renderOverlay;var aR=bX.clearOverlays;var bD=bX.reportSelection;var b1=bX.unselect;var bc=bX.daySelectionMousedown;var bR=bX.slotSegHtml;var bm=aN.formatDate;var bd;var a8;var a9;var a3;var a5;var a4;var a6;var a7;var bP;var bb;var aI;var aH;var bQ;var bN;var bS;var bU;var bV;var aJ;var bo;var bH;var b6;var b4;var aK;var aZ;var bp;var bO;var bG;var aT;var bM;var a0;var bq;var aV;var bW={};var bZ;var bl;var bt;var bF,bg,bh;var bs,br;var aY;F(bk.addClass("fc-agenda"));function bv(b7){aT=b7;b3();if(!bd){aM()}else{aQ()}b2()}function b3(){bZ=bu("theme")?"ui":"fc";bt=bu("weekends")?0:1;bl=bu("firstDay");if(bF=bu("isRTL")){bg=-1;bh=aT-1}else{bg=1;bh=0}bs=ah(bu("minTime"));br=ah(bu("maxTime"));aY=bu("columnFormat")}function aM(){var b9=bZ+"-widget-header";var b7=bZ+"-widget-content";var cd;var ca;var b8;var cb;var cc;var ce=bu("slotMinutes")%15==0;cd="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b9+"'>&nbsp;</th>";for(ca=0;ca<aT;ca++){cd+="<th class='fc- fc-col"+ca+" "+b9+"'/>"}cd+="<th class='fc-agenda-gutter "+b9+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b9+"'>&nbsp;</th>";for(ca=0;ca<aT;ca++){cd+="<td class='fc- fc-col"+ca+" "+b7+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}cd+="<td class='fc-agenda-gutter "+b7+"'>&nbsp;</td></tr></tbody></table>";bd=a(cd).appendTo(bk);a8=bd.find("thead");a9=a8.find("th").slice(1,-1);a3=bd.find("tbody");a5=a3.find("td").slice(0,-1);a4=a5.find("div.fc-day-content div");a6=a5.eq(0);a7=a6.find("> div");aa(a8.add(a8.find("tr")));aa(a3.add(a3.find("tr")));aJ=a8.find("th:first");bo=bd.find(".fc-agenda-gutter");bP=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(bk);if(bu("allDaySlot")){bb=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bP);cd="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b9+" fc-agenda-axis'>"+bu("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b9+" fc-agenda-gutter'>&nbsp;</th></tr></table>";aI=a(cd).appendTo(bP);aH=aI.find("tr");a2(aH.find("td"));aJ=aJ.add(aI.find("th:first"));bo=bo.add(aI.find("th.fc-agenda-gutter"));bP.append("<div class='fc-agenda-divider "+b9+"'><div class='fc-agenda-divider-inner'/></div>")}else{bb=a([])}bQ=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(bP);bN=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bQ);bS=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bN);cd="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";b8=aD();cb=e(u(b8),br);e(b8,bs);bM=0;for(ca=0;b8<cb;ca++){cc=b8.getMinutes();cd+="<tr class='fc-slot"+ca+" "+(!cc?"":"fc-minor")+"'><th class='fc-agenda-axis "+b9+"'>"+((!ce||!cc)?bm(b8,bu("axisFormat")):"&nbsp;")+"</th><td class='"+b7+"'><div style='position:relative'>&nbsp;</div></td></tr>";e(b8,bu("slotMinutes"));bM++}cd+="</tbody></table>";bU=a(cd).appendTo(bN);bV=bU.find("div:first");bK(bU.find("td"));aJ=aJ.add(bU.find("th:first"))}function b2(){var ca;var b9;var b7;var b8;var cb=t(new Date());for(ca=0;ca<aT;ca++){b8=aX(ca);b9=a9.eq(ca);b9.html(bm(b8,aY));b7=a5.eq(ca);if(+b8==+cb){b7.addClass(bZ+"-state-highlight fc-today")}else{b7.removeClass(bZ+"-state-highlight fc-today")}am(b9.add(b7),b8)}}function bI(cb,b9){if(cb===ax){cb=b4}b4=cb;bW={};var ca=a3.position().top;var b7=bQ.position().top;var b8=Math.min(cb-ca,bU.height()+b7+1);a7.height(b8-aC(a6));bP.css("top",ca);bQ.height(b8-b7-1);bO=bV.height()+1;if(b9){bE()}}function bJ(b8){b6=b8;aV.clear();aK=0;aq(aJ.width("").each(function(ca,b9){aK=Math.max(aK,a(b9).outerWidth())}),aK);var b7=bQ[0].clientWidth;bp=bQ.width()-b7;if(bp){aq(bo,bp);bo.show().prev().removeClass("fc-last")}else{bo.hide().prev().addClass("fc-last")}aZ=Math.floor((b7-aK)/aT);aq(a9.slice(0,-1),aZ)}function bE(){var b7=aD();var b9=u(b7);b9.setHours(bu("firstHour"));var ca=bY(b7,b9)+1;function b8(){bQ.scrollTop(ca)}b8();setTimeout(b8,0)}function aL(){bG=bQ.scrollTop()}function aF(){bQ.scrollTop(bG)}function a2(b7){b7.click(bL).mousedown(bc)}function bK(b7){b7.click(bL).mousedown(bT)}function bL(b9){if(!bu("selectable")){var b7=Math.min(aT-1,Math.floor((b9.pageX-bd.offset().left-aK)/aZ));var b8=aX(b7);var cc=this.parentNode.className.match(/fc-slot(\d+)/);if(cc){var cb=parseInt(cc[1])*bu("slotMinutes");var ca=Math.floor(cb/60);b8.setHours(ca);b8.setMinutes(cb%60+bs);b0("dayClick",a5[b7],b8,false,b9)}else{b0("dayClick",a5[b7],b8,true,b9)}}}function bx(cb,b8,b9){if(b9){a0.build()}var cc=u(bX.visStart);var ca,b7;if(bF){ca=B(b8,cc)*bg+bh+1;b7=B(cb,cc)*bg+bh+1}else{ca=B(cb,cc);b7=B(b8,cc)}ca=Math.max(0,ca);b7=Math.min(aT,b7);if(ca<b7){a2(bw(0,ca,0,b7-1))}}function bw(ca,b7,cb,b8){var b9=a0.rect(ca,b7,cb,b8,bP);return by(b9,bP)}function bA(cd,cc){var ca=u(bX.visStart);var b9=d(u(ca),1);for(var cb=0;cb<aT;cb++){var cg=new Date(Math.max(ca,cd));var cf=new Date(Math.min(b9,cc));if(cg<cf){var b8=cb*bg+bh;var ce=a0.rect(0,b8,0,b8,bN);var ch=bY(ca,cg);var b7=bY(ca,cf);ce.top=ch;ce.height=b7-ch;bK(by(ce,bN))}d(ca,1);d(b9,1)}}a0=new w(function(cd,b7){var b9,cb,cc;a9.each(function(ci,ch){b9=a(ch);cb=b9.offset().left;if(ci){cc[1]=cb}cc=[cb];b7[ci]=cc});cc[1]=cb+b9.outerWidth();if(bu("allDaySlot")){b9=aH;cb=b9.offset().top;cd[0]=[cb,cb+b9.outerHeight()]}var cg=bN.offset().top;var cf=bQ.offset().top;var ce=cf+bQ.outerHeight();function b8(ch){return Math.max(cf,Math.min(ce,ch))}for(var ca=0;ca<bM;ca++){cd.push([b8(cg+bO*ca),b8(cg+bO*(ca+1))])}});bq=new V(a0);aV=new T(function(b7){return a4.eq(b7)});function aU(b7){return aV.left(b7)}function aW(b7){return aV.right(b7)}function a1(b7){return{row:Math.floor(B(b7,bX.visStart)/7),col:ba(b7.getDay())}}function aO(b7){var b8=aX(b7.col);var b9=b7.row;if(bu("allDaySlot")){b9--}if(b9>=0){e(b8,bs+b9*bu("slotMinutes"))}return b8}function aX(b7){return d(u(bX.visStart),b7*bg+bh)}function aP(b7){return bu("allDaySlot")&&!b7.row}function ba(b7){return((b7-Math.max(bl,bt)+aT)%aT)*bg+bh}function bY(b7,cc){b7=u(b7,true);if(cc<e(u(b7),bs)){return 0}if(cc>=e(u(b7),br)){return bU.height()}var ca=bu("slotMinutes"),b8=cc.getHours()*60+cc.getMinutes()-bs,b9=Math.floor(b8/ca),cb=bW[b9];if(cb===ax){cb=bW[b9]=bU.find("tr:eq("+b9+") td div")[0].offsetTop}return Math.max(0,Math.round(cb-1+bO*((b8%ca)/ca)))}function aG(){return{left:aK,right:b6-bp}}function bn(b7){return aH}function be(b7){var b8=u(b7.start);if(b7.allDay){return b8}return e(b8,bu("defaultEventMinutes"))}function bf(b8,b7){if(b7){return u(b8)}return e(u(b8),bu("slotMinutes"))}function bz(b9,b8,b7){if(b7){if(bu("allDaySlot")){bx(b9,d(u(b8),1),true)}}else{bB(b9,b8)}}function bB(cd,b9){var ca=bu("selectHelper");a0.build();if(ca){var b8=B(cd,bX.visStart)*bg+bh;if(b8>=0&&b8<aT){var cc=a0.rect(0,b8,0,b8,bN);var ce=bY(cd,cd);var b7=bY(cd,b9);if(b7>ce){cc.top=ce;cc.height=b7-ce;cc.left+=2;cc.width-=5;if(a.isFunction(ca)){var cb=ca(cd,b9);if(cb){cc.position="absolute";cc.zIndex=8;bH=a(cb).css(cc).appendTo(bN)}}else{cc.isStart=true;cc.isEnd=true;bH=a(bR({title:"",start:cd,end:b9,className:["fc-select-helper"],editable:false},cc));bH.css("opacity",bu("dragOpacity"))}if(bH){bK(bH);bN.append(bH);aq(bH,cc.width,true);ap(bH,cc.height,true)}}}}else{bA(cd,b9)}}function aS(){aR();if(bH){bH.remove();bH=null}}function bT(b8){if(b8.which==1&&bu("selectable")){b1(b8);var b7;bq.start(function(b9,cc){aS();if(b9&&b9.col==cc.col&&!aP(b9)){var ca=aO(cc);var cb=aO(b9);b7=[ca,e(u(ca),bu("slotMinutes")),cb,e(u(cb),bu("slotMinutes"))].sort(v);bB(b7[0],b7[3])}else{b7=null}},b8);a(document).one("mouseup",function(b9){bq.stop();if(b7){if(+b7[0]==+b7[1]){bC(b7[0],false,b9)}bD(b7[0],b7[3],false,b9)}})}}function bC(b8,b7,b9){b0("dayClick",a5[ba(b8.getDay())],b8,b7,b9)}function bi(b7,b8,b9){bq.start(function(ca){aR();if(ca){if(aP(ca)){bw(ca.row,ca.col,ca.row,ca.col)}else{var cb=aO(ca);var cc=e(u(cb),bu("defaultEventMinutes"));bA(cb,cc)}}},b8)}function bj(b7,b9,ca){var b8=bq.stop();aR();if(b8){b0("drop",b7,aO(b8),aP(b8),b9,ca)}}}function i(){var bm=this;bm.renderEvents=bb;bm.compileDaySegs=aM;bm.clearEvents=aI;bm.slotSegHtml=bl;bm.bindDaySeg=aF;C.call(bm);var a8=bm.opt;var bo=bm.trigger;var a6=bm.isEventDraggable;var a7=bm.isEventResizable;var aS=bm.eventEnd;var bf=bm.reportEvents;var bd=bm.reportEventClear;var aR=bm.eventElementHandlers;var bi=bm.setHeight;var aZ=bm.getDaySegmentContainer;var a4=bm.getSlotSegmentContainer;var a0=bm.getHoverListener;var a1=bm.getMaxMinute;var a2=bm.getMinMinute;var bn=bm.timePosition;var aK=bm.colContentLeft;var aL=bm.colContentRight;var ba=bm.renderDaySegs;var bg=bm.resizableDayEvent;var aX=bm.getColCnt;var aY=bm.getColWidth;var a3=bm.getSlotHeight;var aW=bm.getBodyContent;var be=bm.reportEventElement;var bj=bm.showEvents;var a5=bm.hideEvents;var aQ=bm.eventDrop;var aT=bm.eventResize;var a9=bm.renderDayOverlay;var aJ=bm.clearOverlays;var aH=bm.calendar;var aU=aH.formatDate;var aV=aH.formatDates;function bb(bq,bt){bf(bq);var br,bs=bq.length,bp=[],bu=[];for(br=0;br<bs;br++){if(bq[br].allDay){bp.push(bq[br])}else{bu.push(bq[br])}}if(a8("allDaySlot")){ba(aM(bp),bt);bi()}bc(aN(bu),bt)}function aI(){bd();aZ().empty();a4().empty()}function aM(bp){var bu=aw(au(bp,a.map(bp,I),bm.visStart,bm.visEnd)),bq,bt=bu.length,bs,br,bv,bw=[];for(bq=0;bq<bt;bq++){bs=bu[bq];for(br=0;br<bs.length;br++){bv=bs[br];bv.row=0;bv.level=bq;bw.push(bv)}}return bw}function aN(bs){var bq=aX(),by=a2(),bx=a1(),br=e(u(bm.visStart),by),bB=a.map(bs,bk),bt,bp,bu,bw,bv,bz,bA=[];for(bt=0;bt<bq;bt++){bp=aw(au(bs,bB,br,e(u(br),bx-by)));x(bp);for(bu=0;bu<bp.length;bu++){bw=bp[bu];for(bv=0;bv<bw.length;bv++){bz=bw[bv];bz.col=bt;bz.level=bu;bA.push(bz)}}d(br,1,true)}return bA}function bk(bp){if(bp.end){return u(bp.end)}else{return e(u(bp.start),a8("defaultEventMinutes"))}}function bc(bO,bJ){var bE,bN=bO.length,bM,bx,br,bQ,bq,bt,bI,bA,bH,bp,bK,bG,bD="",bz,by,bR,bT={},bC={},bF,bS,bu,bB,bP=a4(),bL,bv,bw,bs=aX();if(bL=a8("isRTL")){bv=-1;bw=bs-1}else{bv=1;bw=0}for(bE=0;bE<bN;bE++){bM=bO[bE];bx=bM.event;bQ=bn(bM.start,bM.start);bq=bn(bM.start,bM.end);bt=bM.col;bI=bM.level;bA=bM.forward||0;bH=aK(bt*bv+bw);bp=aL(bt*bv+bw)-bH;bp=Math.min(bp-6,bp*0.95);if(bI){bK=bp/(bI+bA+1)}else{if(bA){bK=((bp/(bA+1))-(12/2))*2}else{bK=bp}}bG=bH+(bp/(bI+bA+1)*bI)*bv+(bL?bp-bK:0);bM.top=bQ;bM.left=bG;bM.outerWidth=bK;bM.outerHeight=bq-bQ;bD+=bl(bx,bM)}bP[0].innerHTML=bD;bz=bP.children();for(bE=0;bE<bN;bE++){bM=bO[bE];bx=bM.event;by=a(bz[bE]);bR=bo("eventRender",bx,bx,by);if(bR===false){by.remove()}else{if(bR&&bR!==true){by.remove();by=a(bR).css({position:"absolute",top:bM.top,left:bM.left}).appendTo(bP)}bM.element=by;if(bx._id===bJ){aG(bx,by,bM)}else{by[0]._fci=bE}be(bx,by)}}Z(bP,bO,aG);for(bE=0;bE<bN;bE++){bM=bO[bE];if(by=bM.element){bS=bT[bF=bM.key=y(by[0])];bM.vsides=bS===ax?(bT[bF]=aC(by,true)):bS;bS=bC[bF];bM.hsides=bS===ax?(bC[bF]=X(by,true)):bS;bu=by.find("div.fc-event-content");if(bu.length){bM.contentTop=bu[0].offsetTop}}}for(bE=0;bE<bN;bE++){bM=bO[bE];if(by=bM.element){by[0].style.width=Math.max(0,bM.outerWidth-bM.hsides)+"px";bB=Math.max(0,bM.outerHeight-bM.vsides);by[0].style.height=bB+"px";bx=bM.event;if(bM.contentTop!==ax&&bB-bM.contentTop<10){by.find("div.fc-event-time").text(aU(bx.start,a8("timeFormat"))+" - "+bx.title);by.find("div.fc-event-title").remove()}bo("eventAfterRender",bx,bx,by)}}}function bl(bq,bs){var br="<";var bv=bq.url;var bt=P(bq,a8);var bu=(bt?" style='"+bt+"'":"");var bp=["fc-event","fc-event-skin","fc-event-vert"];if(a6(bq)){bp.push("fc-event-draggable")}if(bs.isStart){bp.push("fc-corner-top")}if(bs.isEnd){bp.push("fc-corner-bottom")}bp=bp.concat(bq.className);if(bq.source){bp=bp.concat(bq.source.className||[])}if(bv){br+="a href='"+Y(bq.url)+"'"}else{br+="div"}br+=" class='"+bp.join(" ")+"' style='position:absolute;z-index:8;top:"+bs.top+"px;left:"+bs.left+"px;"+bt+"'><div class='fc-event-inner fc-event-skin'"+bu+"><div class='fc-event-head fc-event-skin'"+bu+"><div class='fc-event-time'>"+Y(aV(bq.start,bq.end,a8("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Y(bq.title)+"</div></div><div class='fc-event-bg'></div></div>";if(bs.isEnd&&a7(bq)){br+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}br+="</"+(bv?"a":"div")+">";return br}function aF(bp,bq,br){if(a6(bp)){aO(bp,bq,br.isStart)}if(br.isEnd&&a7(bp)){bg(bp,bq,br)}aR(bp,bq)}function aG(bp,bq,br){var bs=bq.find("div.fc-event-time");if(a6(bp)){aP(bp,bq,bs)}if(br.isEnd&&a7(bp)){bh(bp,bq,bs)}aR(bp,bq)}function aO(bt,bu,bw){var by;var bA;var bp=true;var br;var bs=a8("isRTL")?-1:1;var bv=a0();var bq=aY();var bB=a3();var bx=a2();bu.draggable({zIndex:9,opacity:a8("dragOpacity","month"),revertDuration:a8("dragRevertDuration"),start:function(bC,bD){bo("eventDragStart",bu,bt,bC,bD);a5(bt,bu);by=bu.width();bv.start(function(bE,bG,bH,bF){aJ();if(bE){bA=false;br=bF*bs;if(!bE.row){a9(d(u(bt.start),br),d(I(bt),br));bz()}else{if(bw){if(bp){bu.width(bq-10);ap(bu,bB*Math.round((bt.end?((bt.end-bt.start)/ab):a8("defaultEventMinutes"))/a8("slotMinutes")));bu.draggable("option","grid",[bq,1]);bp=false}}else{bA=true}}bA=bA||(bp&&!br)}else{bz();bA=true}bu.draggable("option","revert",bA)},bC,"drag")},stop:function(bC,bE){bv.stop();aJ();bo("eventDragStop",bu,bt,bC,bE);if(bA){bz();bu.css("filter","");bj(bt,bu)}else{var bD=0;if(!bp){bD=Math.round((bu.offset().top-aW().offset().top)/bB)*a8("slotMinutes")+bx-(bt.start.getHours()*60+bt.start.getMinutes())}aQ(this,bt,br,bD,bp,bC,bE)}}});function bz(){if(!bp){bu.width(by).height("").draggable("option","grid",null);bp=true}}}function aP(bu,bv,bC){var by;var bp=false;var bs;var bx;var bz;var bt=a8("isRTL")?-1:1;var bw=a0();var bq=aX();var br=aY();var bB=a3();bv.draggable({zIndex:9,scroll:false,grid:[br,bB],axis:bq==1?"y":false,opacity:a8("dragOpacity"),revertDuration:a8("dragRevertDuration"),start:function(bE,bF){bo("eventDragStart",bv,bu,bE,bF);a5(bu,bv);by=bv.position();bx=bz=0;bw.start(function(bG,bI,bJ,bH){bv.draggable("option","revert",!bG);aJ();if(bG){bs=bH*bt;if(a8("allDaySlot")&&!bG.row){if(!bp){bp=true;bC.hide();bv.draggable("option","grid",null)}a9(d(u(bu.start),bs),d(I(bu),bs))}else{bA()}}},bE,"drag")},drag:function(bE,bF){bx=Math.round((bF.position.top-by.top)/bB)*a8("slotMinutes");if(bx!=bz){if(!bp){bD(bx)}bz=bx}},stop:function(bF,bG){var bE=bw.stop();aJ();bo("eventDragStop",bv,bu,bF,bG);if(bE&&(bs||bx||bp)){aQ(this,bu,bs,bp?0:bx,bp,bF,bG)}else{bA();bv.css("filter","");bv.css(by);bD(0);bj(bu,bv)}}});function bD(bE){var bG=e(u(bu.start),bE);var bF;if(bu.end){bF=e(u(bu.end),bE)}bC.text(aV(bG,bF,a8("timeFormat")))}function bA(){if(bp){bC.css("display","");bv.draggable("option","grid",[br,bB]);bp=false}}}function bh(bp,bq,bu){var bs,br;var bt=a3();bq.resizable({handles:{s:"div.ui-resizable-s"},grid:bt,start:function(bv,bw){bs=br=0;a5(bp,bq);bq.css("z-index",9);bo("eventResizeStart",this,bp,bv,bw)},resize:function(bv,bw){bs=Math.round((Math.max(bt,bq.height())-bw.originalSize.height)/bt);if(bs!=br){bu.text(aV(bp.start,(!bs&&!bp.end)?null:e(aS(bp),a8("slotMinutes")*bs),a8("timeFormat")));br=bs}},stop:function(bv,bw){bo("eventResizeStop",this,bp,bv,bw);if(bs){aT(this,bp,0,a8("slotMinutes")*bs,bv,bw)}else{bq.css("z-index",8);bj(bp,bq)}}})}}function x(aJ){var aF,aG,aH,aI,aL,aK;for(aF=aJ.length-1;aF>0;aF--){aI=aJ[aF];for(aG=0;aG<aI.length;aG++){aL=aI[aG];for(aH=0;aH<aJ[aF-1].length;aH++){aK=aJ[aF-1][aH];if(ak(aL,aK)){aK.forward=Math.max(aK.forward||0,(aL.forward||0)+1)}}}}}function az(aI,aF,a6){var a4=this;a4.element=aI;a4.calendar=aF;a4.name=a6;a4.opt=aX;a4.trigger=a5;a4.isEventDraggable=aS;a4.isEventResizable=aU;a4.reportEvents=a2;a4.eventEnd=aO;a4.reportEventElement=a1;a4.reportEventClear=a0;a4.eventElementHandlers=aL;a4.showEvents=a3;a4.hideEvents=aR;a4.eventDrop=aK;a4.eventResize=aP;var aG=a4.defaultEventEnd;var aW=aF.normalizeEvent;var aZ=aF.reportEventChange;var aQ={};var aM=[];var aN={};var aY=aF.options;function aX(a7,a9){var a8=aY[a7];if(typeof a8=="object"){return av(a8,a9||a6)}return a8}function a5(a7,a8){return aF.trigger.apply(aF,[a7,a8||a4].concat(Array.prototype.slice.call(arguments,2),[a4]))}function aS(a7){return aT(a7)&&!aX("disableDragging")}function aU(a7){return aT(a7)&&!aX("disableResizing")}function aT(a7){return L(a7.editable,(a7.source||{}).editable,aX("editable"))}function a2(a8){aQ={};var a9,ba=a8.length,a7;for(a9=0;a9<ba;a9++){a7=a8[a9];if(aQ[a7._id]){aQ[a7._id].push(a7)}else{aQ[a7._id]=[a7]}}}function aO(a7){return a7.end?u(a7.end):aG(a7)}function a1(a8,a7){aM.push(a7);if(aN[a8._id]){aN[a8._id].push(a7)}else{aN[a8._id]=[a7]}}function a0(){aM=[];aN={}}function aL(a7,a8){a8.click(function(a9){if(!a8.hasClass("ui-draggable-dragging")&&!a8.hasClass("ui-resizable-resizing")){return a5("eventClick",this,a7,a9)}}).hover(function(a9){a5("eventMouseover",this,a7,a9)},function(a9){a5("eventMouseout",this,a7,a9)})}function a3(a7,a8){aH(a7,a8,"show")}function aR(a7,a8){aH(a7,a8,"hide")}function aH(a8,a9,ba){var a7=aN[a8._id],bb,bc=a7.length;for(bb=0;bb<bc;bb++){if(!a9||a7[bb][0]!=a9[0]){a7[bb][ba]()}}}function aK(a9,bb,a8,bd,a7,ba,bf){var be=bb.allDay;var bc=bb._id;aV(aQ[bc],a8,bd,a7);a5("eventDrop",a9,bb,a8,bd,a7,function(){aV(aQ[bc],-a8,-bd,be);aZ(bc)},ba,bf);aZ(bc)}function aP(a8,ba,a7,bc,a9,bd){var bb=ba._id;aJ(aQ[bb],a7,bc);a5("eventResize",a8,ba,a7,bc,function(){aJ(aQ[bb],-a7,-bc);aZ(bb)},a9,bd);aZ(bb)}function aV(ba,a8,bd,a7){bd=bd||0;for(var a9,bc=ba.length,bb=0;bb<bc;bb++){a9=ba[bb];if(a7!==ax){a9.allDay=a7}e(d(a9.start,a8,true),bd);if(a9.end){a9.end=e(d(a9.end,a8,true),bd)}aW(a9,aY)}}function aJ(a9,a7,bc){bc=bc||0;for(var a8,bb=a9.length,ba=0;ba<bb;ba++){a8=a9[ba];a8.end=e(d(aO(a8),a7,true),bc);aW(a8,aY)}}}function C(){var bg=this;bg.renderDaySegs=bb;bg.resizableDayEvent=be;var a9=bg.opt;var bh=bg.trigger;var a7=bg.isEventDraggable;var a8=bg.isEventResizable;var aX=bg.eventEnd;var bd=bg.reportEventElement;var bf=bg.showEvents;var a6=bg.hideEvents;var aY=bg.eventResize;var a3=bg.getRowCnt;var a0=bg.getColCnt;var a1=bg.getColWidth;var aG=bg.allDayRow;var aF=bg.allDayBounds;var aK=bg.colContentLeft;var aL=bg.colContentRight;var aO=bg.dayOfWeekCol;var aN=bg.dateCell;var aM=bg.compileDaySegs;var a2=bg.getDaySegmentContainer;var aH=bg.bindDaySeg;var aZ=bg.calendar.formatDates;var ba=bg.renderDayOverlay;var aI=bg.clearOverlays;var aJ=bg.clearSelection;function bb(bw,bo){var bv=a2();var br;var bq=a3();var bi=a0();var bk=0;var bs;var bn;var bj;var bl;var bu=bw.length;var bt;var bx;var bm;var bp=bg.calendar.getDate().getMonth();bv[0].innerHTML=aU(bw,bp);aS(bw,bv.children());aR(bw);aT(bw,bv,bo);aQ(bw);aW(bw);aP(bw);br=a4();for(bs=0;bs<bq;bs++){bn=0;bj=[];for(bl=0;bl<bi;bl++){bj[bl]=0}while(bk<bu&&(bt=bw[bk]).row==bs){bx=n(bj.slice(bt.startCol,bt.endCol));bt.top=bx;bx+=bt.outerHeight;for(bm=bt.startCol;bm<bt.endCol;bm++){bj[bm]=bx}bk++}br[bs].height(n(bj))}aV(bw,a5(br))}function bc(bp,bi,bj){var bq=a("<div/>");var bl;var bo=a2();var bm;var bn=bp.length;var bk;bq[0].innerHTML=aU(bp);bl=bq.children();bo.append(bl);aS(bp,bl);aQ(bp);aW(bp);aP(bp);aV(bp,a5(a4()));bl=[];for(bm=0;bm<bn;bm++){bk=bp[bm].element;if(bk){if(bp[bm].row===bi){bk.css("top",bj)}bl.push(bk[0])}}return a(bl)}function aU(bI,by){var bF=a9("isRTL");var bq;var bH=bI.length;var bG;var bn;var bL;var bj;var bi=aF();var bx=bi.left;var bw=bi.right;var bv;var bE;var bu;var bD;var bJ;var bp="";var bm=[];var bz=_.chain(bI).pluck("event").filter(function(bM){return bM.title.indexOf("NOTE:")>=0}).map(function(bM){return{date:bM.start.toDateString(),name:bM.title.replace("NOTE:","")}}).groupBy(function(bM){return bM.date}).value();var bB=_.chain(bI).pluck("event").filter(function(bM){return bM.title.indexOf("In Home")>=0}).map(function(bM){return{date:bM.start.toDateString(),name:bM.title}}).groupBy(function(bM){return bM.date}).value();var bl=_.chain(bI).pluck("event").filter(function(bM){return bM.title.indexOf("Quote")>=0}).map(function(bM){return{date:bM.start.toDateString(),name:bM.title}}).groupBy(function(bM){return bM.date}).value();var bk={};_.each(bl,function(bN){var bM=bN[0].date;var bO=_.filter(bI,function(bP){return bP.start.toDateString()==bM});bk[bM]=_.pluck(bO,"event")});_.each(bk,function(bM,bN){var bO=[];bk[bN]=_.sum(bM,function(bP){if(!_.contains(bO,bP.title)){bO.push(bP.title);return bP.cost}return 0})});for(bq=0;bq<bH;bq++){bG=bI[bq];var bo=bm.indexOf(bG.start.toDateString())>=0;bm.push(bG.start.toDateString());bn=bG.event;bj=["fc-event","fc-event-skin","fc-event-hori"];if(bG.event.start.getMonth()!=by){bj.push("not-this-month this-plugin-is-impossible-to-debug")}if(a7(bn)){bj.push("fc-event-draggable")}if(bF){if(bG.isStart){bj.push("fc-corner-right")}if(bG.isEnd){bj.push("fc-corner-left")}bv=aO(bG.end.getDay()-1);bE=aO(bG.start.getDay());bu=bG.isEnd?aK(bv):bx;bD=bG.isStart?aL(bE):bw}else{if(bG.isStart){bj.push("fc-corner-left")}if(bG.isEnd){bj.push("fc-corner-right")}bv=aO(bG.start.getDay());bE=aO(bG.end.getDay()-1);bu=bG.isStart?aK(bv):bx;bD=bG.isEnd?aL(bE):bw}bj=bj.concat(bn.className);if(bn.source){bj=bj.concat(bn.source.className||[])}bL=bn.url;bJ=P(bn,a9);bp+="<div class='"+bj.join(" ")+"' style='"+(bo?"display:none;":"")+" position:absolute;z-index:8;left:"+bu+"px;"+bJ+"'><div class='fc-event-inner fc-event-skin'>";var bK=_.uniq(_.pluck(bz[bG.start.toDateString()],"name"));if(bK.length>0){bp+="<span class='fc-event-title' style='text-transform: uppercase;'>"+bK[0]+"</span><br />"}var bs=_.uniq(_.pluck(bl[bG.start.toDateString()],"name")).length;var bt=(bs>1)?"Jobs":"Job";var br=bk[bG.start.toDateString()];if(bs>0){bp+="<span class='fc-event-title'>"+bs+" "+bt+"<span class='fc-desc'> "+Utility.formatCurrency(br)+" </span></span>"}var bA=_.uniq(_.pluck(bB[bG.start.toDateString()],"name")).length;var bC=bA>1?"Surveys":"Survey";if(bA>0){bp+="<span class='fc-desc'>"+bA+" "+bC+"</span>"}bp+="</div>";bp+="</div>";bG.left=bu;bG.outerWidth=bD-bu;bG.startCol=bv;bG.endCol=bE+1}return bp}function aS(bo,bj){var bl;var bn=bo.length;var bm;var bk;var bi;var bp;for(bl=0;bl<bn;bl++){bm=bo[bl];bk=bm.event;bi=a(bj[bl]);bp=bh("eventRender",bk,bk,bi);if(bp===false){bi.remove()}else{if(bp&&bp!==true){bp=a(bp).css({position:"absolute",left:bm.left});bi.replaceWith(bp);bi=bp}bm.element=bi}}}function aR(bm){var bj;var bl=bm.length;var bk;var bi;for(bj=0;bj<bl;bj++){bk=bm[bj];bi=bk.element;if(bi){bd(bk.event,bi)}}}function aT(bp,bo,bl){var bk;var bn=bp.length;var bm;var bi;var bj;for(bk=0;bk<bn;bk++){bm=bp[bk];bi=bm.element;if(bi){bj=bm.event;if(bj._id===bl){aH(bj,bi,bm)}else{bi[0]._fci=bk}}}Z(bo,bp,aH)}function aQ(bo){var bk;var bn=bo.length;var bm;var bi;var bl,bp;var bj={};for(bk=0;bk<bn;bk++){bm=bo[bk];bi=bm.element;if(bi){bl=bm.key=y(bi[0]);bp=bj[bl];if(bp===ax){bp=bj[bl]=X(bi,true)}bm.hsides=bp}}}function aW(bm){var bj;var bl=bm.length;var bk;var bi;for(bj=0;bj<bl;bj++){bk=bm[bj];bi=bk.element;if(bi){bi[0].style.width=Math.max(0,bk.outerWidth-bk.hsides)+"px"}}}function aP(bn){var bj;var bm=bn.length;var bl;var bi;var bk,bo;var bp={};for(bj=0;bj<bm;bj++){bl=bn[bj];bi=bl.element;if(bi){bk=bl.key;bo=bp[bk];if(bo===ax){bo=bp[bk]=aA(bi)}bl.outerHeight=bi[0].offsetHeight+bo}}}function a4(){var bi;var bj=a3();var bk=[];for(bi=0;bi<bj;bi++){bk[bi]=aG(bi).find("td:first div.fc-day-content > div")}return bk}function a5(bk){var bi;var bj=bk.length;var bl=[];for(bi=0;bi<bj;bi++){bl[bi]=bk[bi][0].offsetTop}return bl}function aV(bo,bl){var bk;var bn=bo.length;var bm;var bi;var bj;for(bk=0;bk<bn;bk++){bm=bo[bk];bi=bm.element;if(bi){bi[0].style.top=bl[bm.row]+(bm.top||0)+"px";bj=bm.event;bh("eventAfterRender",bj,bj,bi)}}}function be(bk,bj,bo){var bn=a9("isRTL");var bi=bn?"w":"e";var bl=bj.find("div.ui-resizable-"+bi);var bm=false;F(bj);bj.mousedown(function(bp){bp.preventDefault()}).click(function(bp){if(bm){bp.preventDefault();bp.stopImmediatePropagation()}});bl.mousedown(function(bu){if(bu.which!=1){return}bm=true;var bx=bg.getHoverListener();var bA=a3();var bp=a0();var br=bn?-1:1;var bs=bn?bp-1:0;var bt=bj.css("top");var bq;var bw;var bv=a.extend({},bk);var by=aN(bk.start);aJ();a("body").css("cursor",bi+"-resize").one("mouseup",bz);bh("eventResizeStart",this,bk,bu);bx.start(function(bC,bF){if(bC){var bG=Math.max(by.row,bC.row);var bB=bC.col;if(bA==1){bG=0}if(bG==by.row){if(bn){bB=Math.min(by.col,bB)}else{bB=Math.max(by.col,bB)}}bq=(bG*7+bB*br+bs)-(bF.row*7+bF.col*br+bs);var bD=d(aX(bk),bq,true);if(bq){bv.end=bD;var bE=bw;bw=bc(aM([bv]),bo.row,bt);bw.find("*").css("cursor",bi+"-resize");if(bE){bE.remove()}a6(bk)}else{if(bw){bf(bk);bw.remove();bw=null}}aI();ba(bk.start,d(u(bD),1))}},bu);function bz(bB){bh("eventResizeStop",this,bk,bB);a("body").css("cursor","");bx.stop();aI();if(bq){aY(this,bk,bq,0,bB)}setTimeout(function(){bm=false},0)}})}}function al(){var aN=this;aN.select=aL;aN.unselect=aP;aN.reportSelection=aK;aN.daySelectionMousedown=aG;var aI=aN.opt;var aO=aN.trigger;var aH=aN.defaultSelectionEnd;var aJ=aN.renderSelection;var aF=aN.clearSelection;var aM=false;if(aI("selectable")&&aI("unselectAuto")){a(document).mousedown(function(aQ){var aR=aI("unselectCancel");if(aR){if(a(aQ.target).parents(aR).length){return}}aP(aQ)})}function aL(aS,aR,aQ){aP();if(!aR){aR=aH(aS,aQ)}aJ(aS,aR,aQ);aK(aS,aR,aQ)}function aP(aQ){if(aM){aM=false;aF();aO("unselect",null,aQ)}}function aK(aT,aR,aQ,aS){aM=true;aO("select",null,aT,aR,aQ,aS)}function aG(aU){var aR=aN.cellDate;var aS=aN.cellIsAllDay;var aV=aN.getHoverListener();var aW=aN.reportDayClick;if((aU.which==1||aU.which==2)&&aI("selectable")){aP(aU);var aQ=this;var aT;aV.start(function(aX,aY){aF();if(aX&&aS(aX)){aT=[aR(aY),aR(aX)].sort(v);aJ(aT[0],aT[1],true)}else{aT=null}},aU);a(document).one("mouseup",function(aX){aV.stop();if(aT){if(+aT[0]==+aT[1]){aW(aT[0],true,aX)}aK(aT[0],aT[1],true,aX)}})}}}function ae(){var aH=this;aH.renderOverlay=aG;aH.clearOverlays=aF;var aJ=[];var aI=[];function aG(aM,aL){var aK=aI.shift();if(!aK){aK=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")}if(aK[0].parentNode!=aL[0]){aK.appendTo(aL)}aJ.push(aK.css(aM).show());return aK}function aF(){var aK;while(aK=aJ.shift()){aI.push(aK.hide().unbind())}}}function w(aF){var aI=this;var aH;var aG;aI.build=function(){aH=[];aG=[];aF(aH,aG)};aI.cell=function(aO,aP){var aN=aH.length;var aK=aG.length;var aL,aM=-1,aJ=-1;for(aL=0;aL<aN;aL++){if(aP>=aH[aL][0]&&aP<aH[aL][1]){aM=aL;break}}for(aL=0;aL<aK;aL++){if(aO>=aG[aL][0]&&aO<aG[aL][1]){aJ=aL;break}}return(aM>=0&&aJ>=0)?{row:aM,col:aJ}:null};aI.rect=function(aN,aJ,aO,aK,aM){var aL=aM.offset();return{top:aH[aN][0]-aL.top,left:aG[aJ][0]-aL.left,width:aG[aK][1]-aG[aJ][0],height:aH[aO][1]-aH[aN][0]}}}function V(aI){var aL=this;var aF;var aH;var aJ;var aG;aL.start=function(aN,aO,aM){aH=aN;aJ=aG=null;aI.build();aK(aO);aF=aM||"mousemove";a(document).bind(aF,aK)};function aK(aM){c(aM);var aN=aI.cell(aM.pageX,aM.pageY);if(!aN!=!aG||aN&&(aN.row!=aG.row||aN.col!=aG.col)){if(aN){if(!aJ){aJ=aN}aH(aN,aJ,aN.row-aJ.row,aN.col-aJ.col)}else{aH(aN,aJ)}aG=aN}}aL.stop=function(){a(document).unbind(aF,aK);return aG}}function c(aF){if(aF.pageX===ax){aF.pageX=aF.originalEvent.pageX;aF.pageY=aF.originalEvent.pageY}}function T(aH){var aK=this,aG={},aI={},aJ={};function aF(aL){return aG[aL]=aG[aL]||aH(aL)}aK.left=function(aL){return aI[aL]=aI[aL]===ax?aF(aL).position().left:aI[aL]};aK.right=function(aL){return aJ[aL]=aJ[aL]===ax?aK.left(aL)+aF(aL).width():aJ[aL]};aK.clear=function(){aG={};aI={};aJ={}}}})(jQuery);/*
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(a,d,g){var e=/\+/g;function f(h){return h}function c(h){return decodeURIComponent(h.replace(e," "))}var b=a.cookie=function(o,u,q){if(u!==g){q=a.extend({},b.defaults,q);if(u===null){q.expires=-1}if(typeof q.expires==="number"){var k=q.expires,s=q.expires=new Date();s.setDate(s.getDate()+k)}u=b.json?JSON.stringify(u):String(u);return(d.cookie=[encodeURIComponent(o),"=",b.raw?u:encodeURIComponent(u),q.expires?"; expires="+q.expires.toUTCString():"",q.path?"; path="+q.path:"",q.domain?"; domain="+q.domain:"",q.secure?"; secure":""].join(""))}var m=b.raw?f:c;var j=d.cookie.split("; ");for(var n=0,p=j.length;n<p;n++){var r=j[n].split("=");if(m(r.shift())===o){var h=m(r.join("="));return b.json?JSON.parse(h):h}}return null};b.defaults={};a.removeCookie=function(h,i){if(a.cookie(h)!==null){a.cookie(h,null,i);return true}return false}})(jQuery,document);(function(a){var b={animate:true};a.fn.togglePanel=function(c){c=a.extend({},b,c);a(this).each(function(g){var j=a(this);var f=j.find(".panel-title").siblings();var d=j.find(".icon-toggle");var e=j.data("cookie-name");function h(){return _.isUndefined(a.cookie(e))?false:Utility.parseBool(a.cookie(e))}if(h()){f.hide();d.toggleClass("icon-chevron-down")}function k(i){a.cookie(e,i,{path:"/"})}var h=!f.is(":visible");j.find(".panel-title").click(function(){var i=!f.is(":visible");d.toggleClass("icon-chevron-down",i);k(!i);if(i){if(c.animate){f.slideDown()}else{f.show()}}else{if(c.animate){f.slideUp()}else{f.hide()}}})})}})(jQuery);/*
Masked Input plugin for jQuery
Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license) 
Version: 1.3
*/
(function(a){var c=(a.browser.msie?"paste":"input")+".mask";var b=(window.orientation!=undefined);a.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};a.fn.extend({caret:function(d,e){if(this.length==0){return}if(typeof d=="number"){e=(typeof e=="number")?e:d;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(d,e)}else{if(this.createTextRange){var g=this.createTextRange();g.collapse(true);g.moveEnd("character",e);g.moveStart("character",d);g.select()}}})}else{if(this[0].setSelectionRange){d=this[0].selectionStart;e=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var f=document.selection.createRange();d=0-f.duplicate().moveStart("character",-100000);e=d+f.text.length}}return{begin:d,end:e}}},unmask:function(){return this.trigger("unmask")},mask:function(h,j){if(!h&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}j=a.extend({placeholder:"_",completed:null},j);var d=a.mask.definitions;var k=[];var i=h.length;var e=null;var g=h.length;a.each(h.split(""),function(m,l){if(l=="?"){g--;i=m}else{if(d[l]){k.push(new RegExp(d[l]));if(e==null){e=k.length-1}}else{k.push(null)}}});return this.trigger("unmask").each(function(){var p=a(this);var l=a.map(h.split(""),function(x,y){if(x!="?"){return d[x]?j.placeholder:x}});var o=p.val();function s(x){while(++x<=g&&!k[x]){}return x}function t(x){while(--x>=0&&!k[x]){}return x}function u(x,y){if(x<0){return}for(var z=x,A=s(y);z<g;z++){if(k[z]){if(A<g&&k[z].test(l[A])){l[z]=l[A];l[A]=j.placeholder}else{break}A=s(A)}}w();p.caret(Math.max(e,x))}function v(A){for(var y=A,x=j.placeholder;y<g;y++){if(k[y]){var z=s(y);var B=l[y];l[y]=x;if(z<g&&k[z].test(B)){x=B}else{break}}}}function q(y){var A=y.which;if(y.ctrlKey&&A==Keys.X){p.trigger("unmask");p.one("keyup",function(C){p.mask(h)});return}if(A==8||A==46||(b&&A==127)){var B=p.caret(),x=B.begin,z=B.end;if(z-x==0){x=A!=46?t(x):(z=s(x-1));z=A==46?s(z):z}n(x,z);u(x,z-1);return false}else{if(A==27){p.val(o);p.caret(0,m());return false}}}function r(y){var z=y.which,C=p.caret();if(y.ctrlKey||y.altKey||y.metaKey||z<32){return true}else{if(z){if(C.end-C.begin!=0){n(C.begin,C.end);u(C.begin,C.end-1)}var B=s(C.begin-1);if(B<g){var x=String.fromCharCode(z);if(k[B].test(x)){v(B);l[B]=x;w();var A=s(B);p.caret(A);if(j.completed&&A>=g){j.completed.call(p)}}}return false}}}function n(z,x){for(var y=z;y<x&&y<g;y++){if(k[y]){l[y]=j.placeholder}}}function w(){return p.val(l.join("")).val()}function m(x){var C=p.val();var A=-1;for(var z=0,B=0;z<g;z++){if(k[z]){l[z]=j.placeholder;while(B++<C.length){var y=C.charAt(B-1);if(k[z].test(y)){l[z]=y;A=z;break}}if(B>C.length){break}}else{if(l[z]==C.charAt(B)&&z!=i){B++;A=z}}}if(!x&&A+1<i){p.val("");n(0,g)}else{if(x||A+1>=i){w();if(!x){p.val(p.val().substring(0,A+1))}}}return(i?z:e)}p.data(a.mask.dataName,function(){return a.map(l,function(x,y){return k[y]&&x!=j.placeholder?x:null}).join("")});if(!p.attr("readonly")){p.one("unmask",function(){p.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){o=p.val();var y=m();w();var x=function(){if(y==h.length){p.caret(0,y)}else{p.caret(y)}};setTimeout(function(){if(p.is(":focus")){x()}},0)}).bind("blur.mask",function(){m();if(p.val()!=o){p.change()}}).bind("keydown.mask",q).bind("keypress.mask",r).bind(c,function(){setTimeout(function(){p.caret(m(true))},0)})}m()})}})})(jQuery);/*
* @license PlusAsTab, EmulateTab
* Copyright (c) 2011, 2012 The Swedish Post and Telecom Authority (PTS)
* Developed for PTS by Joel Purra <http://joelpurra.se/>
* Released under the BSD license.
*/
var JoelPurra=JoelPurra||{};(function(a,k){k.EmulateTab=function(){};var d=".EmulateTab";var f=":input, a[href]";var j=null;function c(m){return m.replace(/(!"#$%&'\(\)\*\+,\.\/:;<=>\?@\[\]^`\{\|\}~)/g,"\\\\$1")}function e(n,w){var m=a(f).not(":disabled").not(":hidden").not("a[href]:empty");if(n[0].tagName==="INPUT"&&n[0].type==="radio"&&n[0].name!==""){var t=c(n[0].name);m=m.not("input[type=radio][name="+t+"]").add(n)}var y=n.attr("tabindex");if(typeof(y)!=="undefined"){y=parseInt(y,10);var q=a(f).filter(":visible[tabindex]");var u=Infinity;var x=-Infinity;var p=a([]);var s=w<0;q.each(function(){var z=parseInt(a(this).attr("tabindex"),10);if(z<u&&z>y||(s&&z>x&&z<y)){p=a(this);u=x=z}});if(p.length){return p}}var r=m.index(n);var v=(r+w)%m.length;if(v<=-1){v=m.length+v}var o=m.eq(v);return o}function g(m){j=m.target}function l(o){try{var m=a(o);if(!!m&&m.size()!==0){return m}}catch(n){}return null}function h(){var m=null||l(":focus")||l(document.activeElement)||l(j)||a();return m}function b(m,o){var n=e(m,o);n.focus()}function i(){a(document).on("focusin"+d,g)}k.EmulateTab.forwardTab=function(m){return k.EmulateTab.tab(m,+1)};k.EmulateTab.reverseTab=function(m){return k.EmulateTab.tab(m,-1)};k.EmulateTab.tab=function(m,n){if(a.isNumeric(m)){n=m;m=undefined}m=m||k.EmulateTab.getFocused();n=n||+1;b(m,n)};k.EmulateTab.getFocused=function(){return h()};a.extend({emulateTab:function(m,n){return k.EmulateTab.tab(m,n)}});a.fn.extend({emulateTab:function(m){return k.EmulateTab.tab(this,m)}});a(i)}(jQuery,JoelPurra));var JoelPurra=JoelPurra||{};(function(a,k){k.PlusAsTab={};var e=".PlusAsTab";var j=107;var g={key:j};var l=a.extend(true,{},g);var d=".plus-as-tab, [data-plus-as-tab=true]";var c=".disable-plus-as-tab, [data-plus-as-tab=false]";function m(p,o,n){p=(p===true);o=(o===true);if(p&&n!==undefined&&n.length!==0){n.emulateTab(o?-1:+1);return true}return false}function h(n){if(n===l.key||(a.isArray(l.key)&&a.inArray(n,l.key)!==-1)){return true}return false}function i(n){if(!n.altKey&&!n.ctrlKey&&!n.metaKey&&h(n.which)){return true}return false}function b(o){if(!i(o)){return}var n=a(o.target);if(n.is(c)||n.parents(c).length>0||(!n.is(d)&&n.parents(d).length===0)){return}var p=m(true,o.shiftKey,n);if(p){o.preventDefault();o.stopPropagation();o.stopImmediatePropagation();return false}return}function f(){a(document).on("keydown"+e,b)}k.PlusAsTab.setOptions=function(n){a.extend(true,l,n)};k.PlusAsTab.plusAsTab=function(n,o){o=(o===undefined?true:o===true);return n.each(function(){var p=a(this);p.not(c).not(d).attr("data-plus-as-tab",o?"true":"false")})};a.fn.extend({plusAsTab:function(n){return k.PlusAsTab.plusAsTab(this,n)}});a(f)}(jQuery,JoelPurra));/*
HTML5 Number polyfill | Jonathan Stipe | https://github.com/jonstipe/number-polyfill
*/
(function(){(function(a){var b;b=document.createElement("input");b.setAttribute("type","number");if(b.type==="text"){a.fn.inputNumber=function(){var c,d,e,f,g,h,i,j;g=function(l){var k,m,n,o,p;k=a(l);o=k.attr("step");n=k.attr("min");m=k.attr("max");p=parseFloat(k.val());o=/^-?\d+(?:\.\d+)?$/.test(o)?parseFloat(o):null;n=/^-?\d+(?:\.\d+)?$/.test(n)?parseFloat(n):null;m=/^-?\d+(?:\.\d+)?$/.test(m)?parseFloat(m):null;if(isNaN(p)){p=n||0}return{min:n,max:m,step:o,val:p}};c=function(m,l,k){if((k!=null)&&m>k){return k}else{if((l!=null)&&m<l){return l}else{return m}}};f=function(k){var l,m;if(k!=null){l=0;m=k;while(m!==Math.round(m)){l+=1;m=k*Math.pow(10,l)}return l}else{return 0}};i=function(x,l,k,t){var m,s,n,o,p,q,r,u,v,w;u=f(t);if(t==null){return x}else{if(u===0){m=(x-(l||0))%t;if(m===0){return x}else{v=x-m;w=v+t;if((w>k)||((x-v)<(w-x))){return v}else{return w}}}else{s=Math.pow(10,u);o=t*s;n=(x-(l||0))*s%o;if(n===0){return x}else{r=x*s;p=r-n;q=p+o;if(((q/s)>k)||((r-p)<(q-r))){return p/s}else{return q/s}}}}};h=function(k){var l,m,n;if(!a(k).is(":disabled")){m=g(k);n=Math.pow(10,Math.max(f(m.val),f(m.step)));l=(Math.round(m.val*n)+Math.round((m.step||1)*n))/n;if((m.max!=null)&&l>m.max){l=m.max}l=i(l,m.min,m.max,m.step);a(k).val(l).change()}return null};d=function(k){var l,m,n;if(!a(k).is(":disabled")){m=g(k);n=Math.pow(10,Math.max(f(m.val),f(m.step)));l=(Math.round(m.val*n)-Math.round((m.step||1)*n))/n;if((m.min!=null)&&l<m.min){l=m.min}l=i(l,m.min,m.max,m.step);a(k).val(l).change()}return null};e=function(k){k.preventDefault();if(k.originalEvent.detail<0){h(this)}else{d(this)}return null};j=function(k){k.preventDefault();if(k.originalEvent.wheelDelta>0){h(this)}else{d(this)}return null};a(this).filter('input[type="number"]').each(function(){var k,l,m,n,o,p,q,r,s,t;r=this;l=a(r);s=(l.outerHeight()/2)+"px";t=document.createElement("div");q=document.createElement("div");m=a(t);k=a(q);p=document.createElement("div");m.addClass("number-spin-btn number-spin-btn-up").css("height",s);k.addClass("number-spin-btn number-spin-btn-down").css("height",s);p.appendChild(t);p.appendChild(q);a(p).addClass("number-spin-btn-container").insertAfter(r);l.on({focus:function(u){l.on({DOMMouseScroll:e,mousewheel:j});return null},blur:function(u){l.off({DOMMouseScroll:e,mousewheel:j});return null},keypress:function(w){var u,v;if(w.keyCode===38){h(this)}else{if(w.keyCode===40){d(this)}else{if(((u=w.keyCode)!==8&&u!==9&&u!==35&&u!==36&&u!==37&&u!==39)&&((v=w.which)!==45&&v!==46&&v!==48&&v!==49&&v!==50&&v!==51&&v!==52&&v!==53&&v!==54&&v!==55&&v!==56&&v!==57)){w.preventDefault()}}}return null},change:function(u){var v,w;if(u.originalEvent!=null){w=g(this);v=c(w.val,w.min,w.max);v=i(v,w.min,w.max,w.step,w.stepDecimal);a(this).val(v)}return null}});m.on("mousedown",function(u){var v,w;h(r);w=function(x,y){y(x);l.data("timeoutID",window.setTimeout(w,10,x,y));return null};v=function(x){window.clearTimeout(l.data("timeoutID"));a(document).off("mouseup",v);m.off("mouseleave",v);return null};a(document).on("mouseup",v);m.on("mouseleave",v);l.data("timeoutID",window.setTimeout(w,700,r,h));return null});k.on("mousedown",function(u){var v,w;d(r);w=function(y,x){x(y);l.data("timeoutID",window.setTimeout(w,10,y,x));return null};v=function(x){window.clearTimeout(l.data("timeoutID"));a(document).off("mouseup",v);k.off("mouseleave",v);return null};a(document).on("mouseup",v);k.on("mouseleave",v);l.data("timeoutID",window.setTimeout(w,700,r,d));return null});l.css("textAlign","right");if(l.css("opacity")!=="1"){a(p).css("opacity",l.css("opacity"))}if(l.css("visibility")!=="visible"){a(p).css("visibility",l.css("visibility"))}if(r.style.display!==""){a(p).css("display",l.css("display"))}if((typeof WebKitMutationObserver!=="undefined"&&WebKitMutationObserver!==null)||(typeof MutationObserver!=="undefined"&&MutationObserver!==null)){n=function(x,y){var w,u,v;for(u=0,v=x.length;u<v;u++){w=x[u];if(w.type==="attributes"){if(w.attributeName==="class"){a(p).removeClass(w.oldValue).addClass(r.className)}else{if(w.attributeName==="style"){a(p).css({opacity:r.style.opacity,visibility:r.style.visibility,display:r.style.display})}}}}return null};o=(typeof WebKitMutationObserver!=="undefined"&&WebKitMutationObserver!==null)?new WebKitMutationObserver(n):((typeof MutationObserver!=="undefined"&&MutationObserver!==null)?new MutationObserver(n):null);o.observe(r,{attributes:true,attributeOldValue:true,attributeFilter:["class","style"]})}else{if(typeof MutationEvent!=="undefined"&&MutationEvent!==null){l.on("DOMAttrModified",function(u){if(u.originalEvent.attrName==="class"){a(p).removeClass(u.originalEvent.prevValue).addClass(u.originalEvent.newValue)}else{if(u.originalEvent.attrName==="style"){a(p).css({display:r.style.display,visibility:r.style.visibility,opacity:r.style.opacity})}}return null})}}return null});return a(this)};a(function(){a('input[type="number"]').inputNumber();return null});null}else{a.fn.inputNumber=function(){return a(this)};null}return null})(jQuery)}).call(this);/*
    FileReader.js - v0.9
    A lightweight wrapper for common FileReader usage.
    Copyright 2012 Brian Grinstead - MIT License.
    See http://github.com/bgrins/filereader.js for documentation.
*/
(function(v,c){var e=v.FileReader;var h=false;var x="self.addEventListener('message', function(e) { var data=e.data; try { var reader = new FileReaderSync; postMessage({ result: reader[data.readAs](data.file), extra: data.extra, file: data.file})} catch(e){ postMessage({ result:'error', extra:data.extra, file:data.file}); } }, false);";var u="self.addEventListener('message', function(e) { postMessage(!!FileReaderSync); }, false);";var f=["loadstart","progress","load","abort","error","loadend"];var g=v.FileReaderJS={enabled:false,setupInput:t,setupDrop:s,setupClipboard:q,sync:false,output:[],opts:{dragClass:"drag",accept:false,readAsDefault:"BinaryString",readAsMap:{"image/*":"DataURL","text/*":"Text"},on:{loadstart:m,progress:m,load:m,abort:m,error:m,loadend:m,skip:m,groupstart:m,groupend:m,beforestart:m}}};if(typeof(jQuery)!=="undefined"){jQuery.fn.fileReaderJS=function(y){return this.each(function(){if($(this).is("input")){t(this,y)}else{s(this,y)}})};jQuery.fn.fileClipboard=function(y){return this.each(function(){q(this,y)})}}if(!e){return}var w=(function(){var B=v.URL||v.webkitURL;var y=v.BlobBuilder||v.WebKitBlobBuilder||v.MozBlobBuilder;function z(D){if(v.Worker&&y&&B){var C=new y();C.append(D);return B.createObjectURL(C.getBlob())}return null}function A(D,C){var E=z(D);if(E){var F=new Worker(E);F.onmessage=C;return F}return null}return{getURL:z,getWorker:A}})();function q(y,B){if(!g.enabled){return}var z=d(d({},g.opts),B);y.addEventListener("paste",A,false);function A(D){var G=[];var C=D.clipboardData||{};var I=C.items||[];for(var H=0;H<I.length;H++){var F=I[H].getAsFile();if(F){var J=new RegExp("/(.*)").exec(F.type);if(!F.name&&J){var E=J[1];F.name="clipboard"+H+"."+E}G.push(F)}}if(G.length){o(D,G,z);D.preventDefault();D.stopPropagation()}}}function t(y,C){if(!g.enabled){return}var B=d(d({},g.opts),C);y.addEventListener("change",z,false);y.addEventListener("drop",A,false);function z(D){o(D,y.files,B)}function A(D){D.stopPropagation();D.preventDefault();o(D,D.dataTransfer.files,B)}}function s(G,K){if(!g.enabled){return}var I=d(d({},g.opts),K);var B=I.dragClass;var H=false;G.addEventListener("dragenter",J(C),false);G.addEventListener("dragleave",J(D),false);G.addEventListener("dragover",J(E),false);G.addEventListener("drop",J(F),false);c.body.addEventListener("dragstart",z,true);c.body.addEventListener("dragend",y,true);c.body.addEventListener("drop",A,false);function y(L){H=false}function z(L){H=true}function A(L){if(L.dataTransfer.files&&L.dataTransfer.files.length){L.stopPropagation();L.preventDefault()}}function J(L){return function(){if(!H){L.apply(this,arguments)}}}function F(L){L.stopPropagation();L.preventDefault();if(B){p(G,B)}o(L,L.dataTransfer.files,I)}function C(L){L.stopPropagation();L.preventDefault();if(B){a(G,B)}}function D(L){if(B){p(G,B)}}function E(L){L.stopPropagation();L.preventDefault();if(B){a(G,B)}}}function r(z,A){for(var B=0;B<z.length;B++){var y=z[B];y.extra={nameNoExtension:y.name.substring(0,y.name.lastIndexOf(".")),extension:y.name.substring(y.name.lastIndexOf(".")+1),fileID:B,uniqueID:k(),groupID:A,prettySize:n(y.size)}}}function j(B,A,z){for(var y in A){if(B.match(new RegExp(y))){return"readAs"+A[y]}}return"readAs"+z}function o(y,z,E){var A=z.length;var B={groupID:i(),files:z,started:new Date()};function C(){B.ended=new Date();E.on.groupend(B)}function D(){if(--A===0){C()}}g.output.push(B);r(z,B.groupID);E.on.groupstart(B);if(!z.length){C();return}var F=g.sync&&h;var G;if(F){G=w.getWorker(x,function(H){var I=H.data.file;var J=H.data.result;if(!I.extra){I.extra=H.data.extra}I.extra.ended=new Date();E.on[J==="error"?"error":"load"]({target:{result:J}},I);D()})}Array.prototype.forEach.call(z,function(H){H.extra.started=new Date();if(E.accept&&!H.type.match(new RegExp(E.accept))){E.on.skip(H);D();return}if(E.on.beforestart(H)===false){E.on.skip(H);D();return}var I=j(H.type,E.readAsMap,E.readAsDefault);if(F&&G){G.postMessage({file:H,extra:H.extra,readAs:I})}else{var J=new e();J.originalEvent=y;f.forEach(function(K){J["on"+K]=function(L){if(K=="load"||K=="error"){H.extra.ended=new Date()}E.on[K](L,H);if(K=="loadend"){D()}}});J[I](H)}})}function b(){var y=w.getWorker(u,function(z){h=z.data});if(y){y.postMessage({})}}function m(){}function d(y,A){for(var z in A){if(A[z]&&A[z].constructor&&A[z].constructor===Object){y[z]=y[z]||{};arguments.callee(y[z],A[z])}else{y[z]=A[z]}}return y}function l(y,z){return new RegExp("(?:^|\\s+)"+z+"(?:\\s+|$)").test(y.className)}function a(y,z){if(!l(y,z)){y.className=y.className?[y.className,z].join(" "):z}}function p(z,A){if(l(z,A)){var y=z.className;z.className=y.replace(new RegExp("(?:^|\\s+)"+A+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}function n(y){var A=["bytes","kb","MB","GB","TB","PB"];var z=Math.floor(Math.log(y)/Math.log(1024));return(y/Math.pow(1024,Math.floor(z))).toFixed(2)+" "+A[z]}var i=(function(y){return function(){return y++}})(0);var k=(function(y){return function(){return y++}})(0);g.enabled=true})(this,document);/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2013 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.4.1                                                   *   
 *                                                                  *
 * Small modifications to keyboard and change events made by        *
 * Moovers Franchising. Changes available at                        *
 * https://github.com/aaronm67/Kalendae                             *
 ********************************************************************/
(function(g){var f,d;var b=function(E,A){if(typeof document.addEventListener!=="function"&&!h.isIE8()){return}var y=false;try{y=E instanceof Element}catch(w){y=!!E&&y.nodeType===1}if(!(y||typeof(E)==="string")){A=E}var C=this,t=C.classes,B=C.settings=h.merge(C.defaults,{attachTo:E},A||{}),m=C.container=h.make("div",{"class":t.container}),s=C.calendars=[],D=d().day(B.weekStart),G,u=[],k,q,l,o,n,v=[],p,x=0,z=B.months;if(h.isIE8()){h.addClassName(m,"ie8")}x=7;while(x--){u.push(D.format(B.columnHeaderFormat));D.add("days",1)}c(C);if(typeof B.subscribe==="object"){for(x in B.subscribe){if(B.subscribe.hasOwnProperty(x)){C.subscribe(x,B.subscribe[x])}}}C._sel=[];if(!!B.selected){C.setSelected(B.selected,false)}if(!!B.viewStartDate){G=d(B.viewStartDate,B.format)}else{if(C._sel.length>0){G=d(C._sel[0])}else{G=d()}}C.viewStartDate=G.date(1);var F=({past:B.months-1,"today-past":B.months-1,any:B.months>2?Math.floor(B.months/2):0,"today-future":0,future:0})[this.settings.direction];if(F&&d().month()==d(C.viewStartDate).month()){C.viewStartDate=d(C.viewStartDate).subtract({M:F}).date(1)}if(typeof B.blackout==="function"){C.blackout=B.blackout}else{if(!!B.blackout){var r=e(B.blackout,B.parseSplitDelimiter,B.format);C.blackout=function(H){H=d(H).yearDay();if(H<1||!C._sel){return false}var j=r.length;while(j--){if(r[j].yearDay()===H){return true}}return false}}else{C.blackout=function(){return false}}}C.direction=C.directions[B.direction]?C.directions[B.direction]:C.directions.any;z=Math.max(B.months,1);while(z--){k=h.make("div",{"class":t.calendar},m);k.setAttribute("data-cal-index",z);if(B.months>1){if(z==Math.max(B.months-1,1)){h.addClassName(k,t.monthFirst)}else{if(z===0){h.addClassName(k,t.monthLast)}else{h.addClassName(k,t.monthMiddle)}}}q=h.make("div",{"class":t.title},k);if(!B.useYearNav){h.addClassName(q,t.disableYearNav)}h.make("a",{"class":t.previousYear},q);h.make("a",{"class":t.previousMonth},q);h.make("a",{"class":t.nextYear},q);h.make("a",{"class":t.nextMonth},q);l=h.make("span",{"class":t.caption},q);o=h.make("div",{"class":t.header},k);x=0;do{p=h.make("span",{},o);p.innerHTML=u[x]}while(++x<7);n=h.make("div",{"class":t.days},k);x=0;v=[];while(x++<42){v.push(h.make("span",{},n))}s.push({caption:l,days:v});if(z){h.make("div",{"class":t.monthSeparator},m)}}C.draw();h.addEvent(m,"mousedown",function(j,H){var i;if(h.hasClassName(H,t.nextMonth)){if(!C.disableNext&&C.publish("view-changed",C,["next-month"])!==false){C.viewStartDate.add("months",1);C.draw()}return false}else{if(h.hasClassName(H,t.previousMonth)){if(!C.disablePreviousMonth&&C.publish("view-changed",C,["previous-month"])!==false){C.viewStartDate.subtract("months",1);C.draw()}return false}else{if(h.hasClassName(H,t.nextYear)){if(!C.disableNext&&C.publish("view-changed",C,["next-year"])!==false){C.viewStartDate.add("years",1);C.draw()}return false}else{if(h.hasClassName(H,t.previousYear)){if(!C.disablePreviousMonth&&C.publish("view-changed",C,["previous-year"])!==false){C.viewStartDate.subtract("years",1);C.draw()}return false}else{if(h.hasClassName(H.parentNode,t.days)&&h.hasClassName(H,t.dayActive)&&(i=H.getAttribute("data-date"))){i=d(i,B.dayAttributeFormat).hours(12);if(C.publish("date-clicked",C,[i])!==false){switch(B.mode){case"multiple":if(!C.addSelected(i)){C.removeSelected(i)}break;case"range":C.addSelected(i);break;case"single":default:C.addSelected(i);break}}return false}}}}}return false});if(!!(B.attachTo=h.$(B.attachTo))){B.attachTo.appendChild(m)}};b.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:true,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:false,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:true,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:false,disableNextMonth:false,disablePreviousYear:false,disableNextYear:false,directions:{past:function(i){return d(i).yearDay()>=f.yearDay()},"today-past":function(i){return d(i).yearDay()>f.yearDay()},any:function(i){return false},"today-future":function(i){return d(i).yearDay()<f.yearDay()},future:function(i){return d(i).yearDay()<=f.yearDay()}},getSelectedAsDates:function(){var l=[];var k=0,j=this._sel.length;for(;k<j;k++){l.push(this._sel[k].toDate())}return l},getSelectedAsText:function(k){var m=[];var l=0,j=this._sel.length;for(;l<j;l++){m.push(this._sel[l].format(k||this.settings.format||"YYYY-MM-DD"))}return m},getSelectedRaw:function(){var l=[];var k=0,j=this._sel.length;for(;k<j;k++){l.push(d(this._sel[k]))}return l},getSelected:function(i){var j=this.getSelectedAsText(i);switch(this.settings.mode){case"range":j.splice(2);return j.join(this.settings.rangeDelimiter);case"multiple":return j.join(this.settings.multipleDelimiter);case"single":default:return j[0]}},isSelected:function(m){m=d(m).yearDay();if(m<1||!this._sel||this._sel.length<1){return false}switch(this.settings.mode){case"range":var j=this._sel[0]?this._sel[0].yearDay():0,k=this._sel[1]?this._sel[1].yearDay():0;if(j===m||k===m){return 1}if(!j||!k){return 0}if((m>j&&m<k)||(j<k&&m<j&&m>k)){return -1}return false;case"multiple":var l=this._sel.length;while(l--){if(this._sel[l].yearDay()===m){return true}}return false;case"single":default:return(this._sel[0]&&(this._sel[0].yearDay()===m))}return false},setSelected:function(l,j){var k,m=e(l,this.settings.parseSplitDelimiter,this.settings.format),n=e(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);k=n.length;while(k--){this.removeSelected(n[k],j)}k=m.length;while(k--){this.addSelected(m[k],j)}if(j!==false){this.draw()}},addSelected:function(i,j){i=d(i,this.settings.format).hours(12);if(this.settings.dayOutOfMonthClickable&&this.settings.mode!=="range"){this.makeSelectedDateVisible(i)}switch(this.settings.mode){case"multiple":if(!this.isSelected(i)){this._sel.push(i)}else{return false}break;case"range":if(this._sel.length!==1){this._sel=[i]}else{if(i.yearDay()>this._sel[0].yearDay()){this._sel[1]=i}else{this._sel=[i,this._sel[0]]}}break;case"single":default:this._sel=[i];break}this._sel.sort(function(k,l){return k.yearDay()-l.yearDay()});this.publish("change",this,[i]);if(j!==false){this.draw()}return true},makeSelectedDateVisible:function(i){outOfViewMonth=d(i).date("1").diff(this.viewStartDate,"months");if(outOfViewMonth<0){this.viewStartDate.subtract("months",1)}else{if(outOfViewMonth>0&&outOfViewMonth>=this.settings.months){this.viewStartDate.add("months",1)}}},removeSelected:function(j,k){j=d(j,this.settings.format).hours(12);var l=this._sel.length;while(l--){if(this._sel[l].yearDay()===j.yearDay()){this._sel.splice(l,1);this.publish("change",this,[j]);if(k!==false){this.draw()}return true}}return false},draw:function a(){var x=d(this.viewStartDate).hours(12),q,o=this.classes,n,l,w,t=0,m,u=0,v,z,p,y=this.settings,r;m=this.calendars.length;do{q=d(x).date(1);q.day(q.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);n=this.calendars[t];n.caption.innerHTML=x.format(this.settings.titleFormat);u=0;do{l=n.days[u];w=[];z=this.isSelected(q);if(z){w.push(({"-1":o.dayInRange,"1":o.daySelected,"true":o.daySelected})[z])}if(q.month()!=x.month()){w.push(o.dayOutOfMonth)}else{w.push(o.dayInMonth)}if(!(this.blackout(q)||this.direction(q)||(q.month()!=x.month()&&y.dayOutOfMonthClickable===false))||z>0){w.push(o.dayActive)}if(q.yearDay()===f.yearDay()){w.push(o.dayToday)}p=q.format(this.settings.dayAttributeFormat);if(y.dateClassMap[p]){w.push(y.dateClassMap[p])}l.innerHTML=q.format(y.dayNumberFormat);l.className=w.join(" ");l.setAttribute("data-date",p);q.add("days",1)}while(++u<42);x.add("months",1)}while(++t<m);if(y.directionScrolling){if(y.direction==="today-past"||y.direction==="past"){r=x.add({m:1}).diff(d(),"months",true);if(r<=0){this.disableNextMonth=false;h.removeClassName(this.container,o.disableNextMonth)}else{this.disableNextMonth=true;h.addClassName(this.container,o.disableNextMonth)}}else{if(y.direction==="today-future"||y.direction==="future"){r=x.subtract({m:1}).diff(d(),"months",true);if(r>y.months){this.disablePreviousMonth=false;h.removeClassName(this.container,o.disablePreviousMonth)}else{this.disablePreviousMonth=true;h.addClassName(this.container,o.disablePreviousMonth)}}}if(y.direction==="today-past"||y.direction==="past"){r=x.add({m:12}).diff(d(),"months",true);if(r<=-11){this.disableNextYear=false;h.removeClassName(this.container,o.disableNextYear)}else{this.disableNextYear=true;h.addClassName(this.container,o.disableNextYear)}}else{if(y.direction==="today-future"||y.direction==="future"){r=x.subtract({m:12}).diff(d(),"months",true);if(r>(11+y.months)){this.disablePreviousYear=false;h.removeClassName(this.container,o.disablePreviousYear)}else{this.disablePreviousYear=true;h.addClassName(this.container,o.disablePreviousYear)}}}}}};var e=function(n,k,l){var o=[];if(typeof n==="string"){n=n.split(k)}else{if(!h.isArray(n)){n=[n]}}var j=n.length,m=0;do{if(n[m]){o.push(d(n[m],l).hours(12))}}while(++m<j);return o};window.Kalendae=b;var h=b.util={isIE8:function(){return !!((/msie 8./i).test(navigator.appVersion)&&!(/opera/i).test(navigator.userAgent)&&window.ActiveXObject&&XDomainRequest&&!window.msPerformance)},$:function(i){return(typeof i=="string")?document.getElementById(i):i},$$:function(i){return document.querySelectorAll(i)},make:function(n,j,i){var m,l=document.createElement(n);if(!!j){for(m in j){if(j.hasOwnProperty(m)){l.setAttribute(m,j[m])}}}if(!!i){i.appendChild(l)}return l},isVisible:function(i){return i.offsetWidth>0||i.offsetHeight>0},getStyle:function(i,j){var k;if(i.currentStyle){k=i.currentStyle[j]}else{if(window.getComputedStyle){k=window.getComputedStyle(i,null)[j]}}return k},domReady:function(i){/in/.test(document.readyState)?setTimeout(function(){h.domReady(i)},9):i()},addEvent:function(j,k,i){var l=function(n){n=n||window.event;var o=n.target||n.srcElement;var m=i.apply(j,[n,o]);if(m===false){if(!!n.preventDefault){n.preventDefault()}else{n.returnValue=false;n.cancelBubble=true}}return m};if(j.attachEvent){j.attachEvent("on"+k,l)}else{j.addEventListener(k,l,false)}return l},removeEvent:function(i,j,k){if(i.detachEvent){i.detachEvent("on"+j,k)}else{i.removeEventListener(j,k,false)}},hasClassName:function(k,i){if(!(k=h.$(k))){return false}var j=k.className;return(j.length>0&&(j==i||new RegExp("(^|\\s)"+i+"(\\s|$)").test(j)))},addClassName:function(j,i){if(!(j=h.$(j))){return}if(!h.hasClassName(j,i)){j.className+=(j.className?" ":"")+i}},removeClassName:function(j,i){if(!(j=h.$(j))){return}j.className=h.trimString(j.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," "))},isFixed:function(i){do{if(h.getStyle(i,"position")==="fixed"){return true}}while((i=i.offsetParent));return false},scrollContainer:function(i){do{var j=h.getStyle(i,"overflow");if(j==="auto"||j==="scroll"){return i}}while((i=i.parentNode)&&i!=window.document.body);return null},getPosition:function(i,j){var l=i.offsetLeft,m=i.offsetTop,k={};if(!j){while((i=i.offsetParent)){l+=i.offsetLeft;m+=i.offsetTop}}k[0]=k.left=l;k[1]=k.top=m;return k},getHeight:function(i){return i.offsetHeight||i.scrollHeight},getWidth:function(i){return i.offsetWidth||i.scrollWidth},trimString:function(i){return i.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){var l=(arguments[0]===true),k={},m=l?1:0;var j=function(i,n){if(typeof n!=="object"){return}for(var o in n){if(n.hasOwnProperty(o)){if(l&&typeof i[o]==="object"&&typeof n[o]==="object"){_update(i[o],n[o])}else{i[o]=n[o]}}}return i};for(;m<arguments.length;m++){j(k,arguments[m])}return k},isArray:function(i){return Object.prototype.toString.call(i)=="[object Array]"}};if(typeof document.addEventListener==="function"){b.util.domReady(function(){var k=h.$$(".auto-kal"),l=k.length,j,m,n;while(l--){j=k[l];n=j.getAttribute("data-kal");m=(n==null||n=="")?{}:(new Function("return {"+n+"};"))();if(j.tagName==="INPUT"){new b.Input(j,m)}else{new b(h.merge(m,{attachTo:j}))}}})}b.Input=function(t,o){if(typeof document.addEventListener!=="function"&&!h.isIE8()){return}var k=this.input=h.$(t),q,i;if(!k||k.tagName!=="INPUT"){throw"First argument for Kalendae.Input must be an <input> element or a valid element id."}var r=this,m=r.classes,p=r.settings=h.merge(r.defaults,o);p.attachTo=window.document.body;if(!p.selected){p.selected=k.value}else{q=true}b.call(r,p);if(p.closeButton){i=h.make("a",{"class":m.closeButton},r.container);h.addEvent(i,"click",function(){k.blur()})}if(q){k.value=r.getSelected()}var j=r.container,n=false;j.style.display="none";h.addClassName(j,m.positioned);h.addEvent(j,"mousedown",function(u,v){n=true});h.addEvent(window.document,"mousedown",function(u,v){n=false});var s=function(u){r.viewStartDate=b.moment(u.value);r.setSelected(u.value)};h.addEvent(k,"focus",function(){r.show();s(this)});h.addEvent(k,"blur",function(){if(n&&h.isIE8()){n=false;k.focus()}else{s(this);r.hide()}});h.addEvent(k,"keyup",function(u){if(u.keyCode===13||u.which===13){s(this)}});var l=h.scrollContainer(k);if(l){h.addEvent(l,"scroll",function(u){k.blur()})}r.subscribe("change",function(){var v=b.moment(r.getSelected());var u=b.moment(k.value);if(!r.getSelected()){return}if(u.diff(v)!==0){k.value=r.getSelected();if(jQuery){jQuery(k).trigger("change").trigger("select")}}})};b.Input.prototype=h.merge(b.prototype,{defaults:h.merge(b.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:true,offsetLeft:0,offsetTop:0}),classes:h.merge(b.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var i=this.container,o=i.style,j=this.input,m=h.getPosition(j),k=h.scrollContainer(j),n=k?k.scrollTop:0,l=this.settings;o.display="";switch(l.side){case"left":o.left=(m.left-h.getWidth(i)+l.offsetLeft)+"px";o.top=(m.top+l.offsetTop-n)+"px";break;case"right":o.left=(m.left+h.getWidth(j))+"px";o.top=(m.top+l.offsetTop-n)+"px";break;case"top":o.left=(m.left+l.offsetLeft)+"px";o.top=(m.top-h.getHeight(i)+l.offsetTop-n)+"px";break;case"bottom":default:o.left=(m.left+l.offsetLeft)+"px";o.top=(m.top+h.getHeight(j)+l.offsetTop-n)+"px";break}o.position=h.isFixed(j)?"fixed":"absolute";this.publish("show",this)},hide:function(){this.container.style.display="none";this.publish("hide",this)}});
/*
    * MinPubSub, modified for use on Kalendae
    * Copyright(c) 2011 Daniel Lamb <daniellmb.com>
    * https://github.com/daniellmb/MinPubSub
    * MIT Licensed
    */
var c=function(j){if(!j){j=this}var i=j.c_||{};j.publish=function(p,o,k){var n=i[p],l=n?n.length:0,m;while(l--){m=n[l].apply(o,k||[]);if(typeof m==="boolean"){return m}}};j.subscribe=function(l,k,m){if(!i[l]){i[l]=[]}if(m){i[l].push(k)}else{i[l].unshift(k)}return[l,k]};j.unsubscribe=function(l){var n=i[l[0]],k=l[1],m=n?n.length:0;while(m--){if(n[m]===k){n.splice(m,1)}}}};(function(an){var R,ap="2.0.0",al=Math.round,y,E={},x=(typeof module!=="undefined"&&module.exports),m=/^\/?Date\((\-?\d+)/i,t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,X=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,aa=/\d\d?/,ab=/\d{1,3}/,ae=/\d{3}/,Z=/\d{1,4}/,ac=/[+\-]?\d{1,6}/,ah=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,ag=/Z|[\+\-]\d\d:?\d\d/i,ad=/T/i,af=/[\+\-]?\d+(\.\d{1,3})?/,B=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,A="YYYY-MM-DDTHH:mm:ssZ",C=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Y=/([\+\-]|\d\d)/gi,ai="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ao={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},r={},U="DDD w W M D d".split(" "),V="M D H h m s w W".split(" "),u={M:function(){return this.month()+1},MMM:function(i){return this.lang().monthsShort(this,i)},MMMM:function(i){return this.lang().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.lang().weekdaysMin(this,i)},ddd:function(i){return this.lang().weekdaysShort(this,i)},dddd:function(i){return this.lang().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return F(this.year()%100,2)},YYYY:function(){return F(this.year(),4)},YYYYY:function(){return F(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return F(~~(this.milliseconds()/10),2)},SSS:function(){return F(this.milliseconds(),3)},Z:function(){var i=-this.zone(),ar="+";if(i<0){i=-i;ar="-"}return ar+F(~~(i/60),2)+":"+F(~~i%60,2)},ZZ:function(){var i=-this.zone(),ar="+";if(i<0){i=-i;ar="-"}return ar+F(~~(10*i/6),4)},X:function(){return this.unix()}};function W(ar,i){return function(at){return F(ar.call(this,at),i)}}function T(i){return function(ar){return this.lang().ordinal(i.call(this,ar))}}while(U.length){y=U.pop();u[y+"o"]=T(u[y])}while(V.length){y=V.pop();u[y+y]=W(u[y],2)}u.DDDD=W(u.DDD,3);function D(){}function S(i){q(this,i)}function p(at){var i=this._data={},aA=at.years||at.year||at.y||0,ax=at.months||at.month||at.M||0,az=at.weeks||at.week||at.w||0,ar=at.days||at.day||at.d||0,au=at.hours||at.hour||at.h||0,aw=at.minutes||at.minute||at.m||0,ay=at.seconds||at.second||at.s||0,av=at.milliseconds||at.millisecond||at.ms||0;this._milliseconds=av+ay*1000+aw*60000+au*3600000;this._days=ar+az*7;this._months=ax+aA*12;i.milliseconds=av%1000;ay+=j(av/1000);i.seconds=ay%60;aw+=j(ay/60);i.minutes=aw%60;au+=j(aw/60);i.hours=au%24;ar+=j(au/24);ar+=az*7;i.days=ar%30;ax+=j(ar/30);i.months=ax%12;aA+=j(ax/12);i.years=aA}function q(ar,at){for(var au in at){if(at.hasOwnProperty(au)){ar[au]=at[au]}}return ar}function j(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function F(i,at){var ar=i+"";while(ar.length<at){ar="0"+ar}return ar}function k(aw,at,au){var ax=at._milliseconds,ar=at._days,av=at._months,i;if(ax){aw._d.setTime(+aw+ax*au)}if(ar){aw.date(aw.date()+ar*au)}if(av){i=aw.date();aw.date(1).month(aw.month()+av*au).date(Math.min(i,aw.daysInMonth()))}}function z(i){return Object.prototype.toString.call(i)==="[object Array]"}function n(ar,at){var aw=Math.min(ar.length,at.length),ax=Math.abs(ar.length-at.length),au=0,av;for(av=0;av<aw;av++){if(~~ar[av]!==~~at[av]){au++}}return au+ax}D.prototype={set:function(ar){var au,at;for(at in ar){au=ar[at];if(typeof au==="function"){this[at]=au}else{this["_"+at]=au}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(au){var ar,at,aw,av;if(!this._monthsParse){this._monthsParse=[]}for(ar=0;ar<12;ar++){if(!this._monthsParse[ar]){at=R([2000,ar]);aw="^"+this.months(at,"")+"|^"+this.monthsShort(at,"");this._monthsParse[ar]=new RegExp(aw.replace(".",""),"i")}if(this._monthsParse[ar].test(au)){return ar}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(i){var ar=this._longDateFormat[i];if(!ar&&this._longDateFormat[i.toUpperCase()]){ar=this._longDateFormat[i.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(at){return at.slice(1)});this._longDateFormat[i]=ar}return ar},meridiem:function(i,at,ar){if(i>11){return ar?"pm":"PM"}else{return ar?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(i,ar){var at=this._calendar[i];return typeof at==="function"?at.apply(ar):at},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(ar,av,au,i){var at=this._relativeTime[au];return(typeof at==="function")?at(ar,av,au,i):at.replace(/%d/i,ar)},pastFuture:function(i,at){var ar=this._relativeTime[i>0?"future":"past"];return typeof ar==="function"?ar(at):ar.replace(/%s/i,at)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",preparse:function(i){return i},postformat:function(i){return i},week:function(i){return aq(i,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};function G(i,ar){ar.abbr=i;if(!E[i]){E[i]=new D()}E[i].set(ar);return E[i]}function v(i){if(!i){return R.fn._lang}if(!E[i]&&x){require("./lang/"+i)}return E[i]}function ak(i){if(i.match(/\[.*\]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function O(at){var ar=at.match(t),au,av;for(au=0,av=ar.length;au<av;au++){if(u[ar[au]]){ar[au]=u[ar[au]]}else{ar[au]=ak(ar[au])}}return function(i){var aw="";for(au=0;au<av;au++){aw+=typeof ar[au].call==="function"?ar[au].call(i,at):ar[au]}return aw}}function s(au,ar){var at=5;function av(i){return au.lang().longDateFormat(i)||i}while(at--&&H.test(ar)){ar=ar.replace(H,av)}if(!r[ar]){r[ar]=O(ar)}return r[ar](au)}function w(i){switch(i){case"DDDD":return ae;case"YYYY":return Z;case"YYYYY":return ac;case"S":case"SS":case"SSS":case"DDD":return ab;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return ah;case"X":return af;case"Z":case"ZZ":return ag;case"T":return ad;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return aa;default:return new RegExp(i.replace("\\",""))}}function l(aw,av,at){var i,ar,au=at._a;switch(aw){case"M":case"MM":au[1]=(av==null)?0:~~av-1;break;case"MMM":case"MMMM":i=v(at._l).monthsParse(av);if(i!=null){au[1]=i}else{at._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(av!=null){au[2]=~~av}break;case"YY":au[0]=~~av+(~~av>68?1900:2000);break;case"YYYY":case"YYYYY":au[0]=~~av;break;case"a":case"A":at._isPm=((av+"").toLowerCase()==="pm");break;case"H":case"HH":case"h":case"hh":au[3]=~~av;break;case"m":case"mm":au[4]=~~av;break;case"s":case"ss":au[5]=~~av;break;case"S":case"SS":case"SSS":au[6]=~~(("0."+av)*1000);break;case"X":at._d=new Date(parseFloat(av)*1000);break;case"Z":case"ZZ":at._useUTC=true;i=(av+"").match(Y);if(i&&i[1]){at._tzh=~~i[1]}if(i&&i[2]){at._tzm=~~i[2]}if(i&&i[0]==="+"){at._tzh=-at._tzh;at._tzm=-at._tzm}break}if(av==null){at._isValid=false}}function o(ar){var au,at,av=[];if(ar._d){return}for(au=0;au<7;au++){ar._a[au]=av[au]=(ar._a[au]==null)?(au===2?1:0):ar._a[au]}av[3]+=ar._tzh||0;av[4]+=ar._tzm||0;at=new Date(0);if(ar._useUTC){at.setUTCFullYear(av[0],av[1],av[2]);at.setUTCHours(av[3],av[4],av[5],av[6])}else{at.setFullYear(av[0],av[1],av[2]);at.setHours(av[3],av[4],av[5],av[6])}ar._d=at}function L(ar){var aw=ar._f.match(t),av=ar._i,at,au;ar._a=[];for(at=0;at<aw.length;at++){au=(w(aw[at]).exec(av)||[])[0];if(au){av=av.slice(av.indexOf(au)+au.length)}if(u[aw[at]]){l(aw[at],au,ar)}}if(ar._isPm&&ar._a[3]<12){ar._a[3]+=12}if(ar._isPm===false&&ar._a[3]===12){ar._a[3]=0}o(ar)}function K(at){var ay,az,ar,ax=99,aw,au,av;while(at._f.length){ay=q({},at);ay._f=at._f.pop();L(ay);az=new S(ay);if(az.isValid()){ar=az;break}av=n(ay._a,az.toArray());if(av<ax){ax=av;ar=az}}q(at,ar)}function J(ar){var at,au=ar._i;if(B.exec(au)){ar._f="YYYY-MM-DDT";for(at=0;at<4;at++){if(C[at][1].exec(au)){ar._f+=C[at][0];break}}if(ag.exec(au)){ar._f+=" Z"}L(ar)}else{ar._d=new Date(au)}}function I(i){var ar=i._i,at=m.exec(ar);if(ar===an){i._d=new Date()}else{if(at){i._d=new Date(+at[1])}else{if(typeof ar==="string"){J(i)}else{if(z(ar)){i._a=ar.slice(0);o(i)}else{i._d=ar instanceof Date?new Date(+ar):new Date(ar)}}}}}function am(au,at,av,i,ar){return ar.relativeTime(at||1,!!av,au,i)}function aj(av,ay,au){var ax=al(Math.abs(av)/1000),aw=al(ax/60),at=al(aw/60),ar=al(at/24),az=al(ar/365),i=ax<45&&["s",ax]||aw===1&&["m"]||aw<45&&["mm",aw]||at===1&&["h"]||at<22&&["hh",at]||ar===1&&["d"]||ar<=25&&["dd",ar]||ar<=45&&["M"]||ar<345&&["MM",al(ar/30)]||az===1&&["y"]||["yy",az];i[2]=ay;i[3]=av>0;i[4]=au;return am.apply({},i)}function aq(av,at,au){var ar=au-at,i=au-av.day();if(i>ar){i-=7}if(i<ar-7){i+=7}return Math.ceil(R(av).add("d",i).dayOfYear()/7)}function Q(i){var at=i._i,ar=i._f;if(at===null||at===""){return null}if(typeof at==="string"){i._i=at=v().preparse(at)}if(R.isMoment(at)){i=q({},at);i._d=new Date(+at._d)}else{if(ar){if(z(ar)){K(i)}else{L(i)}}else{I(i)}}return new S(i)}R=function(ar,i,at){return Q({_i:ar,_f:i,_l:at,_isUTC:false})};R.utc=function(ar,i,at){return Q({_useUTC:true,_isUTC:true,_l:at,_i:ar,_f:i})};R.unix=function(i){return R(i*1000)};R.duration=function(ar,av){var at=R.isDuration(ar),au=(typeof ar==="number"),i=(at?ar._data:(au?{}:ar)),aw;if(au){if(av){i[av]=ar}else{i.milliseconds=ar}}aw=new p(i);if(at&&ar.hasOwnProperty("_lang")){aw._lang=ar._lang}return aw};R.version=ap;R.defaultFormat=A;R.lang=function(at,au){var ar;if(!at){return R.fn._lang._abbr}if(au){G(at,au)}else{if(!E[at]){v(at)}}R.duration.fn._lang=R.fn._lang=v(at)};R.langData=function(i){if(i&&i._lang&&i._lang._abbr){i=i._lang._abbr}return v(i)};R.isMoment=function(i){return i instanceof S};R.isDuration=function(i){return i instanceof p};R.fn=S.prototype={clone:function(){return R(this)},valueOf:function(){return +this._d},unix:function(){return Math.floor(+this._d/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return R.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!n(this._a,(this._isUTC?R.utc(this._a):R(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(i){var ar=s(this,i||R.defaultFormat);return this.lang().postformat(ar)},add:function(ar,at){var i;if(typeof ar==="string"){i=R.duration(+at,ar)}else{i=R.duration(ar,at)}k(this,i,1);return this},subtract:function(ar,at){var i;if(typeof ar==="string"){i=R.duration(+at,ar)}else{i=R.duration(ar,at)}k(this,i,-1);return this},diff:function(at,aw,i){var av=this._isUTC?R(at).utc():R(at).local(),ax=(this.zone()-av.zone())*60000,ar,au;if(aw){aw=aw.replace(/s$/,"")}if(aw==="year"||aw==="month"){ar=(this.daysInMonth()+av.daysInMonth())*43200000;au=((this.year()-av.year())*12)+(this.month()-av.month());au+=((this-R(this).startOf("month"))-(av-R(av).startOf("month")))/ar;if(aw==="year"){au=au/12}}else{ar=(this-av)-ax;au=aw==="second"?ar/1000:aw==="minute"?ar/60000:aw==="hour"?ar/3600000:aw==="day"?ar/86400000:aw==="week"?ar/604800000:ar}return i?au:j(au)},from:function(i,ar){return R.duration(this.diff(i)).lang(this.lang()._abbr).humanize(!ar)},fromNow:function(i){return this.from(R(),i)},calendar:function(){var i=this.diff(R().startOf("day"),"days",true),ar=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(ar,this))},isLeapYear:function(){var i=this.year();return(i%4===0&&i%100!==0)||i%400===0},isDST:function(){return(this.zone()<R([this.year()]).zone()||this.zone()<R([this.year(),5]).zone())},day:function(ar){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();return ar==null?i:this.add({d:ar-i})},startOf:function(i){i=i.replace(/s$/,"");switch(i){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.day(0)}return this},endOf:function(i){return this.startOf(i).add(i.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(i,ar){ar=typeof ar!=="undefined"?ar:"millisecond";return +this.clone().startOf(ar)>+R(i).startOf(ar)},isBefore:function(i,ar){ar=typeof ar!=="undefined"?ar:"millisecond";return +this.clone().startOf(ar)<+R(i).startOf(ar)},isSame:function(i,ar){ar=typeof ar!=="undefined"?ar:"millisecond";return +this.clone().startOf(ar)===+R(i).startOf(ar)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return R.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(ar){var i=al((R(this).startOf("day")-R(this).startOf("year"))/86400000)+1;return ar==null?i:this.add("d",(ar-i))},isoWeek:function(i){var ar=aq(this,1,4);return i==null?ar:this.add("d",(i-ar)*7)},week:function(i){var ar=this.lang().week(this);return i==null?ar:this.add("d",(i-ar)*7)},lang:function(i){if(i===an){return this._lang}else{this._lang=v(i);return this}}};function P(ar,i){R.fn[ar]=R.fn[ar+"s"]=function(at){var au=this._isUTC?"UTC":"";if(at!=null){this._d["set"+au+i](at);return this}else{return this._d["get"+au+i]()}}}for(y=0;y<ai.length;y++){P(ai[y].toLowerCase().replace(/s$/,""),ai[y])}P("year","FullYear");R.fn.days=R.fn.day;R.fn.weeks=R.fn.week;R.fn.isoWeeks=R.fn.isoWeek;R.duration.fn=p.prototype={weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+this._months*2592000000},humanize:function(at){var i=+this,ar=aj(i,!at,this.lang());if(at){ar=this.lang().pastFuture(i,ar)}return this.lang().postformat(ar)},lang:R.fn.lang};function N(i){R.duration.fn[i]=function(){return this._data[i]}}function M(ar,i){R.duration.fn["as"+ar]=function(){return +this/i}}for(y in ao){if(ao.hasOwnProperty(y)){M(y,ao[y]);N(y.toLowerCase())}}M("Weeks",604800000);R.lang("en",{ordinal:function(ar){var i=ar%10,at=(~~(ar%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return ar+at}});this["moment"]=R}).call(typeof b==="undefined"?window:b);if(!b.moment){if(window.moment){b.moment=window.moment}else{throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page."}}d=b.moment;d.fn.stripTime=function(){this._d=new Date(Math.floor(this._d.valueOf()/86400000)*86400000);return this};d.fn.yearDay=function(i){var j=Math.floor(this._d/86400000);return(typeof i==="undefined")?j:this.add({d:i-j})};f=b.moment().stripTime();if(typeof jQuery!=="undefined"&&(typeof document.addEventListener==="function"||h.isIE8())){jQuery.fn.kalendae=function(i){this.each(function(k,j){if(j.tagName==="INPUT"){$(j).data("kalendae",new b.Input(j,i))}else{$(j).data("kalendae",new b($.extend({},{attachTo:j},i)))}});return this}}})();/* jquery.selectBoxIt - v3.8.1 - 2013-10-17
* http://www.selectboxit.com
* Copyright (c) 2013 Greg Franko; Licensed MIT*/
(function(a){a(window.jQuery,window,document)}(function(a,e,b,d){a.widget("selectBox.selectBoxIt",{VERSION:"3.8.1",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:true,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:true,isMobile:function(){var f=navigator.userAgent||navigator.vendor||e.opera;return(/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(f)},"native":false,aggressiveChange:false,selectWhenHidden:true,viewport:a(e),similarSearch:false,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:false,customShowHideEvent:false,autoWidth:true,html:true,populate:"",dynamicPositioning:true,hideCurrent:false},getThemes:function(){var f=this,g=a(f.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",enabled:"enabled",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",enabled:"ui-state-enabled",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+g,hover:"ui-btn-hover-"+g,enabled:"ui-enabled",disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+g,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+g,container:"jquerymobile",open:"selectboxit-open"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",enabled:"selectboxit-enabled",disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},isDeferred:function(f){return a.isPlainObject(f)&&f.promise&&f.done},_create:function(f){var h=this,g=h.options.populate,i=h.options.theme;if(!h.element.is("select")){return}h.widgetProto=a.Widget.prototype;h.originalElem=h.element[0];h.selectBox=h.element;if(h.options.populate&&h.add&&!f){h.add(g)}h.selectItems=h.element.find("option");h.firstSelectItem=h.selectItems.slice(0,1);h.documentHeight=a(b).height();h.theme=a.isPlainObject(i)?a.extend({},h.getThemes()["default"],i):h.getThemes()[i]?h.getThemes()[i]:h.getThemes()["default"];h.currentFocus=0;h.blur=true;h.textArray=[];h.currentIndex=0;h.currentText="";h.flipped=false;if(!f){h.selectBoxStyles=h.selectBox.attr("style")}h._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(h.theme)._eventHandlers();if(h.originalElem.disabled&&h.disable){h.disable()}if(h._ariaAccessibility){h._ariaAccessibility()}h.isMobile=h.options.isMobile();if(h._mobile){h._mobile()}if(h.options["native"]){this._applyNativeSelect()}h.triggerEvent("create");return h},_createDropdownButton:function(){var k=this,g=k.originalElemId=k.originalElem.id||"",i=k.originalElemValue=k.originalElem.value||"",h=k.originalElemName=k.originalElem.name||"",f=k.options.copyClasses,j=k.selectBox.attr("class")||"";k.dropdownText=a("<span/>",{id:g&&g+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:k.firstSelectItem.text()}).attr("data-val",i);k.dropdownImageContainer=a("<span/>",{"class":"selectboxit-option-icon-container"});k.dropdownImage=a("<i/>",{id:g&&g+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"});k.dropdown=a("<span/>",{id:g&&g+"SelectBoxIt","class":"selectboxit "+(f==="button"?j:"")+" "+(k.selectBox.prop("disabled")?k.theme.disabled:k.theme.enabled),name:h,tabindex:k.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(k.dropdownImageContainer.append(k.dropdownImage)).append(k.dropdownText);k.dropdownContainer=a("<span/>",{id:g&&g+"SelectBoxItContainer","class":"selectboxit-container "+k.theme.container+" "+(f==="container"?j:"")}).append(k.dropdown);return k},_createUnorderedList:function(){var w=this,m,s,t,o,p,q,r,j="",u=w.originalElemId||"",f=a("<ul/>",{id:u&&u+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1}),h,i,g,l,k,v;if(!w.options.showFirstOption){w.selectItems.first().attr("disabled","disabled");w.selectItems=w.selectBox.find("option").slice(1)}w.selectItems.each(function(x){k=a(this);s="";t="";m=k.prop("disabled");o=k.attr("data-icon")||"";p=k.attr("data-iconurl")||"";q=p?"selectboxit-option-icon-url":"";r=p?"style=\"background-image:url('"+p+"');\"":"";h=k.attr("data-selectedtext");i=k.attr("data-text");l=i?i:k.text();v=k.parent();if(v.is("optgroup")){s="selectboxit-optgroup-option";if(k.index()===0){t='<span class="selectboxit-optgroup-header '+v.first().attr("class")+'"data-disabled="true">'+v.first().attr("label")+"</span>"}}k.attr("value",this.value);j+=t+'<li data-id="'+x+'" data-val="'+this.value+'" data-disabled="'+m+'" class="'+s+" selectboxit-option "+(a(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+o+" "+(q||w.theme.container)+'"'+r+"></i></span>"+(w.options.html?l:w.htmlEscape(l))+"</a></li>";g=k.attr("data-search");w.textArray[x]=m?"":g?g:l;if(this.selected){w._setText(w.dropdownText,h||l);w.currentFocus=x}});if((w.options.defaultText||w.selectBox.attr("data-text"))){var n=w.options.defaultText||w.selectBox.attr("data-text");w._setText(w.dropdownText,n);w.options.defaultText=n}f.append(j);w.list=f;w.dropdownContainer.append(w.list);w.listItems=w.list.children("li");w.listAnchors=w.list.find("a");w.listItems.first().addClass("selectboxit-option-first");w.listItems.last().addClass("selectboxit-option-last");w.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(w.theme.disabled);w.dropdownImage.addClass(w.selectBox.attr("data-icon")||w.options.defaultIcon||w.listItems.eq(w.currentFocus).find("i").attr("class"));w.dropdownImage.attr("style",w.listItems.eq(w.currentFocus).find("i").attr("style"));return w},_replaceSelectBox:function(){var k=this,h,j=k.originalElem.id||"",l=k.selectBox.attr("data-size"),i=k.listSize=l===d?"auto":l==="0"||"size"==="auto"?"auto":+l,f,g;k.selectBox.css("display","none").after(k.dropdownContainer);k.dropdownContainer.appendTo("body").addClass("selectboxit-rendering");h=k.dropdown.height();k.downArrow=a("<i/>",{id:j&&j+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"});k.downArrowContainer=a("<span/>",{id:j&&j+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(k.downArrow);k.dropdown.append(k.downArrowContainer);k.listItems.removeClass("selectboxit-selected").eq(k.currentFocus).addClass("selectboxit-selected");f=k.downArrowContainer.outerWidth(true);g=k.dropdownImage.outerWidth(true);if(k.options.autoWidth){k.dropdown.css({width:"auto"}).css({width:k.list.outerWidth(true)+f+g});k.list.css({"min-width":k.dropdown.width()})}k.dropdownText.css({"max-width":k.dropdownContainer.outerWidth(true)-(f+g)});k.selectBox.after(k.dropdownContainer);k.dropdownContainer.removeClass("selectboxit-rendering");if(a.type(i)==="number"){k.maxHeight=k.listAnchors.outerHeight(true)*i}return k},_scrollToView:function(n){var m=this,h=m.listItems.eq(m.currentFocus),l=m.list.scrollTop(),g=h.height(),j=h.position().top,f=Math.abs(j),k=m.list.height(),i;if(n==="search"){if(k-j<g){m.list.scrollTop(l+(j-(k-g)))}else{if(j<-1){m.list.scrollTop(j-g)}}}else{if(n==="up"){if(j<-1){m.list.scrollTop(l-f)}}else{if(n==="down"){if(k-j<g){m.list.scrollTop((l+(f-k+g)))}}}}return m},_callbackSupport:function(f){var g=this;if(a.isFunction(f)){f.call(g,g.dropdown)}return g},_setText:function(g,f){var h=this;if(h.options.html){g.html(f)}else{g.text(f)}return h},open:function(f){var i=this,j=i.options.showEffect,l=i.options.showEffectSpeed,k=i.options.showEffectOptions,h=i.options["native"],g=i.isMobile;if(!i.listItems.length||i.dropdown.hasClass(i.theme.disabled)){return i}if((!h&&!g)&&!this.list.is(":visible")){i.triggerEvent("open");if(i._dynamicPositioning&&i.options.dynamicPositioning){i._dynamicPositioning()}if(j==="none"){i.list.show()}else{if(j==="show"||j==="slideDown"||j==="fadeIn"){i.list[j](l)}else{i.list.show(j,k,l)}}i.list.promise().done(function(){i._scrollToView("search");i.triggerEvent("opened")})}i._callbackSupport(f);return i},close:function(f){var l=this,g=l.options.hideEffect,i=l.options.hideEffectSpeed,h=l.options.hideEffectOptions,k=l.options["native"],j=l.isMobile;if((!k&&!j)&&l.list.is(":visible")){l.triggerEvent("close");if(g==="none"){l.list.hide()}else{if(g==="hide"||g==="slideUp"||g==="fadeOut"){l.list[g](i)}else{l.list.hide(g,h,i)}}l.list.promise().done(function(){l.triggerEvent("closed")})}l._callbackSupport(f);return l},toggle:function(){var g=this,f=g.list.is(":visible");if(f){g.close()}else{if(!f){g.open()}}},_keyMappings:{"38":"up","40":"down","13":"enter","8":"backspace","9":"tab","32":"space","27":"esc"},_keydownMethods:function(){var g=this,f=g.list.is(":visible")||!g.options.keydownOpen;return{down:function(){if(g.moveDown&&f){g.moveDown()}},up:function(){if(g.moveUp&&f){g.moveUp()}},enter:function(){var h=g.listItems.eq(g.currentFocus);g._update(h);if(h.attr("data-preventclose")!=="true"){g.close()}g.triggerEvent("enter")},tab:function(){g.triggerEvent("tab-blur");g.close()},backspace:function(){g.triggerEvent("backspace")},esc:function(){g.close()}}},_eventHandlers:function(){var m=this,k=m.options.nativeMousedown,h=m.options.customShowHideEvent,f,g,i=m.focusClass,j=m.hoverClass,l=m.openClass;this.dropdown.on({"click.selectBoxIt":function(){m.dropdown.trigger("focus",true);if(!m.originalElem.disabled){m.triggerEvent("click");if(!k&&!h){m.toggle()}}},"mousedown.selectBoxIt":function(){a(this).data("mdown",true);m.triggerEvent("mousedown");if(k&&!h){m.toggle()}},"mouseup.selectBoxIt":function(){m.triggerEvent("mouseup")},"blur.selectBoxIt":function(){if(m.blur){m.triggerEvent("blur");m.close();a(this).removeClass(i)}},"focus.selectBoxIt":function(n,o){var p=a(this).data("mdown");a(this).removeData("mdown");if(!p&&!o){setTimeout(function(){m.triggerEvent("tab-focus")},0)}if(!o){if(!a(this).hasClass(m.theme.disabled)){a(this).addClass(i)}m.triggerEvent("focus")}},"keydown.selectBoxIt":function(o){var n=m._keyMappings[o.keyCode],p=m._keydownMethods()[n];if(p){p();if(m.options.keydownOpen&&(n==="up"||n==="down")){m.open()}}if(p&&n!=="tab"){o.preventDefault()}},"keypress.selectBoxIt":function(p){var o=p.charCode||p.keyCode,q=m._keyMappings[p.charCode||p.keyCode],n=String.fromCharCode(o);if(m.search&&(!q||(q&&q==="space"))){m.search(n,true,true)}if(q==="space"){p.preventDefault()}},"mouseenter.selectBoxIt":function(){m.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){m.triggerEvent("mouseleave")}});m.list.on({"mouseover.selectBoxIt":function(){m.blur=false},"mouseout.selectBoxIt":function(){m.blur=true},"focusin.selectBoxIt":function(){m.dropdown.trigger("focus",true)}});m.list.on({"mousedown.selectBoxIt":function(){m._update(a(this));m.triggerEvent("option-click");if(a(this).attr("data-disabled")==="false"&&a(this).attr("data-preventclose")!=="true"){m.close()}setTimeout(function(){m.dropdown.trigger("focus",true)},0)},"focusin.selectBoxIt":function(){m.listItems.not(a(this)).removeAttr("data-active");a(this).attr("data-active","");var n=m.list.is(":hidden");if((m.options.searchWhenHidden&&n)||m.options.aggressiveChange||(n&&m.options.selectWhenHidden)){m._update(a(this))}a(this).addClass(i)},"mouseup.selectBoxIt":function(){if(k&&!h){m._update(a(this));m.triggerEvent("option-mouseup");if(a(this).attr("data-disabled")==="false"&&a(this).attr("data-preventclose")!=="true"){m.close()}}},"mouseenter.selectBoxIt":function(){if(a(this).attr("data-disabled")==="false"){m.listItems.removeAttr("data-active");a(this).addClass(i).attr("data-active","");m.listItems.not(a(this)).removeClass(i);a(this).addClass(i);m.currentFocus=+a(this).attr("data-id")}},"mouseleave.selectBoxIt":function(){if(a(this).attr("data-disabled")==="false"){m.listItems.not(a(this)).removeClass(i).removeAttr("data-active");a(this).addClass(i);m.currentFocus=+a(this).attr("data-id")}},"blur.selectBoxIt":function(){a(this).removeClass(i)}},".selectboxit-option");m.list.on({"click.selectBoxIt":function(n){n.preventDefault()}},"a");m.selectBox.on({"change.selectBoxIt, internal-change.selectBoxIt":function(p,q){var o,n;if(!q){o=m.list.find('li[data-val="'+m.originalElem.value+'"]');if(o.length){m.listItems.eq(m.currentFocus).removeClass(m.focusClass);m.currentFocus=+o.attr("data-id")}}o=m.listItems.eq(m.currentFocus);n=o.attr("data-selectedtext");f=o.attr("data-text");g=f?f:o.find("a").text();m._setText(m.dropdownText,n||g);m.dropdownText.attr("data-val",m.originalElem.value);if(o.find("i").attr("class")){m.dropdownImage.attr("class",o.find("i").attr("class")).addClass("selectboxit-default-icon");m.dropdownImage.attr("style",o.find("i").attr("style"))}m.triggerEvent("changed")},"disable.selectBoxIt":function(){m.dropdown.addClass(m.theme.disabled)},"enable.selectBoxIt":function(){m.dropdown.removeClass(m.theme.disabled)},"open.selectBoxIt":function(){var o=m.list.find("li[data-val='"+m.dropdownText.attr("data-val")+"']"),n;if(!o.length){o=m.listItems.not("[data-disabled=true]").first()}m.currentFocus=+o.attr("data-id");n=m.listItems.eq(m.currentFocus);m.dropdown.addClass(l).removeClass(j).addClass(i);m.listItems.removeClass(m.selectedClass).removeAttr("data-active").not(n).removeClass(i);n.addClass(m.selectedClass).addClass(i);if(m.options.hideCurrent){m.listItems.show();n.hide()}},"close.selectBoxIt":function(){m.dropdown.removeClass(l)},"blur.selectBoxIt":function(){m.dropdown.removeClass(i)},"mouseenter.selectBoxIt":function(){if(!a(this).hasClass(m.theme.disabled)){m.dropdown.addClass(j)}},"mouseleave.selectBoxIt":function(){m.dropdown.removeClass(j)},destroy:function(n){n.preventDefault();n.stopPropagation()}});return m},_update:function(k){var l=this,f,g,i,j=l.options.defaultText||l.selectBox.attr("data-text"),h=l.listItems.eq(l.currentFocus);if(k.attr("data-disabled")==="false"){f=l.listItems.eq(l.currentFocus).attr("data-selectedtext");g=h.attr("data-text");i=g?g:h.text();if((j&&l.options.html?l.dropdownText.html()===j:l.dropdownText.text()===j)&&l.selectBox.val()===k.attr("data-val")){l.triggerEvent("change")}else{l.selectBox.val(k.attr("data-val"));l.currentFocus=+k.attr("data-id");if(l.originalElem.value!==l.dropdownText.attr("data-val")){l.triggerEvent("change")}}}},_addClasses:function(l){var n=this,i=n.focusClass=l.focus,j=n.hoverClass=l.hover,g=l.button,k=l.list,f=l.arrow,h=l.container,m=n.openClass=l.open;n.selectedClass="selectboxit-selected";n.downArrow.addClass(n.selectBox.attr("data-downarrow")||n.options.downArrowIcon||f);n.dropdownContainer.addClass(h);n.dropdown.addClass(g);n.list.addClass(k);return n},refresh:function(f,g){var h=this;h._destroySelectBoxIt()._create(true);if(!g){h.triggerEvent("refresh")}h._callbackSupport(f);return h},htmlEscape:function(f){return String(f).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(g){var h=this,f=h.options.showFirstOption?h.currentFocus:((h.currentFocus-1)>=0?h.currentFocus:0);h.selectBox.trigger(g,{selectbox:h.selectBox,selectboxOption:h.selectItems.eq(f),dropdown:h.dropdown,dropdownOption:h.listItems.eq(h.currentFocus)});return h},_copyAttributes:function(){var f=this;if(f._addSelectBoxAttributes){f._addSelectBoxAttributes()}return f},_realOuterWidth:function(g){if(g.is(":visible")){return g.outerWidth(true)}var i=this,f=g.clone(),h;f.css({visibility:"hidden",display:"block",position:"absolute"}).appendTo("body");h=f.outerWidth(true);f.remove();return h}});var c=a.selectBox.selectBoxIt.prototype;c.add=function(g,f){this._populate(g,function(h){var n=this,j=a.type(h),o,p=0,i,k=[],l=n._isJSON(h),m=l&&n._parseJSON(h);if(h&&(j==="array"||(l&&m.data&&a.type(m.data)==="array"))||(j==="object"&&h.data&&a.type(h.data)==="array")){if(n._isJSON(h)){h=m}if(h.data){h=h.data}for(i=h.length;p<=i-1;p+=1){o=h[p];if(a.isPlainObject(o)){k.push(a("<option/>",o))}else{if(a.type(o)==="string"){k.push(a("<option/>",{text:o,value:o}))}}}n.selectBox.append(k)}else{if(h&&j==="string"&&!n._isJSON(h)){n.selectBox.append(h)}else{if(h&&j==="object"){n.selectBox.append(a("<option/>",h))}else{if(h&&n._isJSON(h)&&a.isPlainObject(n._parseJSON(h))){n.selectBox.append(a("<option/>",n._parseJSON(h)))}}}}if(n.dropdown){n.refresh(function(){n._callbackSupport(f)},true)}else{n._callbackSupport(f)}return n})};c._parseJSON=function(f){return(JSON&&JSON.parse&&JSON.parse(f))||a.parseJSON(f)};c._isJSON=function(f){var i=this,h;try{h=i._parseJSON(f);return true}catch(g){return false}};c._populate=function(g,f){var h=this;g=a.isFunction(g)?g.call():g;if(h.isDeferred(g)){g.done(function(i){f.call(h,i)})}else{f.call(h,g)}return h};c._ariaAccessibility=function(){var g=this,f=a("label[for='"+g.originalElem.id+"']");g.dropdownContainer.attr({role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false","aria-owns":g.list[0].id});g.dropdownText.attr({"aria-live":"polite"});g.dropdown.on({"disable.selectBoxIt":function(){g.dropdownContainer.attr("aria-disabled","true")},"enable.selectBoxIt":function(){g.dropdownContainer.attr("aria-disabled","false")}});if(f.length){g.dropdownContainer.attr("aria-labelledby",f[0].id)}g.list.attr({role:"listbox","aria-hidden":"true"});g.listItems.attr({role:"option"});g.selectBox.on({"open.selectBoxIt":function(){g.list.attr("aria-hidden","false");g.dropdownContainer.attr("aria-expanded","true")},"close.selectBoxIt":function(){g.list.attr("aria-hidden","true");g.dropdownContainer.attr("aria-expanded","false")}});return g};c._addSelectBoxAttributes=function(){var f=this;f._addAttributes(f.selectBox.prop("attributes"),f.dropdown);f.selectItems.each(function(g){f._addAttributes(a(this).prop("attributes"),f.listItems.eq(g))});return f};c._addAttributes=function(f,g){var h=this,i=h.options.copyAttributes;if(f.length){a.each(f,function(j,k){var l=(k.name).toLowerCase(),m=k.value;if(m!=="null"&&(a.inArray(l,i)!==-1||l.indexOf("data")!==-1)){g.attr(l,m)}})}return h};c.destroy=function(f){var g=this;g._destroySelectBoxIt();g.widgetProto.destroy.call(g);g._callbackSupport(f);return g};c._destroySelectBoxIt=function(){var f=this;f.dropdown.off(".selectBoxIt");if(a.contains(f.dropdownContainer[0],f.originalElem)){f.dropdownContainer.before(f.selectBox)}f.dropdownContainer.remove();f.selectBox.removeAttr("style").attr("style",f.selectBoxStyles);f.triggerEvent("destroy");return f};c.disable=function(f){var g=this;if(!g.options.disabled){g.close();g.selectBox.attr("disabled","disabled");g.dropdown.removeAttr("tabindex").removeClass(g.theme.enabled).addClass(g.theme.disabled);g.setOption("disabled",true);g.triggerEvent("disable")}g._callbackSupport(f);return g};c.disableOption=function(j,f){var k=this,g,h,i,l=a.type(j);if(l==="number"){k.close();g=k.selectBox.find("option").eq(j);k.triggerEvent("disable-option");g.attr("disabled","disabled");k.listItems.eq(j).attr("data-disabled","true").addClass(k.theme.disabled);if(k.currentFocus===j){h=k.listItems.eq(k.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;i=k.listItems.eq(k.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(h){k.moveDown()}else{if(i){k.moveUp()}else{k.disable()}}}}k._callbackSupport(f);return k};c._isDisabled=function(f){var g=this;if(g.originalElem.disabled){g.disable()}return g};c._dynamicPositioning=function(){var l=this;if(a.type(l.listSize)==="number"){l.list.css("max-height",l.maxHeight||"none")}else{var h=l.dropdown.offset().top,g=l.list.data("max-height")||l.list.outerHeight(),k=l.dropdown.outerHeight(),n=l.options.viewport,o=n.height(),p=a.isWindow(n.get(0))?n.scrollTop():n.offset().top,m=(h+k+g<=o+p),f=!m;if(!l.list.data("max-height")){l.list.data("max-height",l.list.outerHeight())}if(!f){l.list.css("max-height",g);l.list.css("top","auto")}else{if((l.dropdown.offset().top-p)>=g){l.list.css("max-height",g);l.list.css("top",(l.dropdown.position().top-l.list.outerHeight()))}else{var i=Math.abs((h+k+g)-(o+p)),j=Math.abs((l.dropdown.offset().top-p)-g);if(i<j){l.list.css("max-height",g-i-(k/2));l.list.css("top","auto")}else{l.list.css("max-height",g-j-(k/2));l.list.css("top",(l.dropdown.position().top-l.list.outerHeight()))}}}}return l};c.enable=function(f){var g=this;if(g.options.disabled){g.triggerEvent("enable");g.selectBox.removeAttr("disabled");g.dropdown.attr("tabindex",0).removeClass(g.theme.disabled).addClass(g.theme.enabled);g.setOption("disabled",false);g._callbackSupport(f)}return g};c.enableOption=function(k,f){var l=this,h,g=0,i,j,m=a.type(k);if(m==="number"){h=l.selectBox.find("option").eq(k);l.triggerEvent("enable-option");h.removeAttr("disabled");l.listItems.eq(k).attr("data-disabled","false").removeClass(l.theme.disabled)}l._callbackSupport(f);return l};c.moveDown=function(f){var i=this;i.currentFocus+=1;var g=i.listItems.eq(i.currentFocus).attr("data-disabled")==="true"?true:false,h=i.listItems.eq(i.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(i.currentFocus===i.listItems.length){i.currentFocus-=1}else{if(g&&h){i.listItems.eq(i.currentFocus-1).blur();i.moveDown();return}else{if(g&&!h){i.currentFocus-=1}else{i.listItems.eq(i.currentFocus-1).blur().end().eq(i.currentFocus).focusin();i._scrollToView("down");i.triggerEvent("moveDown")}}}i._callbackSupport(f);return i};c.moveUp=function(f){var i=this;i.currentFocus-=1;var g=i.listItems.eq(i.currentFocus).attr("data-disabled")==="true"?true:false,h=i.listItems.eq(i.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(i.currentFocus===-1){i.currentFocus+=1}else{if(g&&h){i.listItems.eq(i.currentFocus+1).blur();i.moveUp();return}else{if(g&&!h){i.currentFocus+=1}else{i.listItems.eq(this.currentFocus+1).blur().end().eq(i.currentFocus).focusin();i._scrollToView("up");i.triggerEvent("moveUp")}}}i._callbackSupport(f);return i};c._setCurrentSearchOption=function(f){var g=this;if((g.options.aggressiveChange||g.options.selectWhenHidden||g.listItems.eq(f).is(":visible"))&&g.listItems.eq(f).data("disabled")!==true){g.listItems.eq(g.currentFocus).blur();g.currentIndex=f;g.currentFocus=f;g.listItems.eq(g.currentFocus).focusin();g._scrollToView("search");g.triggerEvent("search")}return g};c._searchAlgorithm=function(h,f){var l=this,k=false,n,o,g,i,m=l.textArray,j=l.currentText;for(n=h,g=m.length;n<g;n+=1){i=m[n];for(o=0;o<g;o+=1){if(m[o].search(f)!==-1){k=true;o=g}}if(!k){l.currentText=l.currentText.charAt(l.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0");j=l.currentText}f=new RegExp(j,"gi");if(j.length<3){f=new RegExp(j.charAt(0),"gi");if((i.charAt(0).search(f)!==-1)){l._setCurrentSearchOption(n);if((i.substring(0,j.length).toLowerCase()!==j.toLowerCase())||l.options.similarSearch){l.currentIndex+=1}return false}}else{if((i.search(f)!==-1)){l._setCurrentSearchOption(n);return false}}if(i.toLowerCase()===l.currentText.toLowerCase()){l._setCurrentSearchOption(n);l.currentText="";return false}}return true};c.search=function(f,g,h){var j=this;if(h){j.currentText+=f.replace(/[|()\[{.+*?$\\]/g,"\\$0")}else{j.currentText=f.replace(/[|()\[{.+*?$\\]/g,"\\$0")}var i=j._searchAlgorithm(j.currentIndex,new RegExp(j.currentText,"gi"));if(i){j._searchAlgorithm(0,j.currentText)}j._callbackSupport(g);return j};c._updateMobileText=function(){var i=this,g,f,h;g=i.selectBox.find("option").filter(":selected");f=g.attr("data-text");h=f?f:g.text();i._setText(i.dropdownText,h);if(i.list.find('li[data-val="'+g.val()+'"]').find("i").attr("class")){i.dropdownImage.attr("class",i.list.find('li[data-val="'+g.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}};c._applyNativeSelect=function(){var f=this;f.dropdownContainer.append(f.selectBox);f.dropdown.attr("tabindex","-1");f.selectBox.css({display:"block",visibility:"visible",width:f._realOuterWidth(f.dropdown),height:f.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"999999",margin:f.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"});if(f.originalElem.disabled){f.triggerEvent("disable")}return this};c._mobileEvents=function(){var f=this;f.selectBox.on({"changed.selectBoxIt":function(){f.hasChanged=true;f._updateMobileText();f.triggerEvent("option-click")},"mousedown.selectBoxIt":function(){if(!f.hasChanged&&f.options.defaultText&&!f.originalElem.disabled){f._updateMobileText();f.triggerEvent("option-click")}},"enable.selectBoxIt":function(){f.selectBox.removeClass("selectboxit-rendering")},"disable.selectBoxIt":function(){f.selectBox.addClass("selectboxit-rendering")}})};c._mobile=function(f){var g=this;if(g.isMobile){g._applyNativeSelect();g._mobileEvents()}return this};c.remove=function(j,f){var k=this,h=a.type(j),l,m=0,g,i="";if(h==="array"){for(g=j.length;m<=g-1;m+=1){l=j[m];if(a.type(l)==="number"){if(i.length){i+=", option:eq("+l+")"}else{i+="option:eq("+l+")"}}}k.selectBox.find(i).remove()}else{if(h==="number"){k.selectBox.find("option").eq(j).remove()}else{k.selectBox.find("option").remove()}}if(k.dropdown){k.refresh(function(){k._callbackSupport(f)},true)}else{k._callbackSupport(f)}return k};c.selectOption=function(i,f){var g=this,h=a.type(i);if(h==="number"){g.selectBox.val(g.selectItems.eq(i).val()).change()}else{if(h==="string"){g.selectBox.val(i).change()}}g._callbackSupport(f);return g};c.setOption=function(g,i,f){var h=this;if(a.type(g)==="string"){h.options[g]=i}h.refresh(function(){h._callbackSupport(f)},true);return h};c.setOptions=function(g,f){var h=this;if(a.isPlainObject(g)){h.options=a.extend({},h.options,g)}h.refresh(function(){h._callbackSupport(f)},true);return h};c.wait=function(h,f){var g=this;g.widgetProto._delay.call(g,f,h);return g}}));(function(){var a={getAll:function(c){var b=localStorage.getItem(c)||"[]";return JSON.parse(b)},empty:function(b){localStorage[b]=JSON.stringify([])},store:function(g,i,f){var c=this.getAll(g);c.push(i);if(f){c=c.slice(-f)}var h=false;var b=0;while(!h&&b<10){try{localStorage.setItem(g,JSON.stringify(c));h=true}catch(d){c.shift();b++}}}};window.StateManager=a})();/*
 * Copyright (c) 2012 Moovers Franchising, Inc.
 * Credits: http://crm.1800moovers.com/credits.txt
 * License: http://crm.1800moovers.com/license.txt
 */
/*
    site.js
*/
window.Keys={TAB:9,BACKSPACE:8,ENTER:13,CAPS_LOCK:20,COMMAND:91,COMMAND_LEFT:91,WINDOWS:91,COMMAND_RIGHT:93,COMMA:188,PERIOD:190,SHIFT:16,CONTROL:17,ALT:18,DELETE:46,ESCAPE:27,INSERT:45,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,S:83,X:88,Y:89,Z:90};JoelPurra.PlusAsTab.setOptions({key:window.Keys.ENTER});_.templateSettings.escape=/\{\{-(.*?)\}\}/g;_.templateSettings.interpolate=/\{\{=([\s\S]+?)\}\}/g;_.templateSettings.evaluate=/\{\{([\s\S]+?)\}\}/g;Object.defineProperty(Array.prototype,"empty",{enumerable:false,value:function(){this.length=0}});Object.defineProperty(String.prototype,"contains",{enumerable:false,value:function(a){return this.indexOf(a)>=0}});Object.defineProperty(String.prototype,"capitalize",{enumerable:false,value:function(){return this.charAt(0).toUpperCase()+this.slice(1)}});(function(){var a={};_.mixin({sum:function(b,c){var d=b;if(_.isString(c)){d=_.pluck(b,c)}else{if(_.isFunction(c)){d=_.map(b,c)}}if(_.size(b)===0){return 0}return _.reduce(d,function(e,f){return e+f})},partial:function(d,b){var e="#"+d+"-partial";if(!_.contains(Object.keys(a),e)){var c=$(e).html();a[e]=_.template(c)}return a[e](b)}})})();(function(a){a.fn.serializeObject=function(){var c={};a.each(this.serializeArray(),function(){var g=this.value;var f=this.name;var d=c[f];var e=_.isUndefined(d)||d==="false";if(e){c[f]=g||"";return}if(g==="false"){return}if(!d.push){d=c[f]=[c[f]]}d.push(g||"")});return c};a.fn.valOrText=function(){return this.val()||this.text()};a.fn.toggleAttr=function(c,d,e){if(!e){e=true}if(_.isUndefined(d)){d=!this.is("["+c+"]")}if(d){return this.attr(c,e)}return this.removeAttr(c)};a.fn.reset=function(){return this.each(function(){var c=a(this);if(c.is("select")){c.val(c.prop("defaultSelected"))}else{if(c.is("form")){c[0].reset()}else{if(c.is(":checkbox")){c.removeAttr("checked")}else{if(c.is(":input:not(:submit):not(:button)")){c.val("")}else{return}}}}})};a.wait=function(c){return a.Deferred(function(d){setTimeout(d.resolve,c)})};a.support.inputs={};var b=document.createElement("input");a.each("search number range color tel url email date month week time datetime datetime-local".split(" "),function(c,d){b.setAttribute("type",d);a.support.inputs[d]=(b.type===d)})})(jQuery);(function(){var c;var e=function(){};var d=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var b=d.length;var a=(window.console=window.console||{});while(b--){c=d[b];if(!a[c]){a[c]=e}}if(Function.prototype.bind){window.log=Function.prototype.bind.call(a.log,a)}else{window.log=function(){Function.prototype.apply.call(a.log,a,arguments)}}})();$(function(){$(".modal").on("shown",function(){$(this).find("input:visible:first").focus()});$("table").on("click touchstart","tr",function(b){if($(b.target).closest("input,button,a").length>0){return true}var c=$(this).find("a.full-row-link").attr("href");if(c){window.location=c}});$("input[name=cardnumber]").mask("9999-9999-9999-99?99");$("input[type=tel]:not(.extension)").mask("(***)***-****");$("textarea.no-overflow").keydown(function(b){var c=$(this).val().split("\n").length;if(b.keyCode===window.Keys.ENTER&&c>=$(this).attr("rows")){return false}});$("a[data-popup=true]").click(function(){var c=$(this).attr("href");var b=window.open(c,"","height=500,width=795,location=1,menubar=0,scrollbars=1,status=0,titlebar=0,toolbar=0");$(b).find(".main-body").css("padding-top",0);return false});(function a(){var b=14400000;$.wait(b).then($.get(SERVER.baseUrl+"keepalive")).done(a)})();if(!$.support.inputs.date){$("input[type=date]").each(function(){var b=this;var c=Kalendae.moment(b.value);if(c){c=c.format("MM/DD/YYYY");b.value=c}else{b.value=Kalendae.moment(new Date()).format("MM/DD/YYYY")}$(b).kalendae({format:"MM/DD/YYYY"})})}$("table").on("click",".payment-row .icon-remove",function(){var g=SERVER.baseUrl+"Payment/CancelPayment";var d=$(this).closest(".payment-row").data("paymentid");var e=$(this).closest(".payment-row").data("paymenttype");var b=$(this).closest(".payment-row").data("amount");var c="";if(e.toLowerCase()==="creditcard"){c+="IMPORTANT: This payment will have to be refunded through the FirstData console.\n\n"}c+="Please enter a reason for removing this "+b+" payment";var f=prompt(c);if(f){Utility.showOverlay();$.post(g,{paymentid:d,reason:f},function(){window.location.reload()})}});$(".survey-panel").togglePanel()});window.CardTypes={Visa:/^4[0-9]{12}(?:[0-9]{3})?$/,Mastercard:/^5[1-5][0-9]{14}$/,Amex:/^3[47][0-9]{13}$/,Discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/,DinersClub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,JCB:/^(?:2131|1800|35\d{3})\d{11}$/};window.Utility={lineBreakToBr:function(a){return a.replace(/\n/g,"<br />")},htmlEncode:function(a){return $("<div>").text(a).html()},htmlDecode:function(a){return $("<div>").html(a).text()},roundTo:function(b,a){a=a||0;return Math.round(b*Math.pow(10,a))/Math.pow(10,a)},range:function(d,i,g){d=parseFloat(d);i=parseFloat(i);g=parseFloat(g);if(isNaN(d)){throw"From undefined"}if(isNaN(i)){i=d}if(isNaN(g)){g=1}if(g===0){throw"Step must not be 0"}if(d>i&&g>0||d<i&&g<0){throw"Can't step backwards"}var b=0;[d,i,g].forEach(function(j){var k=(j.toString().split(".")[1]||"").length;b=Math.max(k,b)});var c=false;if(g<=0){var h=d;d=i;i=h;g=-g;c=true}var f=function(k,j){j=j||0;return Math.round(k*Math.pow(10,j))/Math.pow(10,j)};var a=d;var e=[];while(a<=i){e.push(a);a=f(g+a,b)}if(c){e=e.reverse()}return e},roundCurrency:function(a){return this.roundTo(a,2)},objectToForm:function(b,a){_.each(b,function(d,c){a.find("[name="+c+"]").val(d)})},initBase:function(a){if(a.templates){_.each(a.templates,function(d,c){if($.isPlainObject(d)&&d.options){var b=$(d.element).html();a.templates[c]=_.template(b,null,d.options)}else{a.templates[c]=_.template($(d).html())}})}if(a.elements){_.each(a.elements,function(c,b){a.elements[b]=$(c)})}if(a.dialogs){_.each(a.dialogs,function(c,b){a.dialogs[b]=$(c).modal({show:false,keyboard:false})})}},randomid:function(c){c=c||12;var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");var d="";for(var b=0;b<c;b++){d+=a[Math.floor(Math.random()*a.length)]}return d},replace:function(a,d,b){var c=_.indexOf(a,_.find(a,b));if(c>=0){a[c]=d}},parseBool:function(a){if(typeof(a)==="boolean"){return a}if(typeof(a)==="string"||a instanceof String){return a.toLowerCase()==="true"}return false},isJson:function(b){try{JSON.parse(b)}catch(a){return false}return true},hideOverlay:function(){$("#overlay").hide()},showOverlay:function(){$("#overlay").show()},isValidCreditCard:function(b){function a(e){var h=0;var f=e.length;var g=f%2;for(var d=0;d<f;d++){var c=parseInt(e.charAt(d),10);if(d%2===g){c*=2}if(c>9){c-=9}h+=c}return(h%10)===0}if(!a(b)){return false}return _.any(window.CardTypes,function(c){if(b.match(c)){return true}})},getEstimateString:function(b){var a=Math.floor(b/60);if(a===0){return"30 - 60 Minutes"}else{if(a<4){return Math.ceil(a)+" - "+Math.ceil(a+1)+" Hours"}}if(a<12){return Math.ceil(a)+" - "+Math.ceil(a+2)+" Hours"}return Math.ceil(a)+" - "+Math.ceil(a+4)+" Hours"},formatHours:function(e,a,c){if(_.isUndefined(c)){c=a;a=1}e=Math.round(e);var b=Math.floor(e/60);var d=Math.floor(e%60);d=Math.ceil(d/a)*a;if(d===60){d=0;b=b+1}if(c){return b+":"+((d<10)?"0":"")+d}if(b===0){return d+" Minutes"}return b+" Hours, "+d+" Minutes"},formatCurrency:function(e,i,k,b,a){b=isNaN(b)?2:Math.abs(b);a=(typeof(a)==="undefined")?".":a;k=(typeof(k)==="undefined")?",":k;i=(typeof(i)==="undefined")?"$":i;var h=(e<0)?"-":"";var c=parseInt(Math.abs(e),10).toString();var d=(c.length>3)?c.length%3:0;var g=h+i;if(d>0){g+=c.substr(0,d)+k}var f=/(\d{3})(?=\d)/g;g+=c.substr(d).replace(f,"$1"+k);if(b>0){g+=a+Math.abs(Math.abs(e)-c).toFixed(b).slice(2)}return g},parseCurrency:function(a){return parseFloat($.trim(a).replace("$","").replace(",",""))},addCustomLinks:function(d){var e=$("<div>");var a=/(a\d+)/gi;var c=/quote (\d+)/gi;var b=/[_\-a-z\d]+@[_\-a-z\d+\.]+/gi;e.html(d.replace(a,function(g,f){return'<a href="'+SERVER.baseUrl+"Accounts/Index/"+f+'">'+g+"</a>"}).replace(c,function(g,f){return'<a href="'+SERVER.baseUrl+"Quote/Overview/"+f+'">'+g+"</a>"}).replace(b,function(f){return'<a href="mailto:'+f+'">'+f+"</a>"}));return e.html()}};window.SearchFunctions={vehicle:function(a){return function(b){return b.VehicleID===a.VehicleID}},employee:function(a){return function(b){return b.EmployeeID===a.EmployeeID}},item:function(a){return function(b){return b.ItemID===a.ItemID}},itemAutocompleteSort:function(a){return function(c,e){var d=c.toLowerCase().indexOf(a.toLowerCase())===0;var f=e.toLowerCase().indexOf(a.toLowerCase())===0;var g=Inventory.getItem(c);var h=Inventory.getItem(e);if(g&&g.KeyCode===+a){return -1}if(h&&h.KeyCode===+a){return 1}if(d&&!f){return -1}if(f&&!d){return 1}return(c>e)?1:-1}},vehicleAutocompleteSort:function(a){return function(c,e){var d=c.toLowerCase().indexOf(a.toLowerCase())===0;var f=e.toLowerCase().indexOf(a.toLowerCase())===0;var g=Repository.getVehicle(c);var h=Repository.getVehicle(e);if(g&&g.Lookup===a){return -1}if(h&&h.Lookup===a){return 1}if(d&&!f){return -1}if(f&&!d){return 1}return(c>e)?1:-1}},employeeAutocompleteSort:function(a){return function(c,e){var d=c.toLowerCase().indexOf(a.toLowerCase())===0;var f=e.toLowerCase().indexOf(a.toLowerCase())===0;var g=Repository.getEmployee(c);var h=Repository.getEmployee(e);if(g&&g.Lookup===a){return -1}if(h&&h.Lookup===a){return 1}if(d&&!f){return -1}if(f&&!d){return 1}return(c>e)?1:-1}}};window.Utility.ZipCodeLookups=[{value:"AK",min:"99501",max:"99950"},{value:"AL",min:"35004",max:"36925"},{value:"AR",min:"71601",max:"72959"},{value:"AR",min:"75502",max:"75502"},{value:"AZ",min:"85001",max:"86556"},{value:"CA",min:"90001",max:"96162"},{value:"CO",min:"80001",max:"81658"},{value:"CT",min:"06001",max:"06389"},{value:"CT",min:"06401",max:"06928"},{value:"DC",min:"20001",max:"20039"},{value:"DC",min:"20042",max:"20599"},{value:"DC",min:"20799",max:"20799"},{value:"DE",min:"19701",max:"19980"},{value:"FL",min:"32004",max:"34997"},{value:"GA",min:"30001",max:"31999"},{value:"GA",min:"39901",max:"39901"},{value:"HI",min:"96701",max:"96898"},{value:"IA",min:"50001",max:"52809"},{value:"IA",min:"68119",max:"68120"},{value:"ID",min:"83201",max:"83876"},{value:"IL",min:"60001",max:"62999"},{value:"IN",min:"46001",max:"47997"},{value:"KS",min:"66002",max:"67954"},{value:"KY",min:"40003",max:"42788"},{value:"LA",min:"70001",max:"71232"},{value:"LA",min:"71234",max:"71497"},{value:"MA",min:"01001",max:"02791"},{value:"MA",min:"05501",max:"05544"},{value:"MD",min:"20331",max:"20331"},{value:"MD",min:"20335",max:"20797"},{value:"MD",min:"20812",max:"21930"},{value:"ME",min:"03901",max:"04992"},{value:"MI",min:"48001",max:"49971"},{value:"MN",min:"55001",max:"56763"},{value:"MO",min:"63001",max:"65899"},{value:"MS",min:"38601",max:"39776"},{value:"MS",min:"71233",max:"71233"},{value:"MT",min:"59001",max:"59937"},{value:"NC",min:"27006",max:"28909"},{value:"ND",min:"58001",max:"58856"},{value:"NE",min:"68001",max:"68118"},{value:"NE",min:"68122",max:"69367"},{value:"NH",min:"03031",max:"03897"},{value:"NJ",min:"07001",max:"08989"},{value:"NM",min:"87001",max:"88441"},{value:"NV",min:"88901",max:"89883"},{value:"NY",min:"06390",max:"06390"},{value:"NY",min:"10001",max:"14975"},{value:"OH",min:"43001",max:"45999"},{value:"OK",min:"73001",max:"73199"},{value:"OK",min:"73401",max:"74966"},{value:"OR",min:"97001",max:"97920"},{value:"PA",min:"15001",max:"19640"},{value:"RI",min:"02801",max:"02940"},{value:"SC",min:"29001",max:"29948"},{value:"SD",min:"57001",max:"57799"},{value:"TN",min:"37010",max:"38589"},{value:"TX",min:"73301",max:"73301"},{value:"TX",min:"75001",max:"75501"},{value:"TX",min:"75503",max:"79999"},{value:"TX",min:"88510",max:"88589"},{value:"UT",min:"84001",max:"84784"},{value:"VA",min:"20040",max:"20041"},{value:"VA",min:"20040",max:"20167"},{value:"VA",min:"20042",max:"20042"},{value:"VA",min:"22001",max:"24658"},{value:"VT",min:"05001",max:"05495"},{value:"VT",min:"05601",max:"05907"},{value:"WA",min:"98001",max:"99403"},{value:"WI",min:"53001",max:"54990"},{value:"WV",min:"24701",max:"26886"},{value:"WY",min:"82001",max:"83128"}];window.Utility.findStateFromZip=function(c){var a=parseInt(c,10);var b=_.find(window.Utility.ZipCodeLookups,function(d){var f=parseInt(d.min,10);var e=parseInt(d.max,10);if(a>=f&&a<=e){return true}return false});if(b){return b.value}return""};$(function(){var b=[Keys.UP,Keys.UP,Keys.DOWN,Keys.DOWN,Keys.LEFT,Keys.RIGHT,Keys.LEFT,Keys.RIGHT];var a=[];$(document).on("keydown",function(c){a.push(c.keyCode);if(a.length>b.length){a.shift()}if(a.join()===b.join()){$.cookie("hideprice",!Utility.priceHidden(),{path:"/"})}});window.Utility.priceHidden=function(){return Utility.parseBool($.cookie("hideprice"))}});this.Repository={employees:[],vehicles:[],getEmployee:function(b){var a;a=_.find(this.employees,function(c){return c.getDisplayValue()===b});if(a===window.Undefined){return _.find(this.employees,function(c){return c.EmployeeID===b})}return a},getVehicle:function(b){var a;a=_.find(this.vehicles,function(c){return c.getDisplayValue()===b});return a||_.find(this.vehicles,function(c){return c.VehicleID===b})},init:function(a,b){this.employees=_.map(a,function(c){return new Employee(c)});return this.vehicles=_.map(b,function(c){return new Vehicle(c)})}};/*
    addressVerify.js
*/
(function(c){var a=function(j,k,f,i,l,e){if(Utility.isJson(j)){var g=JSON.parse(j);j=g}if($.isPlainObject(j)){var h=j;j=h.street1||h.Street1;k=h.street2||h.Street2;f=h.city||h.City;i=h.state||h.State;l=h.zip||h.Zip;e=h.addressID||h.AddressID}this.Street1=j;this.Street2=k;this.City=f;this.State=i;this.Zip=l;this.AddressID=e};a.prototype=$.extend(a.prototype,{getCityState:function(){if(this.City&&this.State){return this.City+", "+this.State}if(this.City){return this.City}if(this.State){return this.State}return""},display:function(){if(!this.Street1){return this.getCityState()+" "+this.Zip}if(this.Street2){return this.Street1+" "+this.Street2+", "+this.getCityState()+" "+this.Zip}return this.Street1+" "+this.getCityState()+" "+this.Zip},toForm:function(e){e.find("[name=street1]").val(this.Street1);e.find("[name=street2]").val(this.Street2);e.find("[name=city]").val(this.City);e.find("[name=state]").val(this.State);e.find("[name=zip]").val(this.Zip)}});var b={addressForm:$([]),verifyContainer:$([]),unverifyContainer:$([]),template:_.template($("#verify-address-template").html()),submit:$.noop,success:$.noop,error:$.noop,always:$.noop,verifyUrl:SERVER.baseUrl+"Address/GetSuggestions",verifyZip:SERVER.baseUrl+"Address/VerifyZipCode"};var d=function(g){g=$.extend({},b,g);var e=$(g.addressForm);var k=$(g.verifyContainer);var j=$(g.unverifyContainer);var h=g.success;var f=g.error;var i=g.template;var l=g.verifyUrl;var m=g.verifyZip;e.on("submit",function(o){var p=$(this);var n=p.serializeObject();if($.isArray(n.street1)){n.street1=n.street1[0];n.street2=n.street2[0];n.city=n.city[0];n.state=n.state[0];n.zip=n.zip[0]}o.preventDefault();if(!n.zip){f("Zip Code is required for all addresses");return false}g.submit();$.postq("verify-address",l,n,function(q){var s=_.map(q,function(t){return{verified:true,json:JSON.stringify(t),displayString:function(){return t.delivery_line_1+", "+t.last_line}}});k.empty();j.empty();k.append(_.map(s,function(t){return i(t)}).join());var r=function(){var t={verified:false,json:JSON.stringify(n),displayString:function(){return new a(n).display()}};j.append(i(t));h()};if(s.length===0){k.append("<div class='alert alert-error'>Unable to verify address</div>");$.post(m,{zip:n.zip},function(t){if(t.Errors){f("Please ensure the zip code you entered is valid. If you're sure, please contact support.")}else{r()}})}else{r()}})})};c.Address=a;c.initVerifyAddress=d}(window));/*
    maps.js
*/
window.Maps={emptyOpts:{panControl:false,rotateControl:false,scaleControl:false,streetViewControl:false,overviewMapControl:false,mapTypeControl:false,zoomControl:false},drawMapAt:function(a,c,b){var d=google.maps;var e=new d.LatLng(a.Metadata.Latitude,a.Metadata.Longitude);new d.MaxZoomService().getMaxZoomAtLatLng(e,function(i){var h={center:e,zoom:i.zoom,mapTypeId:d.MapTypeId.SATELLITE};var f=$.extend(Maps.emptyOpts,h);var g=new d.Map($(c)[0],f);if($.isFunction(b)){b(g)}})}};/*
    quote-server-objects.js
 */
var InventoryItemQuestion;this.PagedResult=(function(){function a(b){$.extend(this,b)}return a})();this.Quote=(function(){function a(c){var b,d;b=this;$.extend(this,c);this.IsHourly=Utility.parseBool(c.IsHourly);d=["Scheduled","Open","Deferred","Lost"];d.forEach(function(e){return b[e]=b.Status===e})}a.prototype.active=function(){return this.Status!=="Won"&&this.Status!=="Lost"};return a})();this.QuoteComment=(function(){function a(c){var b;c=c!=null?c:{};this.Text=c.Text,this.UserName=c.UserName,this.IsEditable=c.IsEditable;this.CommentID=(b=c.CommentID)!=null?b:Utility.randomid();if(c.Date&&!c.Date.getDate){this.Date=new Date(c.Date)}else{this.Date=c.Date}}a.prototype.GetDateString=function(){if(new Date().toDateString()===this.Date.toDateString()){return prettyDate(this.Date)}else{return this.Date.format("mmm d, yyyy' at 'h:MM TT")}};a.prototype.getCommentClass=function(){if(SERVER.username===this.UserName){return"logged-in-user"}else{return""}};return a})();this.Stop=(function(){function a(b){this.id=b.id||Utility.randomid();$.extend(this,b);this.walkDistance=parseInt(b.walkDistance,10);this.outsideStairsCount=parseInt(b.outsideStairsCount,10)||0;this.insideStairsCount=parseInt(b.insideStairsCount,10)||0;this.floor=parseInt(b.floor,10)||0;this.apartmentComplex=b.apartmentComplex||"";this.apartmentGateCode=b.apartmentGateCode||"";this.liftgate=Utility.parseBool(b.liftgate);this.dock=Utility.parseBool(b.dock);this.storageDays=b.storageDays||null;if(this.verified){this.verifiedAddress=b.verifiedAddress}this.address=new Address(this.street1,this.street2,this.city,this.state,this.zip,this.addressid)}a.prototype.addressTypeDisplay=function(){return AddressTypes[this.addressType]};a.prototype.parkingTypeDisplay=function(){return ParkingTypes[this.parkingType]};a.prototype.insideStairsTypeDisplay=function(){return StairTypes[this.insideStairsType]};a.prototype.outsideStairsTypeDisplay=function(){return StairTypes[this.outsideStairsType]};a.prototype.elevatorTypeDisplay=function(){return ElevatorTypes[this.elevatorType]};a.prototype.storageDaysDisplay=function(){switch(false){case !((this.storageDays||0)<=0):return"";case !(this.storageDays===1):return"1 Day Storage";case !(this.storageDays<9999):return""+this.storageDays+" Days Storage";default:return"Storage > 7 days"}};return a})();this.Item=(function(){function a(b){$.extend(this,b);this.AdditionalQuestions=_.map(b.AdditionalQuestions,function(c){return new InventoryItemQuestion(c)})}return a})();InventoryItemQuestion=(function(){function a(b){$.extend(this,b)}a.prototype.getOptions=function(){return _.chain(this.Options).sortBy(function(b){return b.Sort}).value()};return a})();this.Room_Item_Rel=(function(){function a(b){$.extend(this,b)}a.prototype.renderTemplate=function(){return Inventory.templates.itemTemplate(this)};a.prototype.hasRelevantAdditionalInfo=function(){if(!this.AdditionalInfo){return false}else{return _.any(this.AdditionalInfo,function(b){return b.DisplayName!=="Frame"})}};a.prototype.getAdditionalDescription=function(){return _.chain(this.AdditionalInfo).filter(function(b){return b.DisplayName!=="Frame"&&b.DisplayName!=="None"}).pluck("DisplayName").value().join()};return a})();this.Room=(function(){function a(b){b=b||{};this.Type=b.Type||"";this.Description=b.Description||"";this.Items=_.map(b.Items||[],function(c){return new Room_Item_Rel(c)});this.StopID=b.StopID||"";this.StopName=b.StopName||"";this.RoomID=b.RoomID||Utility.randomid();this.Pack=b.Pack||false;this.Boxes=b.Boxes||[];this.Sort=b.Sort||0;this.IsUnassigned=b.IsUnassigned||false}a.prototype.getGuid=function(){var b=new Date().getTime();var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var e=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(d=="x"?e:(e&7|8)).toString(16)});return c};a.prototype.addItem=function(b){return this.setItemCount(b,this.getQuantity(b,Inventory.options)+1)};a.prototype.getItem=function(b){var c;c=_(Inventory.currentRoom.Items).find(function(d){return d.Item.Name===b||d.Item.ItemID===b});if(c&&c.Item){return c}else{return void 0}};a.prototype.getRoomClass=function(){if(!Inventory.editable){return"room no-edit"}else{return"room"}};a.prototype.getItems=function(){return _.chain(this.Items).filter(function(b){return b.Count>0}).value()};a.prototype.compareAddendmums=function(c,d){var b=_.map(c,function(f){return f.DisplayName});var e=_.map(d,function(f){return f.DisplayName});if(b.length===e.length){return _.difference(b,e).length===0}else{return false}};a.prototype.setItemCount=function(e,c,h,b,f){var d,g;h=h||0;d=_.find(this.Items,function(j){return j.Item.ItemID===e.ItemID&&(a.prototype.compareAddendmums(b,j.AdditionalInfo)||f===j.RoomInverntoryItemID)});if(d){if(d.Count>0){b=d.AdditionalInfo}d.Count=c;d.StorageCount=h;d.IsSpecialItem=e.IsSpecialItem}else{g=Math.max(_.max(_.pluck(this.Items,"Sort")),-1)+1;d=new Room_Item_Rel({Item:e,Count:c,StorageCount:h,Sort:g,IsBox:e.IsBox,IsSpecialItem:e.IsSpecialItem,RoomInverntoryItemID:this.getGuid(),Notes:""});this.Items.push(d)}d.AdditionalInfo=b!=null?b:null;Inventory.setChanged(true);return this.retemplate(e,d.RoomInverntoryItemID)};a.prototype.renderBodyTemplate=function(e,f){var b,c,d;c=Inventory.templates.roomBody;d=$.extend({RoomInverntoryItemID:f},this,{divClass:e||"room"});b=c(d);return b};a.prototype.renderUnassigned=function(){var b;if(!this.IsUnassigned){return""}b=_.chain(Inventory.rooms).filter(function(c){return !c.IsUnassigned});return b.map((function(c){return function(d){return d.renderBodyTemplate("sub-room")}})(this)).value().join("")};a.prototype.moveItem=function(h,e,f){var b,d,g;var c=_.filter(this.Items,function(j){return j.RoomInverntoryItemID===f});if(c.length>0){b=c[0].AdditionalInfo}d=this.getQuantity(e,null,f)+h.getQuantity(e,b);g=this.getStorage(e)+h.getStorage(e);this.setItemCount(e,0,0,null,f);return h.setItemCount(e,d,g,b)};a.prototype.retemplate=function(e,j){var b,c,d,f,g,h,i,k;i=Inventory.templates.roomMenu;f=Inventory.elements.roomMenu;g=$($.parseHTML($.trim(i(this))));h=f.find(".room-selector[data-roomid="+this.RoomID+"]");if(h.length>0){h.replaceWith(g)}else{f.append(g)}c=$($.parseHTML(this.renderBodyTemplate(null,j)));b=Inventory.elements.roomBody;d=b.find(".room[data-roomid="+this.RoomID+"]");if(d.length>0){d.replaceWith(c)}else{b.append(c)}if(this.isSelected()){c.addClass("sel");g.addClass("sel")}Inventory.initDraggable(b.find(".item[data-itemid]"));Inventory.initDroppable(g);if(!this.IsUnassigned){k=Inventory.getUnassignedRoom();return k.retemplate()}};a.prototype.getQuantity=function(c,b,e){var d;if(e){d=_.find(this.Items,function(f){return f.RoomInverntoryItemID===e})}else{d=_.find(this.Items,function(f){return f.Item.ItemID===c.ItemID&&a.prototype.compareAddendmums(b,f.AdditionalInfo)})}if(d){return d.Count}else{return 0}};a.prototype.getStorage=function(b){var c;c=_.find(this.Items,function(d){return d.Item.ItemID===b.ItemID});if(c){return c.StorageCount}else{return 0}};a.prototype.getItemCount=function(){var b;b=this.Items;if(this.IsUnassigned){b=_.chain(Inventory.rooms).pluck("Items").flatten().value()}return _.filter(b,function(c){return c.Count>0}).length};a.prototype.removeBox=function(b){if(!b){return}return this.Boxes=_.reject(this.Boxes,function(c){return c.BoxTypeID===b.BoxTypeID})};a.prototype.setBoxCount=function(b,c){this.removeBox(b);return this.Boxes.push({BoxTypeID:b.BoxTypeID,Count:c,Name:b.Name})};a.prototype.deleteItems=function(){return this.Items.empty()};a.prototype.miniItemList=function(){var b;b=$.extend({},this);b.Items=b.Items.map(function(c){var d;d=$.extend({},c);d.Item={ItemID:c.Item.ItemID};return d});return b};a.prototype.isSelected=function(){return Inventory.currentRoom&&(this.RoomID===Inventory.currentRoom.RoomID)};return a})();(function(){var a,b,c,d,e;a=(function(){function f(g){$.extend(this,g)}f.prototype.getDisplayValue=function(){return""+this.NameFirst+" "+this.NameLast+" ("+this.Lookup+")"};f.prototype.displayName=function(){return""+this.NameFirst+"  "+this.NameLast};return f})();window.Employee=a;d=(function(){function f(g){$.extend(this,g)}f.prototype.getDisplayValue=function(){return""+this.Name+" ("+this.Lookup+")"};return f})();window.Vehicle=d;e=(function(){function f(g,h){this.Vehicle=g instanceof d?g:new d(g.Vehicle);this.Posting=h;this.VehicleID=g.VehicleID;this.IsRemoved=g.IsRemoved||false}return f})();b=(function(){function f(m,o){var n,g,h,i,j,k,l;this.Employee=m instanceof a?m:new a(m.Employee);this.Posting=o;this.EmployeeID=m.EmployeeID;this.Wage=(g=m.Wage)!=null?g:0;this.Tip=(h=m.Tip)!=null?h:0;this.PerDiem=(i=m.PerDiem)!=null?i:0;this.Bonus=(j=m.Bonus)!=null?j:0;this.Commission=(k=m.Commission)!=null?k:0;this.Hours=(l=m.Hours)!=null?l:0;this.IsRemoved=m.IsRemoved||false;this.ForceNoDriver=m.ForceNoDriver||false;n=_.chain((this.Posting||{}).Crew_Drivers).map(function(p){return p.EmployeeID}).contains(m.EmployeeID).value();this.IsDriver=m.IsDriver||(n&&!this.ForceNoDriver)||false}f.prototype.getCommissionPercent=function(){var g,h;h=this.Posting.calculateMovingCost();g=this.Commission;if(h===0||g===0){return 0}return Utility.roundCurrency((g/h)*100)};f.prototype.getTotal=function(){return Utility.roundCurrency(this.Commission+this.Bonus+this.Tip)};f.prototype.getManHourRate=function(){var g,h;if(this.Posting.IsHourly){return 0}g=this.Posting.GuaranteedPricing.GuaranteedPrice;h=this.Posting.calculateManHours();if(!h){return 0}return g/h};f.prototype.getCommission=function(){var g,h,i;i=this.Posting.calculateMovingCost();h=this.Posting.calculateManHours();g=i>500?0.25:0.2;if(h===0){return 0}else{return((i*g)/h)*this.Hours}};return f})();c=(function(){function f(h,g){var i,j,k;j=this;$.extend(j,h);this.Date=new Date(h.Date);this.autoCalc=true;this.hasChanged=false;this.delayedHasChanged=false;this.container=g;this.IsCurrent=!_.isUndefined(g);this.StorageAccount=JSON.parse(h.StorageAccount);this.Crew_Drivers=_(h.Crew_Employee_Rels).filter(function(l){return l.IsDriver}).map(function(l){return new a(l.Employee)});this.Employee_Rels=_.map(h.Employee_Rels,function(l){return new b(l,j)});this.Vehicle_Rels=_.map(h.Vehicle_Rels,function(l){return new e(l,j)});this.Crew_Employees=_.map(h.Crew_Employee_Rels,function(l){return new a(l.Employee)});this.Crew_Vehicles=_.map(h.Crew_Vehicle_Rels,function(l){return new d(l)});i=_.pluck(j.Employee_Rels,"EmployeeID");_.each(j.Crew_Employees,function(l){if(!_.contains(i,l.EmployeeID)){return j.addEmployee(l,false)}});k=_.pluck(j.Vehicle_Rels,"VehicleID");_.each(j.Crew_Vehicles,function(l){if(!_.contains(k,l.VehicleID)){return j.addVehicle(l,false)}});_.each(j.OtherServices,function(l){return l.Posting=j});this.Siblings=_.map(h.Siblings,function(l){return new f(l)})}f.prototype.retemplate=function(){var g,h,i,j,k;j=window.scrollY;k=PostingTemplates.templates.posting;h=k(this);this.container.find("[autocomplete]").each(function(){if($(this).data("autocomplete")){return $(this).autocomplete("destroy")}});i=this.container.empty().append(h);g=this.container;setTimeout(function(){i.find("input").trigger("change");return PostingTemplates.onTemplate(g)},10);this.updateCalculatedFields();window.scroll(window.scrollX,j);return i};f.prototype.retemplateEmployees=function(){var g,h;g=this.container.find(".employee-job-post tbody");h=this.RenderEmployees();return g.html(h)};f.prototype.setEmployeeField=function(h,i,j){var g;if(this.IsComplete){return}this.hasChanged=true;g=_.find(this.Employee_Rels,function(k){return k.EmployeeID===h});g[i]=j;return this.updateCalculatedFields()};f.prototype.setCustomField=function(h,i){var g;if(this.IsComplete){return}this.hasChanged=true;g=_.find(this.OtherServices,function(j){return j.ServiceID===h});if(g){g.Price=i}return this.updateCalculatedFields()};f.prototype.setField=function(m,o){var j,k,l,n,g,h,i;if(this.IsComplete){return}k=function(p){return Object.prototype.toString.call(p)==="[object Object]"};this.hasChanged=true;j=this;n=m.split(/\./g);i=n.slice(0,n.length-1);for(g=0,h=i.length;g<h;g++){l=i[g];j=j[l];if(!k(j)){throw"Set Prop: Error : Cannot set "+l}}j[n[n.length-1]]=o;return this.updateCalculatedFields()};f.prototype.getTdClass=function(){if(this.isEditable()){return"input-td"}else{if(this.IsRemoved){return"disabled"}else{return""}}};f.prototype.isEditable=function(){return !this.IsComplete&&this.IsCurrent};f.prototype.updateCalculatedFields=function(){var g,h,i,j,k,l,m,n;k=this.container.find("span.hour-display");l=this.container.find("span.moving-services-price");n=this.container.find("span.total-display");h=this.container.find("span.balance-display");i=this.container.find("span[name=totalMovePrice]");k.text(Utility.formatCurrency(this.calculateMovingHours(),"",""));n.text(Utility.formatCurrency(this.calculateTotalCost()));m=this;_.each(this.Employee_Rels,function(o){var p;p=m.container.find("tr[data-employeeid="+o.EmployeeID+"]");p.find("[name=Commission_Percent]").val(o.getCommissionPercent());p.find(".Commission_Percent").text(o.getCommissionPercent());p.find(".total-pay").text(Utility.formatCurrency(o.getTotal()));return p.find(".man-hour-rate").text(Utility.formatCurrency(o.getManHourRate(),""))});if(this.IsHourly){l.text(Utility.formatCurrency(this.calculateMovingCost()));g=this.calculateBalance();h.text(Utility.formatCurrency(g));return h.toggleClass("red",g!==0)}else{j=this.GuaranteedPricing.GuaranteedPrice;i.text(Utility.formatCurrency(this.calculateTotalCost()));l.text(Utility.formatCurrency(j));return h.text(Utility.formatCurrency(0))}};f.prototype.RenderMovingServices=function(){var g,h,i;i=PostingTemplates.templates.moving_service_rel;g=this;h=_.sortBy(_.flatten([g.Siblings,g]),function(j){j.IsCurrent=j===g;return""+j.Date+"\u0000"+!j.IsCancelled});return _.map(h,function(j){return i(j)}).join("")};f.prototype.RenderCustomServices=function(){var g,h,i;h=this.OtherServices;i=PostingTemplates.templates.posting_service;g=0;return _.map(h,function(j){j.idx=g;g++;return i(j)}).join("")};f.prototype.RenderEmployees=function(g){var h,i;i=PostingTemplates.templates.employee_rel;h=0;return _.chain(this.Employee_Rels).sortBy(function(j){return parseInt(j.Employee.Lookup,10)||0}).map(function(j){j.idx=h;j.hide=g||false;h=h+10;return i(j,{variable:"rel"})}).value().join("")};f.prototype.RenderVehicles=function(){var g;g=PostingTemplates.templates.vehicle_rel;return _.map(this.Vehicle_Rels,function(h){return g(h)}).join("")};f.prototype.calculateTotalCost=function(){var g;g=this.PackingMaterialsCost+this.PackingServiceCost+this.StorageFeesCost+this.ValuationCost;g+=_.sum(this.OtherServices,function(h){return h.Price});g+=this.calculateMovingCost();return Utility.roundCurrency(g)};f.prototype.calculateTip=function(){return _.sum(this.Employee_Rels,"Tip")};f.prototype.calculateCostWithTip=function(){return this.calculateTotalCost()+this.calculateTip()};f.prototype.calculateBalance=function(){var g,h;h=this.FinalPostedPrice;g=this.calculateTotalCost();return Utility.roundCurrency(h-g)};f.prototype.calculateManHours=function(){var g,h,i;h=_(this.Employee_Rels).filter(function(j){return !j.IsRemoved});i=_.chain(this.Siblings).pluck("Employee_Rels").flatten().filter(function(j){return !j.IsRemoved}).value();g=_.chain(h.concat(i)).pluck("Hours").sum().value();return g};f.prototype.calculateMovingHours=function(){return Utility.roundCurrency(_.sum(_.flatten([this,this.Siblings]),function(g){return g.PostingHours}))};f.prototype.getHourlyPricingDescription=function(){var g,h,i,j,k;if(!this.IsHourly){return""}j=_.chain([this,this.Siblings]).flatten();h=j.sum(function(l){return l.HourlyPricing.FirstHourPrice-l.HourlyRate}).value();i={};g=function(l,m){i[m]=i[m]||0;return i[m]+=l};j.each(function(l){return g(l.PostingHours,l.HourlyRate)});k=Utility.formatCurrency(h,"$","",0)+" travel fee";_.each(i,function(l,m){return k+="\n "+l+" hours @"+Utility.formatCurrency(m)+" = "+Utility.formatCurrency(l*m)});return k};f.prototype.calculateMovingCost=function(){var g;if(this.IsHourly){g=_.flatten([this,this.Siblings]);return _.sum(g,function(k){var h,i,j;if(k.IsCancelled){return 0}h=k.HourlyPricing.FirstHourPrice;i=k.HourlyRate;j=k.PostingHours;return Utility.roundCurrency(h+(Math.max(j,1)-1)*i)})}else{return this.GuaranteedPricing.GuaranteedPrice}};f.prototype.addCustomService=function(h){var g;if(this.IsComplete){return}g={ServiceID:Utility.randomid(),PostingID:this.PostingID,Posting:this,Description:h,Type:4,Price:0};this.OtherServices.push(g);return this.retemplate()};f.prototype.removeService=function(g){if(this.IsComplete){return}this.OtherServices=_.reject(this.OtherServices,function(h){return h.ServiceID===g});this.retemplate();return this.updateCalculatedFields()};f.prototype.addEmployee=function(g,j){var h,i;if(this.IsComplete){return}j=j!=null?j:true;i=_(this.Employee_Rels).filter(SearchFunctions.employee(g));if(_.any(i)){i[0].IsRemoved=false}else{h=this;h.removeEmployee(g);i=new b(g,h);i.Wage=g.Wage;i.Hours=h.PostingHours+h.DriveHours;i.IsRemoved=false;i.Bonus=0;i.Commission=0;i.Tip=0;i.PerDiem=0;h.Employee_Rels.push(i)}if(j){return this.retemplate()}};f.prototype.addVehicle=function(i,h){var g;if(this.IsComplete){return}h=h!=null?h:true;g=_(this.Vehicle_Rels).filter(SearchFunctions.vehicle(i));if(_.any(g)){g[0].IsRemoved=false}else{this.removeVehicle(i);g=new e(i);g.Posting=this;this.Vehicle_Rels.push(g)}if(h){return this.retemplate()}};f.prototype.removeEmployee=function(i){var g,h,j;if(this.IsComplete||!i){return}j=SearchFunctions.employee(i);g=_(this.Crew_Employees).filter(j);h=_(this.Employee_Rels).filter(j);if(_.any(g)&&_.any(h)){return h[0].IsRemoved=true}else{return this.Employee_Rels=_.reject(this.Employee_Rels,j)}};f.prototype.removeVehicle=function(j){var g,h,i;if(this.IsComplete||!j){return}i=SearchFunctions.vehicle(j);g=_(this.Crew_Vehicles).filter(i);h=_(this.Vehicle_Rels).filter(i);if(_.any(g)&&_.any(h)){return h[0].IsRemoved=true}else{return this.Vehicle_Rels=_.reject(this.Vehicle_Rels,i)}};f.prototype.toServerObject=function(){return{id:this.PostingID,finalPostedPrice:this.FinalPostedPrice,postingHours:this.PostingHours||0,driveHours:this.DriveHours||0,hourlyRate:this.HourlyRate,firstHourRate:this.IsHourly?this.HourlyPricing.FirstHourPrice:null,packingMaterialsCost:this.PackingMaterialsCost,packingServiceCost:this.PackingServiceCost,storageFeesCost:this.StorageFeesCost,replacementValuation:this.ValuationCost,otherServices:JSON.stringify(_.map(this.OtherServices,function(g){return{Description:g.Description,QuoteID:g.QuoteID,ServiceID:g.ServiceID,Type:g.Type,Price:g.Price}})),employees:JSON.stringify(_.map(this.Employee_Rels,function(g){return{EmployeeID:g.EmployeeID,Bonus:g.Bonus,Commission:g.Commission,Hours:g.Hours,IsRemoved:g.IsRemoved,Tip:g.Tip,PerDiem:g.PerDiem,Wage:g.Wage,IsDriver:g.IsDriver}})),vehicles:JSON.stringify(_.map(this.Vehicle_Rels,function(g){return{VehicleID:g.VehicleID,IsRemoved:g.IsRemoved}}))}};f.prototype.cancel=function(){return this.IsCancelled=this.hasChanged=true};f.prototype.sync=function(g){var h,i;if(this.IsComplete){this.hasChanged=false;return}if(!this.hasChanged){return g()}else{i=SERVER.baseUrl+"PostingPage/SaveHourlyPostData/"+this.PostingID;if(!this.IsHourly){i=SERVER.baseUrl+"PostingPage/SaveGuaranteedPostData/"+this.PostingID}h=this;h.hasChanged=false;return $.postq("posting",i,this.toServerObject(),function(j){if($.isFunction(g)){g(j)}return _.each(j,function(m,l){var k;k=_.find(h.OtherServices,function(n){return n.ServiceID===l});if(k){k.ServiceID=m}h.container.find("input[name=serviceid][value="+l+"]").val(m);return h.container.find("input[data-field="+l+"]").data("field",m)})})}};return f})();window.Posting=c}).call(this);(function(){var b={}.hasOwnProperty,a=function(c,f){for(var e in f){if(b.call(f,e)){c[e]=f[e]}}function d(){this.constructor=c}d.prototype=f.prototype;c.prototype=new d();c.__super__=f.prototype;return c};this.Account=(function(){function c(d){$.extend(this,d);this.BillingAddress=new Address(d.BillingAddress);this.MailingAddress=new Address(d.MailingAddress);this.PrimaryPhone=d.PrimaryPhone?new PhoneNumber(d.PrimaryPhone):null;this.SecondaryPhone=d.SecondaryPhone?new PhoneNumber(d.SecondaryPhone):null;this.FaxPhone=d.FaxPhone?new PhoneNumber(d.FaxPhone):null}return c})();this.PersonAccount=(function(c){a(d,c);function d(e){d.__super__.constructor.call(this,e);this.FirstName=e.FirstName,this.LastName=e.LastName}return d})(Account);this.BusinessAccount=(function(c){a(d,c);function d(e){d.__super__.constructor.call(this,e);this.Name=e.Name,this.BusinessType=e.BusinessType,this.ViewBusinessType=e.ViewBusinessType}return d})(Account);this.PhoneNumber=(function(){function c(d){if(d){$.extend(this,d)}}return c})()}).call(this);/*
    accounts.js
*/
window.Accounts={currentPage:0,fullCache:[],isLoadingMenu:false,urls:{search:SERVER.baseUrl+"Accounts/All/",getSingle:SERVER.baseUrl+"Accounts/Get/",addCard:SERVER.baseUrl+"Accounts/AddCard"},templates:{account:"#account-template",personHeader:"#personheader-account-template",businessHeader:"#businessheader-account-template",menu:"#account-menu-template"},prevMailing:{},elements:{accountContainer:"#account-container",menuContainer:"#account-menu",searchBox:"#account-menu-search",headerContainer:"#header-container",addCardButton:"#add-credit-card",addCardModal:"#add-card-modal"},refreshMenu:function(a,b){Accounts.isLoadingMenu=true;var c=function(h){var f=Accounts.elements.menuContainer;var g=f.find(".selected").data("accountid");if(Accounts.currentPage===0){f.empty()}f.append(_.map(h,function(i){return Accounts.templates.menu(i)}));var e=(b==="auto");if(!b){b=g}if(e){b=f.find(".account:first").data("accountid")}Accounts.showAccount(b,e);Accounts.isLoadingMenu=false};if(!a){var d=Accounts.elements.searchBox.val();$.getq("account",Accounts.urls.search,{q:d,page:Accounts.currentPage,_:$.now()},c)}else{c(a)}},showAccount:function(a,c,b){if(!a||(!Accounts.isLoadingMenu&&$.ajaxq.isRunning())){return}var e=Accounts.elements.menuContainer.find(".account[data-accountid="+a+"]");e.addClass("selected").siblings().removeClass("selected");var d=_.first(_.filter(Accounts.fullCache,function(g){return g.AccountID===a}));var f=function(i){var g=(i.Type==="Person")?new PersonAccount(i):new BusinessAccount(i);var j=Accounts.templates.account;var h=(i.Type==="Person")?Accounts.templates.personHeader:Accounts.templates.businessHeader;$("input[name=hiddenAccountID]").val(g.AccountID);$("#same-as-billing-option").text(g.DisplayName);Accounts.elements.accountContainer.empty().append(j(g));Accounts.elements.headerContainer.empty().append(h(g));Accounts.elements.accountContainer.find("a.add-account").data("account-json",g);Accounts.elements.headerContainer.find("a.add-account").data("account-json",g);var k=(c)?window.location.href:SERVER.baseUrl+"Accounts/Index/"+g.Lookup;if(!b){History.pushState({accountid:g.AccountID},"Account "+g.Lookup,k)}};if(d){f(d)}else{$.postq("account",Accounts.urls.getSingle+a,function(g){Accounts.fullCache.push(g);f(g)})}},businessDefaults:{},personDefaults:{},showModal:function(i,a,h){a=a||{};var g=(i==="Business")?$("#create-business-dialog"):$("#create-person-dialog");var b=(i==="Business")?Accounts.businessDefaults:Accounts.personDefaults;h=$.extend({},b,h);var c=g.find(".account-custom-form");var f=_.template("<input name='{{- key }}' value='{{- val }}' />");if(h.data){var d=_.map(h.data,function(k,j){return f({val:k,key:j})}).join("");c.empty().append($.parseHTML(d))}else{c.empty()}if(h.action){g.find("form").attr("action",h.action)}if(h.method){g.find("form").attr("method",h.method)}else{g.find("form").attr("method","post")}var e=g.find(".account-custom-info");if(h.info){e.empty().show().append(h.info)}else{e.empty().hide()}g.find(".ajax-loader").hide();g.find(".errors").empty().hide();g.find("input.error").removeClass("error");g.find("input,select").each(function(){var j=$(this).data("field");if(!j){return}var k=j.split(".");if(k.length===1){$(this).val(a[j])}else{if(a[k[0]]){$(this).val(a[k[0]][k[1]])}else{$(this).val("")}}});Accounts.prevMailing=a.BillingAddress;if(a.CopyMailing||$.isEmptyObject(a)){g.find("input.copy-mailing").attr("checked","checked");g.find(".address-container .Billing").find("input,select").addClass("disabled").attr("disabled","disabled")}g.modal("show");g.find(".page").hide();g.find(".page1").show();return g},showError:function(a,b){a.find(".errors").empty().show().append("<strong>Error</strong>: "+b)},saveForm:function(b,h,c){var i=b.attr("action");var e=b.attr("method");var a=b.serializeObject();if(!a["address-select"]){Accounts.showError(b,"Please select an address");return}if(a["address-select"]==="CURRENT_SELECTED"){a.currentMailing=true}else{if(!JSON.parse(a["address-select"]).accountid){a.verified=a["address-select"]}}_.each(a,function(k,j){if($.isArray(k)){a[j]=k.join("|")}});var g=b.find(".save-form").addClass("disabled").attr("disabled","disabled");var d=b.find(".ajax-loader").show();var f=$.ajaxq("form-add",{url:i,type:e,data:a});f.done(function(k){if(k.Errors){var j=k.Errors[0];Accounts.showError(b,j.ErrorMessage);return}b.find(".errors").empty().hide();if($.isFunction(h)){h(k)}if(c!==false){$(".modal.in").modal("hide")}});f.always(function(){d.hide();g.removeClass("disabled").removeAttr("disabled")})},initAddModals:function(f,c){var d={show:false,keyboard:false};var e=$("#create-person-dialog").modal(d);var a=$("#create-business-dialog").modal(d);Accounts.personDefaults={info:null,action:e.find("form:first").attr("action"),method:e.find("form:first").attr("method"),data:null};Accounts.businessDefaults={info:null,action:a.find("form:first").attr("action"),method:a.find("form:first").attr("method"),data:null};$(document).on("click","input.copy-mailing",function(){var g=$(this).closest(".address-container").find(".address");if($(this).is(":checked")){g.filter(".Billing").find("input,select").addClass("disabled").attr("disabled","disabled")}else{g.filter(".Billing").find("input,select").removeClass("disabled").removeAttr("disabled")}});$(document).on("click","a.add-account",function(){var h=$(this).data("type");var g=$(this).data("account-json")||{};Accounts.showModal(h,g);return false});var b=[e.find("form"),a.find("form")];_.each(b,function(g){initVerifyAddress({addressForm:g,verifyContainer:g.find(".verified-address-container"),unverifyContainer:g.find(".unverified-address-container"),submit:function(){g.find(".ajax-loader").show();g.find(".errors").empty().hide()},error:function(h){Accounts.showError(g,h);g.find(".ajax-loader").hide()},success:function(){g.find(".ajax-loader").hide();var i=g.find(".address.Mailing").find("input,select");var k=i.filter("[name=street1]").val();var l=i.filter("[name=street2]").val();var h=i.filter("[name=city]").val();var j=i.filter("[name=state]").val();var m=i.filter("[name=zip]").val();if(Accounts.prevMailing){if(k===Accounts.prevMailing.Street1&&l===Accounts.prevMailing.Street2&&h===Accounts.prevMailing.City&&j===Accounts.prevMailing.State&&m===Accounts.prevMailing.Zip){g.find(".selected-address").find("input").attr("checked","checked");g.trigger("saveform");return}}g.find(".page").hide();g.find(".page2").show();g.find(".search-results").show()}})});$(document).on("click",".back",function(){var g=$(this).closest(".modal-body");g.find(".page").hide();g.find(".page1").show()});$(document).on("click","button.save-form",function(){$(this).closest("form").trigger("saveform");return false});$(document).on("saveform","form.add-account",function(g){g.preventDefault();Accounts.saveForm($(this),f,c)})},refreshAccount:function(a){Accounts.fullCache=_.reject(Accounts.fullCache,function(b){return b.AccountID===a});Accounts.refreshMenu(false,a);if(Accounts.elements.searchBox){Accounts.elements.searchBox.autosearch("clearCache")}},init:function(g){Utility.initBase(Accounts);Accounts.elements.addCardModal.modal({show:false});Accounts.elements.accountContainer.on("click","#add-credit-card",function(){Accounts.elements.addCardModal.modal("show");return false});Accounts.elements.addCardModal.find("form").submit(function(){var j=$(this).serializeObject();var i=$("#account-detail").data("accountid");j.accountid=i;$.post(Accounts.urls.addCard,j,function(){$(".modal.in").modal("hide");Accounts.refreshAccount(i)});return false});$(".modal .cancel").click(function(){$(".modal.in").modal("hide");return false});var a=$("#add-quote-modal").modal({show:false});var e=a.find(".save-quote");var d=a.find(".next-modal");var b={business:"--NEW BUSINESS--",person:"--NEW PERSON--",billing:"--SAME-AS-BILLING--"};a.on("shown",function(){a.find("#shippingaccountid").focus()});a.on("change","#shippingaccountid",function(){var j=$(this).val();var i=(j===b.billing);e.toggle(i);d.toggle(!i)});a.find("form").on("submit",function(k){var o=a.find("#shippingaccountid").val();var l=this;var i=$(this);if(o===b.billing||!l.checkValidity()){return true}k.preventDefault();$(".modal.in").modal("hide");var n=(o===b.person)?"Person":"Business";var j=$("#same-as-billing-option").text();var m=Accounts.showModal(n,{},{data:i.serializeObject(),action:i.attr("action"),method:i.attr("method")||"get",info:"Adding a quote to <strong>"+j+"</strong>"});m.one("hidden",function(){l.reset()})});Accounts.elements.accountContainer.on("click","#add-quote",function(){a.modal("show");return false});var h=$("#add-storage-modal").modal({show:false});Accounts.elements.accountContainer.on("click","#add-storage",function(){h.modal("show")});Accounts.initAddModals(function(i){if(i.redirect){window.location=i.redirect}Accounts.refreshAccount(i.AccountID)});Accounts.elements.searchBox.autosearch(Accounts.elements.menuContainer,{serviceUrl:Accounts.urls.search,cache:false,onSuggest:function(i){Accounts.currentPage=0;Accounts.refreshMenu(i,"auto")}});Accounts.elements.menuContainer.on("click",".account",function(){var i=$(this).data("accountid");Accounts.showAccount(i);return false});Accounts.elements.accountContainer.on("click","#account-quote-table tr",function(){var i=$(this).find("td a").attr("href");if(i){Utility.showOverlay();window.location=i}});$("#account-menu-scroll").hover(function(){$(this).css("overflow","auto")},function(){$(this).css("overflow","hidden")});$("#account-menu-scroll").bind("scroll",function(i){var j=$(i.currentTarget);if(j[0].scrollHeight-j.scrollTop()-5<j.outerHeight()){Accounts.currentPage=Accounts.currentPage+1;Accounts.refreshMenu(false)}});g=g||"auto";Accounts.refreshMenu(false,g);var f=("state" in window.history);var c=location.href;History.Adapter.bind(window,"statechange",function(){var i=!f&&location.href==c;if(i){return}var j=History.getState();Accounts.showAccount(j.data.accountid,false,true)})}};/*
    storage.js
*/
var Storage={InventoryItems:[],elements:{comments:".user-comment-container",addcomment:"#add-comment",commentText:"#comment-text",editComment:"#comment-edit-container",saveComment:"#comment-container",loadingComment:"#add-comment-loader",editCommentText:"#comment-edit-text"},getItem:function(d){function b(e){return e.ItemID===d||$.trim((e.Name||"").toLowerCase())===$.trim((d||"").toLowerCase())}var c=_.find(Storage.InventoryItems,b);var a=_.find(Storage.InventoryItems,b);return c||a},templateComment:function(a){var c=$($.parseHTML(Storage.commentTemplate(a)));$("#user-no-comments").remove();var b=$(".user-comment-container").append(c);b[0].scrollTop=b[0].scrollHeight},showLoadingComment:function(){Storage.elements.editComment.addClass("disabled").attr("disabled","disabled");Storage.elements.addcomment.addClass("disabled").attr("disabled","disabled");Storage.elements.loadingComment.show()},hideLoadingComment:function(){Storage.elements.editComment.removeClass("disabled").removeAttr("disabled","disabled");Storage.elements.addcomment.removeClass("disabled").removeAttr("disabled","disabled");Storage.elements.loadingComment.hide()},initView:function(j){Utility.initBase(Storage);this.commentTemplate=_.template($("#storage-comment-template").html());$("#email-log").find("tr.toggle").click(function(){$(this).next(".hidden").toggle()});$("#edit-notes-link").click(function(){$("#edit-notes").show();$("#notes").hide()});$("#cancel-edit-notes-link").click(function(){$("#edit-notes").hide();$("#notes").show()});PaymentModal.init($(".add-payment-modal"));$("#add-payment").click(function(){PaymentModal.show();return false});var c=$("#change-amount-modal").modal({show:false});$("#change-monthly-payment").click(function(){c.modal("show");return false});$("#invoice-table form").submit(function(){return confirm("Are you sure you want to cancel this invoice? This cannot be undone.")});var a=$("#add-card-modal").modal({show:false});var g=a.find("#new-card").hide();var e=false;a.find("form").on("submit",function(l){l.preventDefault();if(e){return}var m=a.find(".errors");var o=a.find("#cc-submit-loader");var n=$(this);var r=n.attr("action");var k=n.serialize();m.empty().hide();o.show();var q=n.find("[type=submit]").prop("disabled");e=true;var p=$.post(r,k);p.success(function(s){if(s.Errors&&s.Errors.length>0){m.append(s.Errors[0].ErrorMessage);m.show()}else{window.location.reload()}});p.fail(function(){m.append("Error processing card");m.show()});p.always(function(){o.hide();q=n.find("[type=submit]").removeProp("disabled");e=false})});$("input[name=paymentType]").change(function(){var k=$(this).val()==="NEW_CARD";g.toggle(k);g.find("[name=name]").toggleAttr("required",k);g.find("[name=cardnumber]").toggleAttr("required",k)});$("#add-card").click(function(){a.modal("show");return false});$("#btn-close").click(function(){return window.confirm("Are you sure you want to close this account?")});var i={readAsMap:{".*":"DataURL"},dragClass:"filedrop",on:{loadstart:function(){Utility.showOverlay()},load:function(l,m){var n=l.target.result;var k=n.split(",")[1];$.post(SERVER.baseUrl+"Storage/UploadFile",{data:k,name:m.name,contentType:m.type,storageid:$("[name=current-storage-id]").val()},function(){window.location.reload()})}}};var h=_.max($("#job-specifics .section").map(function(){return $(this).height()}).get());$("#job-specifics .section").height(h);$("#add-storage-file, body").fileReaderJS(i);$.post(SERVER.baseUrl+"Storage/GetComments",{storageid:j},function(m){var l=_.map(m,function(n){return new StorageComment(n)});_.each(l,function(n){Storage.templateComment(n)});var k=$(".user-comment-container");k[0].scrollTop=k[0].scrollHeight});var f=$("#add-comment-loader").hide();$("#save-comment").click(function(){var m=$(".save-comment-container textarea").val();var l=$(this).data("id");f.show();var k=$.post(SERVER.baseUrl+"Storage/EditComment",{commentid:l,text:m},function(p){var n=new StorageComment(p);var o=$(".user-comment-container").find("[data-commentid="+n.CommentID+"]");o.replaceWith(Storage.commentTemplate(n));b()});k.always(function(){f.hide()});return false});$("#comment-text").keydown(function(k){if(k.keyCode===Keys.ENTER&&k.shiftKey){return true}if(k.keyCode===Keys.ENTER){$("#add-comment").click();return false}});var d=false;$("#add-comment").click(function(){var l=Utility.htmlEncode($("#comment-text").val());var k=j;if(!l||d){return}d=true;f.show();$.post(SERVER.baseUrl+"Storage/AddComment",{storageid:k,text:l},function(m){Storage.templateComment(new StorageComment(m));$("#comment-text").val("");d=false;f.hide()})});var b=function(){Storage.elements.editComment.hide();Storage.elements.saveComment.show();Storage.elements.commentText.val("");Storage.elements.editCommentText.val("")};Storage.elements.comments.on("click",".edit-icon",function(){var k=$(this).data("commentid");var l=$(this).data("text");Storage.elements.saveComment.hide();Storage.elements.editComment.show();Storage.elements.editComment.find("textarea").val(l).focus().select();Storage.elements.editComment.find("#save-comment").data("id",k);return false});Storage.elements.comments.on("click",".delete-icon",function(){var l=$(this).data("commentid");b();if(confirm("Are you sure you want to remove this comment? This can't be undone.")){Storage.showLoadingComment();var k=$.post(SERVER.baseUrl+"Storage/EditComment",{commentid:l,text:"","delete":true});k.always(function(){});Storage.hideLoadingComment();$(this).closest(".user-comment").slideUp()}return false});Storage.elements.editComment.find(".cancel").click(function(){b();return false})},init:function(){var a=_.map(Storage.InventoryItems,function(b){return{value:b.Name,alts:_.flatten([[(b.KeyCode||"").toString(),b.PluralName],b.Aliases])}});$("#inventory-add").autocomplete({lookup:a,partialMatch:true,selectFirst:true,maxSuggestions:10,orderBy:SearchFunctions.itemAutocompleteSort,onSelect:function(d,c){var b=Storage.getItem(d);$("#add-item-form [name=itemid]").val(b.ItemID);if(c.keyCode===Keys.TAB){c.preventDefault()}$("#add-item-form [name=count]").focus();return false}})}};window.StorageComment=(function(){function a(c){var b;c=c!=null?c:{};this.Text=c.Text,this.UserName=c.UserName,this.IsEditable=c.IsEditable;this.CommentID=(b=c.CommentID)!=null?b:Utility.randomid();if(c.Date&&!c.Date.getDate){this.Date=new Date(c.Date)}else{this.Date=c.Date}}a.prototype.GetDateString=function(){if(new Date().toDateString()===this.Date.toDateString()){return prettyDate(this.Date)}else{return this.Date.format("mmm d, yyyy' at 'h:MM TT")}};a.prototype.getCommentClass=function(){if(SERVER.username===this.UserName){return"logged-in-user"}else{return""}};return a})();/*
    schedule-map.js
*/
(function(a){a.ScheduleMap={getIcon:function(b,d){var c=["darkblue","gray","green","lightblue","limegreen","orange","purple","red","white","yellow"];return SERVER.baseUrl+"static/img/mapicons/"+c[b]+"/number_"+d+".png"},init:function(i,e){var f=new google.maps.LatLng(e.Latitude,e.Longitude);var h={zoom:10,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP};var g=new google.maps.Map(document.getElementById("map"),h);var c=_.groupBy(i,function(j){if(j.Crew.length<=0){return""}return j.Crew[0]});var b=[];var d=[];_.each(c,function(l,m){var k=m;if(!k){return}var n=function(o){while(_.contains(d,o.Latitude+" "+o.Longitude)){o.Longitude+=0.02}};var j=0;_.each(l,function(s){j++;n(s.Origin);d.push(s.Origin.Latitude+" "+s.Origin.Longitude);var r=ScheduleMap.getIcon(k-1,j);var p=new google.maps.Marker({map:g,position:new google.maps.LatLng(s.Origin.Latitude,s.Origin.Longitude),title:"Origin "+s.Lookup+"( Arrival Window: "+s.ArrivalWindow+")",icon:r});b.push(p);if(s.Origin.Latitude===s.Dest.Latitude&&s.Origin.Longitude===s.Origin.Longitude){return}j++;n(s.Dest);d.push(s.Dest.Latitude+" "+s.Dest.Longitude);var o=ScheduleMap.getIcon(k-1,j);var q=new google.maps.Marker({map:g,position:new google.maps.LatLng(s.Dest.Latitude,s.Dest.Longitude),title:"Destination "+s.Lookup+"( Arrival Window: "+s.ArrivalWindow+")",icon:o});b.push(q)})})}}})(window);/*
quote-manager.js
*/
(function(b,a){$.ajaxSetup({cache:false});b.QuoteManager={dialogs:{status:"#status-modal",owner:"#change-owner-modal"},page:0,totalPages:0,templates:{quote:"#quote-lookup",filtersApplied:"#filter-applied",stats:"#stat-boxes"},elements:{quoteTable:"#quote-table",ownerSelect:"#quote-table-actions select[name=quote-owner]",statusSelect:"#quote-table-actions select[name=quote-status]",typeSelect:"#quote-table-actions select[name=quote-type]",timeSelect:"#quote-table-actions select[name=quote-time]",filters:"#quote-table-actions select",filtersApplied:"ul.filters-applied",statTable:"#table-stats",search:"#search-cases"},stats:{open:{Name:"open",BaseQuery:"open",Description:"open",SubStatuses:{unassigned:{Name:"unassigned",BaseQuery:"open AND unassigned",Description:"unassigned"},expired:{Name:"expired",BaseQuery:"expired",Description:"expired"}}},scheduled:{Name:"scheduled",BaseQuery:"scheduled",Description:"scheduled",SubStatuses:{}},lost:{Name:"lost",BaseQuery:"lost AND in the last 30 days",Description:"lost last 30 days",SubStatuses:{}},won:{Name:"won",BaseQuery:"won AND in the last 30 days",Description:"won last 30 days",SubStatuses:{}}},getTake:function(){return parseInt(localStorage["quote-mgr-take"]||25,10)},setTake:function(c){localStorage["quote-mgr-take"]=c},getSort:function(){return localStorage["quote-mgr-sort"]||""},setSort:function(c){localStorage["quote-mgr-sort"]=c},getDesc:function(){if(_.isUndefined(localStorage["quote-mgr-desc"])){return true}return Utility.parseBool(localStorage["quote-mgr-desc"]||"")},setDesc:function(c){localStorage["quote-mgr-desc"]=c},getCachedquery:function(){return localStorage["quote-mgr-query"]||""},setCachedquery:function(c){localStorage["quote-mgr-query"]=c},getSearch:function(){return this.elements.search.val()},getOwner:function(){return this.elements.ownerSelect.val()},getDisplayOwner:function(){return this.elements.ownerSelect.val().replace("*","")},getStatus:function(){return this.elements.statusSelect.val()},getType:function(){return this.elements.typeSelect.val()},getTime:function(){return this.elements.timeSelect.val()},getSavedPage:function(){return parseInt(localStorage["quote-mgr-savepage"],10)},setSavedPage:function(c){if(!c){localStorage.removeItem("quote-mgr-savepage")}else{localStorage["quote-mgr-savepage"]=c}},getSavedSearch:function(){return localStorage["quote-mgr-savesearch"]},setSavedSearch:function(c){if(!c){localStorage.removeItem("quote-mgr-savesearch")}else{localStorage["quote-mgr-savesearch"]=c}},showLoading:function(){$("#quote-table-container-loading").show()},hideloading:function(){$("#quote-table-container-loading").hide()},updateFilterDisplay:function(){var c=this;var d=[{category:"quote-owner",name:this.getDisplayOwner()},{category:"quote-status",name:this.getStatus()},{category:"quote-type",name:this.getType()},{category:"quote-time",name:this.getTime()},{category:"quote-search",name:this.getSearch()?"keyword: "+this.getSearch():""}];this.elements.filtersApplied.empty();d.forEach(function(e){if(e.name){var f=c.templates.filtersApplied(e);c.elements.filtersApplied.append(f)}})},updateStatusSelection:function(){var d=this.getStatus();var c=this.elements.statTable.find(".stat-selector").removeClass("selected");if(d==="won"||d==="lost"){if(this.getTime()==="in the last 30 days"){c.filter("."+d).addClass("selected")}}else{if(d){c.filter("."+d).addClass("selected")}}},setFilters:function(c){this.elements.filters.reset();c=c||"";var d=c.split("AND").map(function(e){return $.trim(e)});this.elements.filters.each(function(){var e=$(this);var f=e.find("option");f.each(function(){var g=$(this).attr("value");if(_.contains(d,g)){e.val(g)}})});this.elements.filters.selectpicker("render");this.elements.filters.filter(":first").trigger("change");if(!c){return}},getQuery:function(){var d=(this.getStatus()==="unassigned")?"unassigned":this.getOwner();var c=[d,this.getStatus(),this.getType(),this.getTime(),this.getSearch()];c=_.filter(c,function(e){return !!e});return c.join(" AND ")},getStatQuery:function(){var c=[this.getOwner(),this.getType(),this.getSearch()];c=_.filter(c,function(d){return !!d});return c.join(" AND ")},init:function(f){Utility.initBase(this);var d=this;var h;this.elements.filters.on("change",function(){d.page=0;d.total=0;l()});if(f){d.setFilters("");d.elements.search.val(f)}this.elements.filtersApplied.on("click","li",function(){var o=$(this).data("category");var p=(o==="quote-search")?d.elements.search:d.elements.filters.filter("[name="+o+"]");p.reset();p.selectpicker("render");p.trigger("change").trigger("search");return false});$(".show-qty").on("click",function(o){var q=$(o.target).closest("[data-qty]");if(q.length===0||q.is(".inactive")){return false}var p=parseInt(q.data("qty"),10);d.setTake(p);d.page=0;l();j();return false});$(".page-stepper").on("click",function(o){var p=$(o.target).closest(".page-selector");if(p.is(".inactive")){return false}if(p.is(".next-page")){d.page++}else{if(p.is(".previous-page")){d.page--}else{if(p.is(".first-page")){d.page=0}else{if(p.is(".last-page")){d.page=d.totalPages-1}}}}l()});$("#print").click(function(){b.print()});$(".search-mag").click(function(){d.elements.search.trigger("search")});this.elements.search.on("keypress",function(o){if(o.target===Keys.ENTER){$(this).trigger("search")}});this.elements.search.on("search",function(){d.page=d.total=0;l()});this.dialogs.owner.add(this.dialogs.status).find("form").on("submit",function(){d.setSavedPage(d.page);d.setSavedSearch(d.getSearch())});this.elements.quoteTable.find("thead tr.sort-col").on("click","th a",function(){var p=$(this);var o=Utility.parseBool(p.data("desc"));d.setSort(p.data("sort"));d.setDesc(o);d.elements.quoteTable.find("thead th").removeClass("sel").removeClass("desc").find("a").data("desc",false);var q=p.closest("th");q.addClass("sel");q.toggleClass("desc",o);p.data("desc",!o);l();return false});this.elements.quoteTable.on("click","tr[data-quoteid]",function(o){var q=$(o.target);if(q.closest(".btn-group").length===0){var p=$(this).data("quotelookup");var r=SERVER.baseUrl+"Quote/Overview/"+p;Utility.showOverlay();b.location=r}});this.elements.quoteTable.on("click","tr[data-quoteid] .btn-group",function(q){var v=$(q.target).closest("[data-action]");var t=$(this).closest("[data-quoteid]").data("quoteid");var r=$(this).closest("[data-quoteid]").data("quotelookup");if(v.length===0){return}var p=v.data("action");var u=["defer","close","duplicate","reopen"];u.forEach(function(A){if(p===A){var z=d.dialogs.status;var y=v.data("desc");z.find(".title").text(y+" Quote "+r);z.find("[name=action]").val(A.capitalize());z.find("[type=submit]").val(y+" Quote");g(d.dialogs.status,t);d.setSavedPage(d.page)}});if(p==="view-account"){var o=v.closest("[data-accountlookup]").data("accountlookup");var w=SERVER.baseUrl+"Accounts/Index/"+o;Utility.showOverlay();b.location=w}if(p==="change-owner"){g(d.dialogs.owner,r)}if(p==="change-owner-self"){Utility.showOverlay();var s=d.dialogs.owner;var x=$("<input type='text' name='userid'>").val(SERVER.userid);s.find("[name=userid]").replaceWith(x);s.find("[name=id]").val(r);s.find("[name=redirect]").val(SERVER.baseUrl+"Quote/Overview/"+r);s.find("form").submit()}return false});this.elements.statTable.on("click",".stat-selector",function(o){var p=$(o.target).closest(".stat-selector");var q=p.data("query");d.setFilters(q);d.elements.statTable.find(".stat-selector").removeClass("selected");p.addClass("selected");l()});$(".filter-reset").click(function(){d.elements.search.val("");d.setFilters("")});$(".selectpicker").selectpicker();var c=this.elements.quoteTable.find("a[data-sort="+d.getSort()+"]");if(c.length>0){this.elements.quoteTable.find("th").removeClass("sel desc");c.closest("th").addClass("sel").toggleClass("desc",d.getDesc());c.data("desc",!d.getDesc())}if(Utility.isJson(d.getCachedquery())){var e=JSON.parse(d.getCachedquery());d.setCachedquery(a);d.setFilters(e.search)}if(d.getSavedPage()){d.page=d.getSavedPage();d.setSavedPage(a)}if(d.getSavedSearch()){d.elements.search.val(d.getSavedSearch());d.setSavedSearch(a)}l();m();j();function g(o,p){o.find("[name=id]").val(p);o.modal("show")}function j(){$(".pagination").find("a").removeClass("active").filter("[data-qty="+d.getTake()+"]").addClass("active")}function k(){d.page=Math.max(d.page,0);d.page=Math.min(d.totalPages-1,d.page);$(".next-page,.last-page").toggleClass("inactive",d.page>=d.totalPages-1);$(".previous-page,.first-page").toggleClass("inactive",d.page<=0)}function m(o){o=o||$.noop;var p=d.getStatQuery();if(h===p){o();return}h=p;$.getq("stat-manager",SERVER.baseUrl+"Quote/GetStats",{search:h},function(q){d.stats.open.Count=q.OpenCount;d.stats.open.Amount=q.OpenAmount;d.stats.scheduled.Count=q.ScheduledCount;d.stats.scheduled.Amount=q.ScheduledAmount;d.stats.lost.Amount=q.Lost30DaysAmount;d.stats.lost.Count=q.Lost30DaysCount;d.stats.won.Count=q.Won30DaysCount;d.stats.won.Amount=q.Won30DaysAmount;d.stats.open.SubStatuses.expired.Count=q.ExpiringCount;d.stats.open.SubStatuses.unassigned.Count=q.UnassignedCount;_.each(d.stats,function(r){var s=function(t){t.Query=t.BaseQuery;if(h!==""){t.Query+=" AND "+h}};s(r);_.each(r.SubStatuses,s)});d.elements.statTable.empty();$.each(d.stats,function(r,s){var t=d.templates.stats(s);d.elements.statTable.append(t)});o()})}function l(){var s=SERVER.baseUrl+"Quote/Index";var p={search:d.getQuery(),page:d.page,take:d.getTake(),sort:d.getSort(),desc:d.getDesc()};if(JSON.stringify(p)===d.getCachedquery()){o();return}d.setCachedquery(JSON.stringify(p));d.showLoading();d.updateFilterDisplay();var r=n(p);var q=$.getq("quote-manager",s,p,function(v){var u=v.Quotes.map(function(x){return new Quote(x)});var t=new PagedResult(v.PagedResult);var w=d.elements.quoteTable.find("tbody").empty();u.forEach(function(x){w.append(d.templates.quote(x))});$(".current-page").text(t.Description);d.totalPages=t.PageCount;k(d.totalPages)});$.when(r,q).then(function(){if(!$.ajaxq.isRunning("quote-manager")){d.hideloading()}});o();function o(){m(function(){d.updateStatusSelection()})}}var i=_.template($("#storage-account").html());function n(o){var p=SERVER.baseUrl+"Quote/GetStorageAccounts";return $.postq("quote-manager",p,o,function(s){var q=s;var r=s.map(function(t){return i(t)});console.log(r);$("#storage-table tbody").html(r);$("#storage-table-container").toggle(q.length>0)})}}}})(window);/*
    quotes.js
*/
var Quotes={quoteid:null,lookup:null,saveInterval:1000,saveFunctions:[],competitors:[],showSummary:function(){return _.isUndefined($.cookie("show-quote-summary"))?true:Utility.parseBool($.cookie("show-quote-summary"))},bindSave:function(c){var d=function(){};var b=function(){};var a=function(){};Quotes.saveFunctions.push(function(){c(d,b,a)})},save:function(){_.each(Quotes.saveFunctions,function(a){a()})},templates:{quicklook:"#quote-quicklook-template",comment:"#quote-comment-template"},elements:{quicklook:"#quote-quicklook",comments:".user-comment-container",addcomment:"#add-comment",commentText:"#comment-text",editComment:"#comment-edit-container",saveComment:"#comment-container",loadingComment:"#add-comment-loader"},urls:{quicklook:SERVER.baseUrl+"Quote/GetQuicklook",postComment:SERVER.baseUrl+"Quote/AddComment",getComments:SERVER.baseUrl+"Quote/GetComments",editComment:SERVER.baseUrl+"Quote/EditComment"},templateComment:function(a){var b=$($.parseHTML(Quotes.templates.comment(a)));$("#user-no-comments").remove();Quotes.elements.comments.append(b);Quotes.elements.comments[0].scrollTop=Quotes.elements.comments[0].scrollHeight},updateQuicklook:function(a){if(!a){$.post(Quotes.urls.quicklook,{quoteid:Quotes.quoteid},function(b){Quotes.updateQuicklook(b)})}else{Quotes.elements.quicklook.empty().append(Quotes.templates.quicklook(a))}},addCompetitor:function(a,c){var d=SERVER.baseUrl+"Quote/AddCompetitor";var b={quoteid:Quotes.quoteid,competitorID:a,name:c};$.post(d,b,function(e){$("#competitor-container").find(".selection-badge[data-id="+a+"]").data("id",e).find(".icon-remove").show()})},removeCompetitor:function(b){var c=SERVER.baseUrl+"Quote/RemoveCompetitor";var a={quoteid:Quotes.quoteid,relid:b};$.post(c,a)},showLoadingComment:function(){Quotes.elements.editComment.addClass("disabled").attr("disabled","disabled");Quotes.elements.addcomment.addClass("disabled").attr("disabled","disabled");Quotes.elements.loadingComment.show()},hideLoadingComment:function(){Quotes.elements.editComment.removeClass("disabled").removeAttr("disabled","disabled");Quotes.elements.addcomment.removeClass("disabled").removeAttr("disabled","disabled");Quotes.elements.loadingComment.hide()},init:function(g,d){Utility.initBase(Quotes);Quotes.quoteid=g.QuoteID;Quotes.lookup=g.Lookup;Quotes.competitors=d;if($.cookie("last-quote")!==Quotes.quoteid){$.cookie("last-quote",Quotes.quoteid,{path:"/"});$.cookie("show-quote-summary",false,{path:"/"})}Quotes.elements.loadingComment.hide();Quotes.initCompetitors();var i=$("#shipping-info");var h=$("#toggle-shipping-info");h.click(function(){var j=i.is(":visible");$.cookie("show-quote-summary",!j,{path:"/"});i.slideToggle("slow");h.find("i").toggleClass("icon-chevron-up icon-chevron-down")});Accounts.initAddModals(function(){window.location.reload()},false);Quotes.updateQuicklook();$.post(Quotes.urls.getComments,{quoteid:Quotes.quoteid},function(k){var j=_.map(k,function(l){return new QuoteComment(l)});_.each(j,function(l){Quotes.templateComment(l)});Quotes.elements.comments[0].scrollTop=Quotes.elements.comments[0].scrollHeight});var b=$("#change-owner-modal").modal({show:false});$("#change-user-button").click(function(){b.modal("show");return false});$("#save-button").click(function(){Quotes.save();var j=$(this).attr("href");Utility.showOverlay();var k=false;setInterval(function(){if(!$.ajaxq.isRunning()&&!k){k=true;window.location=j}},100)});var a=function(){Quotes.elements.editComment.hide();Quotes.elements.saveComment.show();Quotes.elements.commentText.val("")};Quotes.elements.comments.on("click",".edit-icon",function(){var j=$(this).data("commentid");var k=$(this).data("text");Quotes.elements.saveComment.hide();Quotes.elements.editComment.show();Quotes.elements.editComment.find("textarea").val(k).focus().select();Quotes.elements.editComment.find("#save-comment").data("id",j);return false});Quotes.elements.comments.on("click",".delete-icon",function(){var k=$(this).data("commentid");a();if(confirm("Are you sure you want to remove this comment? This can't be undone.")){Quotes.showLoadingComment();var j=$.post(Quotes.urls.editComment,{commentid:k,text:"","delete":true});j.always(function(){});Quotes.hideLoadingComment();$(this).closest(".user-comment").slideUp()}return false});var c=$("#status-modal").modal({show:false});$("#change-quote-status").find("a.action").click(function(){$(this).siblings("input[type=submit]").click();return false});$("#change-quote-status").submit(false);$("#change-quote-status").find("[type=submit]").click(function(){var j=$(this).val();var k=$(this).data("title");c.find("[name=action]").val(j);c.find(".title").text(k);c.find("[type=submit]").val(k);c.modal("show");c.find("textarea").first().focus();return false});var f=$("#change-movedate-modal").modal({show:false});$("#edit-move-date").click(function(){f.modal("show");return false});Quotes.elements.commentText.keydown(function(j){if(j.keyCode===Keys.ENTER&&j.shiftKey){return true}if(j.keyCode===Keys.ENTER){Quotes.elements.addcomment.click();return false}});Quotes.elements.editComment.find("#save-comment").click(function(){var l=Quotes.elements.editComment.find("textarea").val();var k=$(this).data("id");Quotes.showLoadingComment();var j=$.post(Quotes.urls.editComment,{commentid:k,text:l},function(o){var m=new QuoteComment(o);var n=Quotes.elements.comments.find("[data-commentid="+m.CommentID+"]");n.replaceWith(Quotes.templates.comment(m));a()});j.always(function(){Quotes.hideLoadingComment()});return false});Quotes.elements.editComment.find(".cancel").click(function(){a();return false});var e=false;Quotes.elements.addcomment.click(function(){var k=Utility.htmlEncode(Quotes.elements.commentText.val());var j=Quotes.quoteid;if(!k||e){return}e=true;Quotes.showLoadingComment();$.post(Quotes.urls.postComment,{quoteid:j,text:k},function(l){Quotes.templateComment(new QuoteComment(l));Quotes.hideLoadingComment();Quotes.elements.commentText.val("");e=false})});setInterval(function(){Quotes.save()},Quotes.saveInterval)},initCompetitors:function(){var a=_.template($("#competitor-template").html());$("#competitor-container").append(_.map(Quotes.competitors,function(b){return a(b)}).join(""));$("#competitor-select").click(function(){$(this).find("select").click()});$("#competitor-select select").click(function(b){b.stopPropagation()});$("#competitor-select select").change(function(){var c=$(this).val();var b=$(this).find("[value="+c+"]");var e=b.text();if(e==="Other"){e=window.prompt("What is the name of the competitor?")}if(!e){$(this).val("SELECT");return}b.remove();var d=$($.parseHTML(a({Name:e,ID:c})));d.find(".icon-remove").hide();$("#competitor-container").append(d);Quotes.addCompetitor(c,e);$(this).val("SELECT")});$("#competitor-container").on("click",".icon-remove",function(){var b=$(this).closest(".selection-badge").data("id");Quotes.removeCompetitor(b);$(this).closest(".selection-badge").remove()})}};/*
    stops.js
*/
(function(c){var f={currentStops:[],currentStopIndex:0,searchResults:{},currentPage:null,initNew:function(){f.currentStops.empty()},initEdit:function(){f.resetModal();Stops.elements.stopModal.find("#btn-delete-stop").show();Stops.elements.stopModal.find("button[data-continue=true]").hide();f.showPage("page1")},isFirst:function(){return f.currentStopIndex===0},isLast:function(){return f.currentStopIndex===(f.currentStops.length-1)},showStop:function(g){if(!f.currentStops||f.currentStops.length===0){f.stopToForm(g);f.showPage("page1");Stops.elements.stopModal.find("#selected-address").show();return}f.currentStop=g;if(f.isFirst()){Stops.elements.stopModal.find(".asdofsadfsadf").toggleClass("")}if(f.isLast()){Stops.elements.stopModal.find(".asdofsadfsadf").toggleClass("")}},actions:{close:function(){f.resetModal();$(".modal.in").modal("hide")},forward:function(){if(f.currentPage==="page1"){f.showPage("page2")}else{if(!f.isLast()){f.showStop(f.currentStops[f.currentStopIndex+1])}}},back:function(){if(f.currentPage==="page2"){f.showPage("page1")}else{if(!f.isFirst()){f.showStop(f.currentStops[f.currentStopIndex-1])}}},save:function(){var h=Stops.elements.stopModal.find("form.page2");var g=$(this).data("continue");h.find("[type=submit]").data("continue",g).click();return false}},resetModal:function(){Stops.elements.stopModal.find(".search-results").hide();Stops.elements.stopModal.find(".no-search-results").show();Stops.elements.stopModal.find("#searchTextField").val("");Stops.elements.stopModal.find("#selected-address").hide().find("[checked]").removeAttr("checked");Stops.elements.stopModal.find(".verified-address-container").empty();Stops.elements.stopModal.find(".unverified-address-container").empty();Stops.elements.stopModal.find(".show-custom").removeClass(".show-custom");Stops.elements.stopModal.find("form").each(function(){this.reset()})},templateHeader:function(i){var g=Stops.elements.stopModal.find(".nav-ul-steps");var h=Utility.range(0,i).map(function(j){return Stops.templates.navTemplate({Index:j})}).join("");g.empty().append(h)},showPage:function(j){if(j==="page2"){var k=$("input[name='address-select']:checked");if(k.length===0){e("page1","Please select an address");return false}}$("#address-find-error").hide();f.currentPage=j;f.templateHeader(f.currentStops.length);Stops.elements.stopModal.find(".page").hide();Stops.elements.stopModal.find(".nav-ul-steps").find("li").removeClass("active");Stops.elements.stopModal.find(".add-stop-nav-btns").hide();var i=Stops.elements.stopModal.find(".nav-ul-steps li");var g=i.eq(f.currentStopIndex*2).add(i.eq((f.currentStopIndex*2)+1));var h=Stops.elements.stopModal.find("."+j);h.trigger("show");h.show();$(g).filter("[data-step="+j+"]").addClass("active")},stopToForm:function(h){h=h||{};var g=Stops.elements.stopModal;_.each(h,function(k,j){var i=g.find("[name="+j+"]");if(!i.is("[type=radio],[type=submit],[type=checkbox]")){i.val(k)}else{i.toggleAttr("checked",k)}});g.find("[name=stopid]").val(h.id);g.find(".search-results").hide();g.find("#selected-display").text(h.address.display());g.find("#selected-address").show().find("input[type=radio]").attr("checked","checked")}};c.Stops={franchiseAddress:[],templates:{distance:"#distance-template",stop:"#stop-template",navTemplate:"#stops-nav-template"},elements:{error:"#address-find-error",stopModal:"#add-stop-modal",storageModal:"#add-storage-modal",stopLoader:"#save-stop-loader",save:"#add-stop-modal .save",modalPage1:"#add-stop-modal .page1",modalPage2:"#add-stop-modal .page2"},stops:[],getMapUrl:function(g){if(g.Street1){var h=encodeURI(g.display().replace(/[#?$+,\/:&;=@%{}|\\\[\]\^~]/g,""));return"http://maps.googleapis.com/maps/api/streetview?size=460x400&location="+h+"&sensor=false"}return false},init:function(i){Utility.initBase(Stops);Stops.franchiseAddress=window.FranchiseAddress;Stops.stops=_.map(i,function(j){return new Stop(j)});Stops.elements.stopModal.modal({show:false,keyboard:false});Stops.elements.storageModal.modal({show:false,keyboard:false});Stops.elements.storageModal.find("[name=days]").change(function(){var j=$(this).val();Stops.elements.storageModal.find(".storage-msg").toggle(j==="9999")});$("#add-stop").click(function(){Stops.elements.stopModal.find("#btn-delete-stop").hide();Stops.elements.stopModal.modal("show");Stops.elements.stopModal.find("[name=stopid]").val("");f.showPage("page1");f.resetModal()});$("#add-storage").click(function(){Stops.elements.storageModal.modal("show")});$("#btn-delete-stop").click(function(){var j=$("input[name=stopid]").val();if(j&&typeof(j)==="string"){window.location=SERVER.baseUrl+"Quote/DeleteStop/"+j}return false});$("#select-current-address").click(function(){var j=new Address($(this).data("address"));var k=$(".addr-search");j.toForm(k);k.submit();return false});Stops.elements.stopModal.bind("show",function(){f.initNew()});Stops.elements.stopModal.one("show",function(){var k=$("#searchTextField")[0];var l={componentRestrictions:{country:"us"}};var j=new google.maps.places.Autocomplete(k,l);google.maps.event.addListener(j,"place_changed",function(){var n=j.getPlace();function m(p,r){r=r||"long_name";var q=_.filter(n.address_components,function(s){return _.any(s.types,function(t){return t===p})})[0];return(q?q[r]:"")}if(n.address_components){var o={street1:m("street_number")+" "+m("route"),city:m("locality"),state:m("administrative_area_level_1","short_name"),zip:m("postal_code")};Utility.objectToForm(o,Stops.elements.stopModal.find("form.addr-search"));if(o.zip){Stops.elements.stopModal.find("form.addr-search").find("[type=submit]").click()}}else{if(n.name){Stops.elements.stopModal.find("form.addr-search [name=street1]").val(n.name).focus()}}})});Stops.elements.stopModal.on("blur","[name=zip]",function(){var j=$(this).closest("form").find("[name=state]");if(j.val()===""){var k=$(this).val();j.val(Utility.findStateFromZip(k))}});Stops.elements.stopModal.on("click","button",function(k){var l=$(k.target);if(l.is(".cancel")){f.actions.close()}if(l.is(".next")){f.actions.forward()}if(l.is(".back")){f.actions.back()}if(l.is(".save")){var j=l.data("continue");Stops.elements.modalPage2.find("input[name=continue]").val(j);f.actions.save()}});Stops.elements.modalPage1.bind("show",function(){$("#selected-address").hide();$("#searchTextField").val("");b();return false});initVerifyAddress({addressForm:Stops.elements.modalPage1.find("form.addr-search"),verifyContainer:Stops.elements.modalPage1.find(".verified-address-container"),unverifyContainer:Stops.elements.modalPage1.find(".unverified-address-container"),submit:function(){b();Stops.elements.modalPage1.find(".no-search-results").hide()},error:function(j){e("page1",j);Stops.elements.modalPage1.find("form.addr-search").find("[name=zip]").addClass("error")},success:function(){Stops.elements.modalPage1.find(".search-results").show()}});Stops.elements.modalPage2.on("submit",function(){var m=$(this);var p=Stops.elements.modalPage1.find("[name=address-select]:checked");var s=p.is(".verified");var n=Stops.elements.stopModal.find(".page1 form.addr-search").serializeObject();var r=Stops.elements.stopModal.find("[name=stopid]").val();var k=_.find(Stops.stops,function(t){return t.id===r});var l=m.serializeObject();l=$.extend({},l,n);l.id=r;if(p.val()==="CURRENT_SELECTED"&&k){var o=["addressid","city","state","street1","street2","verified","verifiedAddress","zip"];_.each(o,function(t){l[t]=k[t]})}else{l.verified=s;l.verifiedAddress=p.val()}if(k){l.sort=k.sort}if(_.isUndefined(l.sort)){l.sort=_.max(_.pluck(Stops.stops,"sort"))+1;if(l.sort<0){l.sort=0}}Stops.stops=_.filter(Stops.stops,function(t){return t.id!==l.id});var q=new Stop(l);Stops.stops.push(q);Stops.stops=_.sortBy(Stops.stops,function(t){return t.sort});var j=Utility.parseBool(l["continue"]);Stops.save(function(){Stops.retemplate();Quotes.updateQuicklook();if(j){$("#btn-delete-stop").hide();Stops.elements.stopModal.modal("show");Stops.elements.stopModal.find("[name=stopid]").val("");f.showPage("page1");f.resetModal()}else{$(".modal.in").modal("hide")}});return false});var h=Stops.elements.modalPage2.find("[name=floor]");var g=Stops.elements.modalPage2.find("#elevatorType");Stops.elements.modalPage2.bind("show",function(){var j=new Address($("form.addr-search").serializeObject());var k=Stops.getMapUrl(j);if(k){$("#maps-holder").attr("src",Stops.getMapUrl(j)).show()}else{$("#maps-holder").hide()}h.toggleAttr("disabled",g.val()==="No_Elevator");h.toggleAttr("required",g.val()!=="No_Elevator");return false});g.change(function(){h.toggleAttr("disabled",g.val()==="No_Elevator");h.toggleAttr("required",g.val()!=="No_Elevator")});$("#stop-container").on("click",".stop-edit",function(){var k=$(this).data("stopid");var j=_.find(Stops.stops,function(l){return l.id===k});f.initEdit();Stops.elements.stopModal.modal("show");f.showStop(j);return false});Stops.elements.stopLoader.hide();Stops.retemplate()},save:function(g){var h=JSON.stringify(Stops.stops);var i=Quotes.quoteid;Stops.elements.stopLoader.show();Stops.elements.save.addClass("disabled").attr("disabled","disabled");$.postq("Quotes",SERVER.baseUrl+"Quote/Stops",{quoteid:i,stopsjson:h},function(j){_.each(j,function(m,k){var l=_.find(Stops.stops,function(n){return n.id===k});l.id=m[0];l.addressid=m[1];l.address.AddressID=m[1]});Stops.elements.stopLoader.hide();Stops.elements.save.removeClass("disabled").removeAttr("disabled");(g||$.noop)()})},retemplate:function(){var g=$("#stop-container").empty();var h=_.sortBy(Stops.stops,function(i){return i.sort});_.each(h,function(m){var j=Stops.templates.distance;var i=$.trim(j(m));var l=$($.parseHTML(i));var k=$($.parseHTML(i));a(m,l,k);g.append(l).append($.trim(Stops.templates.stop(m))).append(k)})}};function b(){Stops.elements.error.empty().hide();Stops.elements.stopModal.find("input,select").removeClass("error")}function e(h,g){Stops.elements.error.empty().text(g).show()}function a(l,k,i){var g=Stops.stops.indexOf(l);var j=(g===0)?Stops.franchiseAddress:Stops.stops[g-1].address;var h=(g===Stops.stops.length-1)?Stops.franchiseAddress:Stops.stops[g+1].address;if(g===0){d(j,l.address,function(m){k.find(".loading").hide();k.find(".loaded").show();k.find(".mileage").text(m.distance);k.find(".hours").text(Utility.formatHours(m.time))})}else{k.hide().find(".loading").remove();$(".stop").each(function(){if($(this).data("stopid")===l.id){$(this).find(".btn-flip").remove()}})}d(l.address,h,function(m){i.find(".loading").hide();i.find(".loaded").show();i.find(".mileage").text(m.distance);i.find(".hours").text(Utility.formatHours(m.time))})}function d(g,h,i){var j=SERVER.baseUrl+"Address/GetDistance";$.get(j,{address1id:g.AddressID,address2id:h.AddressID},i)}})(window);/*
    inventory.js
*/
(function(a){var c={dialogs:{addCustom:"#custom-inventory-dialog"},show:function(){c.dialogs.addCustom.modal("show")},hide:function(){c.dialogs.addCustom.modal("hide")},init:function(e){Utility.initBase(c);var d=c.dialogs.addCustom;function f(h,g){d.find("[name="+h+"]").addClass("error");d.find(".error").empty().append(g).show()}d.on("show",function(){d.find(".error").empty().hide()});d.find("form").bind("submit",function(){var g=$(this).serialize();var i=$(this).attr("action");var h=$.post(i,g);$(this).find(":input.error").removeClass("error");h.success(function(j){if(j.Errors){f(j.Errors[0].PropertyName,j.Errors[0].ErrorMessage);return}c.hide();e(j)});h.error(function(){f("","There was an error processing your request. Please try again");return});return false})}};var b={currentRoom:null,hasChanged:false,isSliding:false,categories:[],options:[],selectedroominventoryitemid:null,setChanged:function(d){if(d){$("#inventory-price-loader").show()}b.hasChanged=d},editable:true,dialogs:{additionalQuestions:"#inventory-item-question",packingList:"#packing-list",roomModal:"#add-room-modal",history:"#inventory-history"},templates:{roomMenu:"#room-menu-template",roomBody:"#room-body-template",itemTemplate:"#item-template",questionTemplate:"#inventory-item-question-template"},elements:{roomType:"select[name=roomType]",roomTypeCustom:"input[name=roomTypeCustom]",addRoom:"#add-room",addItemForm:"#add-item-form",addRoomButton:"#add-room-button",addItem:"#add-item",itemQuantity:"#add-item-quantity",itemStorage:"#add-item-storage",submit:"#add-item-submit",cancel:"#add-item-cancel",roomMenu:".room-menu",roomBody:"#room-list"},urls:{saveInventory:SERVER.baseUrl+"Quote/Inventory"},getRoom:function(d){return _.find(b.rooms,function(e){return e.RoomID===d})},removeRoom:function(e){b.rooms=_.reject(b.rooms,function(f){return f.RoomID===e});b.elements.roomBody.find("[data-roomid="+e+"]").remove();b.elements.roomMenu.find("[data-roomid="+e+"]").remove();b.setChanged(true);if(!_.any(b.rooms)){Utility.showOverlay();(function d(){setTimeout(function(){if(!$.ajaxq.isRunning()&&!b.hasChanged){window.location.reload()}else{d()}},100)})()}},getCondensedRooms:function(){return b.rooms.map(function(d){return{RoomID:d.RoomID,StopID:d.StopID,Items:_.map(d.Items,function(e){return{Count:e.Count,Item:{ItemID:e.Item.ItemID}}})}})},getUnassignedRoom:function(){if(b.stops.length===0){return null}var d=_.filter(b.rooms,function(e){return e.IsUnassigned});if(d.length>0){return d[0]}if(b.rooms.length===1){d=b.rooms[0];d.IsUnassigned=true;d.Sort=9999}else{d=new Room();d.Type="Unassigned";d.Description="";d.StopID=_.first(b.stops).id;d.Sort=9999;d.IsUnassigned=true;b.rooms.push(d);d.retemplate()}if(b.editable){b.setChanged(true)}return d},selectRoom:function(d){b.elements.roomMenu.find(".room-selector").removeClass("sel");b.elements.roomMenu.find(".room-selector[data-roomid="+d+"]").addClass("sel");b.elements.roomBody.find(".room").hide();b.elements.roomBody.find(".room[data-roomid="+d+"]").show();b.currentRoom=b.getRoom(d)},initDraggable:function(d){if(!b.editable){return}if($.browser.ipad||$.browser.iphone||$.browser.android){return}var e={revert:"invalid",revertDuration:10};d.draggable(e)},initDroppable:function(d){if(!b.editable){return}var e={hoverClass:"dropper",accept:function(g){var f=$(this);var h=g.closest("div[data-roomid]").attr("data-roomid");var i=f.data("roomid");return h!==i},drop:function(h,p){var f=$(this);var g=p.draggable;var m=f.attr("data-roomid");var l=g.data("itemid");var n=g.data("roominverntoryitemid");var k=b.getItem(l);var j=g.closest("div[data-roomid]").attr("data-roomid");var i=b.getRoom(j);var o=b.getRoom(m);i.moveItem(o,k,n);i.retemplate();o.retemplate()}};d.droppable(e)},getFormRoom:function(){var e=$("#add-item-roomid").val();var d=e?b.getRoom(e):b.currentRoom;return d},selectItem:function(e,g,h){var f=b.getItem(e);if(!f){f=g.getItem(e)}var d=g.getQuantity(f,b.options,h);var i=g.getStorage(f);$("#add-item-roomid").val(g.RoomID);b.elements.addItem.val(f.Name);b.elements.itemStorage.val(i);b.elements.itemQuantity.val(d);b.elements.itemQuantity.select();b.elements.cancel.show();b.elements.submit.text("Update Item")},showModal:function(e){b.options=[];var f=b.dialogs.additionalQuestions;var g=b.templates.questionTemplate;var d=g(e);f.find(".modal-container").empty().append(d);f.modal("show")},getItem:function(g){function e(h){return h.RoomInverntoryItemID===g||h.ItemID===g||$.trim((h.Name||"").toLowerCase())===$.trim((g||"").toLowerCase())}var f=_.find(b.inventoryItems,e);var d=_.find(b.customItems,e);return f||d},init:function(h){b.editable=window.EDITABLE;window.onbeforeunload=function(){if(b.hasChanged||$.ajaxq.isRunning()){return"There are changes pending, are you sure you'd like to leave this page?"}};Utility.initBase(b);b.rooms=_.chain(h).pluck("rooms").flatten().map(function(j){return new Room(j)}).sortBy(function(j){if(j.IsUnassigned){return -1}return j.Sort}).value();var i=b.getUnassignedRoom();_.each(b.rooms,function(j){j.retemplate()});if(b.rooms.length>0){b.selectRoom(i.RoomID)}b.elements.roomMenu.on("click",".room-selector",function(){var j=$(this).data("roomid");b.selectRoom(j)});if(!b.editable){return}c.init(function(j){b.customItems.push(j);b.elements.addItem.text(j.Name);b.elements.itemQuantity.focus()});$("#allToStorage").click(function(){var j=b.currentRoom;_.each(b.rooms,function(k){_.each(k.Items,function(l){k.setItemCount(l.Item,l.Count,l.Count,l.AdditionalInfo)})});b.selectRoom(j.RoomID)});$("#allFromStorage").click(function(){var j=b.currentRoom;_.each(b.rooms,function(k){_.each(k.Items,function(l){k.setItemCount(l.Item,l.Count,0,l.AdditionalInfo)})});b.selectRoom(j.RoomID)});b.elements.roomMenu.on("click",".room-selector .icon-edit",function(){var m=$(this).closest(".room-selector").data("roomid");var l=b.getRoom(m);var j=b.dialogs.roomModal;var n=j.find("[name=roomType]");var o=j.find("[name=roomTypeCustom]").val(l.Type);j.find("[name=roomDescription]").val(l.Description);j.find("[name=roomid]").val(l.RoomID);n.find("option").removeAttr("selected");var k=n.find("option").filter(function(){return $(this).html()===l.Type});if(k.length>0){k.prop("selected",true);o.hide()}else{n.find("option").filter(function(){return $(this).val()==="Other"}).prop("selected",true);o.show()}j.modal("show");return false});var e=_.map(b.inventoryItems,function(j){return{value:j.Name,alts:_.flatten([[(j.KeyCode||"").toString()],j.Aliases])}});b.elements.roomTypeCustom.hide();b.elements.addItem.blur(function(){var k=this;var j=false;b.options=[];$(window).bind("blur.crappy-workaround",function(){j=true});setTimeout(function(){$(window).unbind("blur.crappy-workaround");if(j){return}var m=$(k);var l=b.getItem(m.val());var n=$.trim(m.val());if(!n){return}if(_.isUndefined(l)){c.show();c.dialogs.addCustom.find("[name=name]").val(m.val())}if(l.AdditionalQuestions.length>0&&(b.selectedroominventoryitemid==null||!b.selectedroominventoryitemid)){b.showModal(l)}},10)});b.dialogs.additionalQuestions.bind("keypress",function(j){if(j.keyCode===Keys.ENTER||j.keyCode===Keys.NUMPAD_ENTER){$("#add-item-with-questions").click()}});$("#add-item-with-questions").click(function(){var k=$("#inventory-item-question .modal-container");var n=[];k.find(":input[name]").each(function(){var q=$(this);var r=q.attr("name");if(q.attr("type")==="checkbox"&&q.is(":checked")){n.push({QuestionID:r,OptionID:null,DisplayName:q.data("displayname")})}else{if(q.is("select")){var t=q.val();var s=q.find("option[value="+t+"]");n.push({QuestionID:r,OptionID:t,DisplayName:s.data("displayname")})}}});b.options=n;var m=k.find("[name=itemid]").val();var l=b.getItem(m);var j=Math.max(b.currentRoom.getQuantity(l,n),1);var o=b.getFormRoom();var p=o.getStorage(l);o.setItemCount(l,j,p,n);b.selectItem(m,o);$(".modal.in").modal("hide");b.elements.itemQuantity.focus().select();return false});b.elements.addItem.autocomplete({lookup:e,partialMatch:true,selectFirst:true,maxSuggestions:10,orderBy:SearchFunctions.itemAutocompleteSort,onSelect:function(k,j){b.selectItem(b.elements.addItem.val(),b.getFormRoom());if(j.keyCode===Keys.TAB){j.preventDefault()}return false}});Quotes.bindSave(function(o,l,k){if(b.hasChanged&&!$.ajaxq.isRunning()){var m=Quotes.quoteid;var n=JSON.stringify(b.rooms);$("#inventory-loading").show();var j=$.postq("quotes",b.urls.saveInventory,{quoteid:m,rooms:n},function(p){Quotes.updateQuicklook();_.each(p,function(t,q){var r=b.getRoom(q);var s=$("[data-roomid="+q+"]").attr("data-roomid",t);s.find("[name=roomid]").val(t);s.find(".remove").show();if(r){r.RoomID=t}})});j.always(function(){$("#inventory-loading").hide()});b.setChanged(false);j.success(o);j.error(l);j.always(k)}});function f(){b.elements.addItemForm[0].reset();$("#add-item-roomid").val("");b.elements.cancel.hide();b.elements.submit.text("Add Item")}b.elements.cancel.click(function(){f();b.selectedroominventoryitemid=null;b.options=[];return false});b.elements.itemQuantity.click(function(){$(this).select()});b.elements.itemStorage.click(function(){$(this).select()});b.elements.addItemForm.submit(function(){var n=b.elements.addItem.val();var k=b.getItem(n)||b.currentRoom.getItem(n);var j=parseInt(b.elements.itemQuantity.val(),10)||0;var m=Math.min(parseInt(b.elements.itemStorage.val(),10)||0,j);if(!k){return false}var l=b.getFormRoom();l.setItemCount(k,j,m,b.options,b.selectedroominventoryitemid);this.reset();b.selectedroominventoryitemid=null;b.options=[];$("#add-item").focus();f();return false});b.elements.roomType.change(function(){var j=($(this).val()==="Other");b.elements.roomTypeCustom.toggle(j);b.elements.roomTypeCustom.toggleAttr("required",j)});b.elements.roomBody.on("click",".item[data-itemid]",function(){if(b.editable){var j=$(this).data("itemid");var m=$(this).data("roominverntoryitemid");var l=$(this).closest("div[data-roomid]").attr("data-roomid");var k=b.getRoom(l);b.selectedroominventoryitemid=m;b.selectItem(j,k,m)}});b.elements.roomBody.on("click",".remove-item",function(){var k=$(this).closest("[data-itemid]").data("itemid");var m=$(this).closest("div[data-roomid]").attr("data-roomid");var n=$(this).data("roominverntoryitemid");var l=b.getRoom(m);var j=b.getItem(k);l.setItemCount(j,0,0,null,n);f();return false});b.elements.roomMenu.on("click","span.remove",function(){var l=$(this).closest("[data-roomid]").attr("data-roomid");var k=b.getRoom(l);var j="Are you sure you want to remove the room: "+k.Type;if(k.Description){j+=", "+k.Description}if(!window.confirm(j)){return false}var m=b.getUnassignedRoom();_.each(k.Items,function(n){k.moveItem(m,n.Item,n.RoomInverntoryItemID)});if(b.currentRoom.RoomID===k.RoomID){b.selectRoom(m.RoomID)}b.removeRoom(k.RoomID);m.retemplate();return false});b.elements.addRoomButton.click(function(){b.dialogs.roomModal.modal("show")});b.elements.addRoom.on("keyup","select",function(j){if(j.keyCode===Keys.ENTER||j.keyCode===Keys.NUMPAD_ENTER){$(this).closest("form").find("[type=submit]").click()}});b.dialogs.roomModal.bind("hide",function(){b.elements.addRoom[0].reset();b.elements.addRoom.find("[name=roomid]").val("");b.elements.addRoom.find("[name=roomTypeCustom]").hide()});b.dialogs.roomModal.bind("shown",function(){$(this).find("[name=roomType]").focus()});var d=function(){var j={quoteid:Quotes.quoteid,time:new Date(),inventory:JSON.stringify(b.rooms.map(function(k){return k.miniItemList()}))};StateManager.store("quote-inventory",j,15)};var g=function(k){var j=JSON.parse(k);_.each(j,function(l){var m=b.getRoom(l.RoomID);if(m){m.deleteItems();m.retemplate()}});_.each(j,function(m){var n=b.getRoom(m.RoomID);var l=m.Items;if(!n){n=new Room(m);n.RoomID=Utility.randomid();n.Items.empty();b.rooms.push(n)}_.each(l,function(o){n.setItemCount(b.getItem(o.Item.ItemID),o.Count,o.StorageCount,o.AdditionalInfo)});n.retemplate();b.hasChanged=true});b.dialogs.history.modal("hide")};$("#inventory-history").on("click","[type=submit]",function(){var j=$(".history-container").find("input:checked").val();g(j)});$("#removeAll").click(function(){if(confirm("Are you sure you want to delete ALL items?")){Utility.showOverlay();_.each(b.rooms,function(j){b.rooms.empty()});b.hasChanged=true;setInterval(function(){if(!$.ajaxq.isRunning()){window.location.reload()}},1000)}});$("#undoRepo").click(function(){var m=StateManager.getAll("quote-inventory");m=_(m).filter(function(o){return o.quoteid===Quotes.quoteid}).map(function(o){var p=o;o.inventory=JSON.parse(o.inventory);o.time=new Date(o.time);o.getItemCount=function(){return _.sum(o.inventory.map(function(q){return _.sum(q.Items,function(r){return r.Count})}))};return o});var l=b.dialogs.history.modal("show");var j=$("#history-template").html();var n=_.template(j);var k=m.map(function(o){return n(o)});l.find(".history-container").empty().append(k)});b.elements.addRoom.add(b.elements.addItemForm).submit(function(){d()});b.elements.addRoom.submit(function(){var j=$(this);var k=j.serializeObject();if(k.roomType==="Other"){k.roomType=b.elements.roomTypeCustom.val()}if(!k.roomType){return false}var m=$.trim(j.find("[name=roomid]").val());var l;if(m){l=b.getRoom(m)}else{l=new Room();l.Sort=Math.max(_.chain(b.rooms).pluck("Sort").filter(function(n){return n!==9999}).max().value(),0)+1;b.rooms.push(l)}l.Type=k.roomType;l.Description=k.roomDescription;l.StopName=j.find("[name=roomStop] option[value='"+k.roomStop+"']").text();l.StopID=k.roomStop;l.retemplate();b.selectRoom(l.RoomID);b.setChanged(true);j[0].reset();b.dialogs.roomModal.modal("hide");b.elements.roomTypeCustom.hide().removeAttr("required");return false})}};a.Inventory=b})(window);/*
    pricing.js
*/
(function(a){a.Pricing={templates:{},type:"Binding",dialogs:{changePricing:"#change-pricing-modal"},init:function(){Utility.initBase(a.Pricing);Pricing.couponApplied=PRICING_VARS.DISCOUNTCOUPONUSED;Pricing.couponCode=PRICING_VARS.DISCOUNTCOUPONCODE;$("#discountCouponVoucher").val(Pricing.couponCode);if(Pricing.couponApplied){$("#discountCouponVoucher").prop("readonly",true)}$("#change-pricing").click(function(){Pricing.dialogs.changePricing.modal("show");return false});Pricing.type=PRICING_VARS.TYPE;var e=PRICING_VARS.ESTIMATED_SOURCE_TIME;var f=PRICING_VARS.ESTIMATED_TRAVEL_TIME;var b=(Pricing.type==="Hourly")?1:0;$("#price-tabs").tabs({activate:function(g,i){var h=i.newPanel.find("input,select").first();h.show().focus();if(h.is(".ui-disable-stupid")){h.hide()}if(i.newPanel.is("#price-guaranteed")){Pricing.type="Binding"}else{if(i.newPanel.is("#price-hourly")){Pricing.type="Hourly"}}Pricing.applyAdjustment();Pricing.calculateHourly();Pricing.calculateTotalCost()},active:b});if(e>SERVER.MAX_HOURLY_SOURCE_TIME||f>SERVER.MAX_HOURLY_TRAVEL_TIME){$("#price-tabs").tabs("option","disabled",[1])}$("#adjustment").bind("blur",function(){$.post("/Quote/DiscountPriority",{id:$("#lookupID").text(),discountType:"percent",percent:$("#adjustment").val()},null,"json");Pricing.applyPercentageAdjustment();$("#valuationTypeGuaran").focus()});$("[name=valuationTypeGuaranteed]").change(function(){Pricing.applyAdjustment()});$("[name=valuationTypeHourly]").change(function(){Pricing.calculateHourly()});$("#adjustment-amount").bind("blur",function(){$.post("/Quote/DiscountPriority",{id:$("#lookupID").text(),discountType:"value",percent:""},function(g){},"json");Pricing.applyAdjustment();$("#valuationTypeGuaran").focus()});$("#Trucks").change(function(){var i=$(this).val();var h=$("#CrewSize").val();$("#CrewSize").empty().append(_.map(Pricing.getValidCrewSizes(i),function(j){return"<option value='"+j+"'>"+j+"</option>"}));if(h){$("#CrewSize").val(h)}if(!$("#CrewSize").val()){var g=$("#CrewSize option:first").val();$("#CrewSize").val(g)}});$("#Trucks-Hourly").change(function(){var h=$(this).val();var g=$("#CrewSize-Hourly").val();$("#CrewSize-Hourly").empty().append(_.map(Pricing.getValidCrewSizes(h),function(j){return"<option value='"+j+"'>"+j+"</option>"}));$("#CrewSize-Hourly").val(g)});$("#Trucks-Hourly").change();$("#Trucks,#CrewSize,#Hours,#additionalDestination").change(function(){Pricing.fillValuation(Pricing.calculateHourly)});$("#btn-next,#btn-back").click(function(){var g=$(this).attr("href");Pricing.save(function(){window.location=g});return false});$(".pricing-miscellanous").click(function(){$("#miscellaneous-pricing").show();$(this).hide();return false});$("#edit-storage-button").click(function(){$("#edit-storage").toggle()});$("[name=packingMaterials],[name=temporaryStorage],[name=replacementValuationsGuaranteed],[name=replacementValuationsHourly]").change(function(){Pricing.calculateTotalCost()});Pricing.fillValuation(function(){Pricing.calculateHourly();Pricing.applyAdjustment();Pricing.calculateTotalCost()});$("#Trucks").change();var d=SERVER.baseUrl+"Quote/Schedule/"+Quotes.lookup;var c=function(){Utility.showOverlay();Pricing.save(function(){window.location=d});return false};$("#miscellaneous-pricing-form").submit(c);$(".quote-save-button").click(c);$("#discountCouponVoucher").bind("blur",function(){Pricing.validateCoupon()})},showValidCoupon:function(){$("#discountCouponVoucherOk").show();$("#discountCouponValidMessage").show()},showInValidCoupon:function(){$("#discountCouponVoucherInvalid").show();$("#discountCouponInValidMessage").show()},showCouponAlreadyApplied:function(){$("#discountCouponAlreadyAppliedMessage").show()},hideAllCouponValidation:function(){$("#discountCouponVoucherOk").hide();$("#discountCouponVoucherInvalid").hide();$("#discountCouponValidMessage").hide();$("#discountCouponInValidMessage").hide();$("#discountCouponAlreadyAppliedMessage").hide()},applyDiscountCoupon:function(c){if(c){if(c.valueType==1){var d=parseFloat($("#adjustment").val());d=Math.abs(d);d=d+parseFloat(c.value);$("#adjustment").val(d*-1);Pricing.discountCoupon=c;Pricing.applyPercentageAdjustment()}else{if(c.valueType==2){var b=parseFloat($("#adjustment-amount").val());b=Math.abs(b);b=b+parseFloat(c.value);$("#adjustment-amount").val(b*-1);Pricing.discountCoupon=c;Pricing.applyAdjustment()}}Pricing.couponApplied=true;Pricing.couponCode=$("#discountCouponVoucher").val()}},removeDiscountCoupon:function(){var c=Pricing.discountCoupon;if(c){if(c.valueType==1){var d=parseFloat($("#adjustment").val());d=Math.abs(d);d=d-parseFloat(c.value);$("#adjustment").val(d*-1);Pricing.discountCoupon=c;Pricing.applyPercentageAdjustment()}else{if(c.valueType==2){var b=parseFloat($("#adjustment-amount").val());b=Math.abs(b);b=b-parseFloat(c.value);$("#adjustment-amount").val(b*-1);Pricing.discountCoupon=c;Pricing.applyAdjustment()}}Pricing.couponApplied=false;Pricing.couponCode=null}},validateCoupon:function(){var b=$("#discountCouponVoucher").val();if(!b||b==""){Pricing.hideAllCouponValidation();Pricing.removeDiscountCoupon();return}if(Pricing.couponApplied){Pricing.showCouponAlreadyApplied();$("#discountCouponVoucher").val(Pricing.couponCode);return}$.ajax({url:"/Quote/ValidateCoupon",type:"GET",dataType:"json",data:{code:b},cache:false,success:function(c,e,d){Pricing.hideAllCouponValidation();if(c&&c.isValid==true){Pricing.showValidCoupon();Pricing.applyDiscountCoupon(c)}else{if(c.isValid==false){Pricing.showInValidCoupon()}else{Pricing.showInValidCoupon()}}},error:function(d,e,c){}})},calculateAdjustment:function(c,b){return Math.floor((c*(b/100))*100)/100},getValidCrewSizes:function(d){var c=d*2;var b=d*3;return Utility.range(c,b,1)},calculateTotalCost:function(){var b=(Pricing.type==="Hourly")?Utility.parseCurrency($("#hourly-total").text()):Utility.parseCurrency($("#total").text());var c=parseFloat($("[name=packingMaterials]").val())||0;var d=this.calculateStorageCost();var e=b+c+d;$("#total-move-price").text(Utility.formatCurrency(e))},calculateStorageCost:function(){var d=$("#temporary-storage");var c=$("#monthly-storage");var b=0;if(d.length>0){b+=Utility.parseCurrency($.trim(d.text()))}if(c.length>0){b+=Utility.parseCurrency($.trim(c.text()))}return b},fillValuation:function(b){var e=PRICING_VARS.QUOTEID;var f=parseInt($("#Trucks").val(),10)||0;var d=parseInt($("#CrewSize").val(),10)||0;var c=parseInt($("#Hours").val(),10)||0;$.ajax({url:"/Quote/GetHourlyValuations",type:"GET",dataType:"html",data:{quoteid:e,numTrucks:f,crewSize:d,estimateTime:c},cache:false,success:function(g){$("#replacementValuationsHourly").html(g);b()}})},calculateHourly:function(){if(Pricing.type==="Hourly"){var i=PRICING_VARS.PERSON_PRICE_MULTIPLIER;var k=PRICING_VARS.TRUCK_PRICE_MULTIPLIER;var j=PRICING_VARS.PERSON_DESTINATION_MULTIPLIER;var l=PRICING_VARS.TRUCK_DESTINATION_MULTIPLIER;var d=PRICING_VARS.CURRENT_HOUR;var m=parseInt($("#Trucks").val(),10)||0;var g=parseInt($("#CrewSize").val(),10)||0;var e=parseInt($("#Hours").val(),10)||0;var h=(i*g)+(k*m);var f=(j*g)+(m*l)+h;var b=Utility.parseCurrency($("#additionalDestination").val());if(b){f+=b}var n=parseFloat($("[name=valuationTypeHourly] :selected").data("cost"));var c=((e-1)*h)+f+n;$("#estimated-hourly-price").text(Utility.formatCurrency(c));$("#hourly-total").text(Utility.formatCurrency(c));$("#first-hour").text(Utility.formatCurrency(f));$("#first-hour-lineprice").text(Utility.formatCurrency(f)+" first hour");$("#extra-hours").text(Utility.formatCurrency(h));$("#hourly-lineprice").text(Utility.formatCurrency(h)+" /hour");$("#hourly-pricing-summary").show();$("#guaranteed-pricing-summary").hide()}},applyPercentageAdjustment:function(){var c=$("#adjustment");var d=$("#adjustment-amount");var e=parseFloat($("#base-price").text().replace(/[^-\d.]/g,""));var f=Utility.roundTo(parseFloat(c.val().replace(/[^-\d.]/g,"")),2);var b=Pricing.calculateAdjustment(e,f);$.post("/Quote/GetDiscountPriority",{id:$("#lookupID").text()},function(g){if(g=="0"){}else{if(g=="1"){$.post("/Quote/DiscountPercentage",{id:$("#lookupID").text()},function(h){f=Utility.roundTo(parseFloat(h.replace(/[^-\d.]/g,"")),2);b=Pricing.calculateAdjustment(e,f)},"json")}}},"json");c.val(f);d.val(b);Pricing.applyAdjustment()},applyAdjustment:function(){if(Pricing.type==="Binding"){var c=$("#adjustment-amount");var b=Utility.roundTo(parseFloat(c.val()),2);var e=parseFloat($("#base-price").text().replace(/[^\d.]/g,""));var d=Utility.roundTo((b/e)*100,2);var g=parseFloat($("[name=valuationTypeGuaranteed] :selected").data("cost"));var f=false;$.post("/Quote/GetDiscountPriority",{id:$("#lookupID").text()},function(h){if(h=="0"){e=g+e;f=true;if(e===0){b=0;$("#adjustment-amount").removeClass("error")}else{if(d>SERVER.MAX_PRICE_DISCOUNT||d<-SERVER.MAX_PRICE_DISCOUNT||isNaN(d)||isNaN(b)){$("#adjustment-amount").addClass("error");b=0}else{$("#adjustment-amount").removeClass("error")}}$("#adjustment-amount").val(b);$("#adjustment").val(d);$("#total").text(Utility.formatCurrency(Utility.roundTo(e+b,2)));$("#hourly-pricing-summary").hide();$("#guaranteed-pricing-summary").show();Pricing.calculateTotalCost()}else{if(h=="1"){f=true;$.post("/Quote/DiscountPercentage",{id:$("#lookupID").text()},function(i){d=Utility.roundTo(parseFloat(i),2);b=Pricing.calculateAdjustment(e,d);e=g+e;if(e===0){b=0;$("#adjustment-amount").removeClass("error")}else{if(d>SERVER.MAX_PRICE_DISCOUNT||d<-SERVER.MAX_PRICE_DISCOUNT||isNaN(d)||isNaN(b)){$("#adjustment-amount").addClass("error");b=0}else{$("#adjustment-amount").removeClass("error")}}$("#adjustment-amount").val(b);$("#adjustment").val(d);$("#total").text(Utility.formatCurrency(Utility.roundTo(e+b,2)));$("#hourly-pricing-summary").hide();$("#guaranteed-pricing-summary").show();Pricing.calculateTotalCost()},"json")}}},"json");if(!f){e=g+e;f=true;if(e===0){b=0;$("#adjustment-amount").removeClass("error")}else{if(d>SERVER.MAX_PRICE_DISCOUNT||d<-SERVER.MAX_PRICE_DISCOUNT||isNaN(d)||isNaN(b)){$("#adjustment-amount").addClass("error");b=0}else{$("#adjustment-amount").removeClass("error")}}$("#adjustment-amount").val(b);$("#adjustment").val(d);$("#total").text(Utility.formatCurrency(Utility.roundTo(e+b,2)));$("#hourly-pricing-summary").hide();$("#guaranteed-pricing-summary").show();Pricing.calculateTotalCost()}}},save:function(f){f=f||$.noop;var c=$("#adjustment-amount");var b=(c.val()!=="")?parseFloat(c.val()):0;var g={packingMaterials:$("[name=packingMaterials]").val(),temporaryStorage:$("[name=temporaryStorage]").val(),forcedStorage:$("[name=force-storage-cost]").val()};var l=$("#guaranteed-loader,#hourly-loader").show();if(Pricing.type==="Binding"){var m=parseInt($("#Trucks-Hourly").val(),10);var h=parseInt($("#CrewSize-Hourly").val(),10);var d={quoteid:Quotes.quoteid,adjustment:b,trucks:m,crewsize:h,valuationType:$("[name=valuationTypeGuaranteed]").val(),discountCouponCode:Pricing.couponCode};var e=$.post(SERVER.baseUrl+"Quote/SaveGuaranteed",$.extend(g,d));e.success(function(){f()});e.always(function(){l.hide()})}else{if(Pricing.type==="Hourly"){var k=parseFloat($("#base-price").text().replace(/[^\d.]/g,""));var i={quoteid:Quotes.quoteid,numTrucks:$("#Trucks").val(),crewSize:$("#CrewSize").val(),estimateTime:$("#Hours").val(),additionalDestination:$("#additionalDestination").val(),hourlyPrice:k,valuationType:$("[name=valuationTypeHourly]").val()};var j=$.post(SERVER.baseUrl+"Quote/SaveHourly",$.extend(g,i));j.success(function(){f()});j.always(function(){l.hide();Utility.hideOverlay()})}}}}})(window);/*
    quote-overview.js
*/
window.QuoteOverview={init:function(){PaymentModal.init($("#add-payment-modal"));$("#add-payment").click(function(){PaymentModal.show();return false})}};/*
  payment.js
*/
window.Payment={init:function(){$("#add-card").click(function(){$("#add-card-form").slideToggle();return false})}};window.PaymentModal={modal:[],show:function(){PaymentModal.modal.modal("show")},init:function(c){var e=c.modal({show:false,keyboard:false});PaymentModal.modal=e;e.on("show",function(){e.find(".page1").show();e.find(".page2").hide();e.find(".new-card-form").hide()});e.on("change","input[name=method]",function(){var f=$(this).val();e.find(".new-card-form").toggle(f==="[-NEW CARD-]");$(this).closest("table").find(".sibling-box input").hide();$(this).closest("tr").find("td.sibling-box").find("input").show()});function d(f){e.find(".errors").show().empty().append("<li>"+f+"</li>")}e.find("form").on("submit",function(){var i=$(this);var h=i.serialize();var k=i.attr("action");var f=$.post(k,h);var j=i.find(".ajax-loader").show();var g=i.find("button").attr("disabled","disabled");f.success(function(m){if(m.Errors&&m.Errors.length>0){d(m.Errors[0].ErrorMessage)}else{var l=m;if(l&&l.toLowerCase()==="success"){Utility.showOverlay();window.location.reload()}else{e.find(".page1").hide();e.find(".page2").show();e.find(".confirmation-code").text(l)}}});f.error(function(l){d(l)});f.always(function(){j.hide();g.removeAttr("disabled")});return false});e.find(".reload-button").click(function(){Utility.showOverlay();window.location.reload()});var a=e.find("[name=cardnumber]");var b=e.find("[name=cvv2]");e.find("[name=provider]").on("change",function(){var g="9999-999999-99999";var i="9999-9999-9999-9999";var h="999";var f="9999";if($(this).val()==="Amex"){a.unmask().mask(g);b.unmask().mask(f)}else{a.unmask().mask(i);b.unmask().mask(h)}})}};/*
  post.js
*/
(function(a){a.PostingTemplates={templates:{posting:"#posting-template",vehicle_rel:"#vehicle-rel-template",employee_rel:{element:"#employee-rel-template",options:{variable:"rel"}},moving_service_rel:"#moving-service-template",posting_service:"#posting-service-template"},opts:{getPost:function(){},onSubmit:function(){},onTemplate:function(){}},onTemplate:function(d){var b=d.find("[name=add-employee]");b.autocomplete({lookup:_.map(Repository.employees,function(e){return{value:e.getDisplayValue(),alts:[e.Lookup,e.NameFirst,e.NameLast]}}),partialMatch:true,selectFirst:true,maxSuggestions:10,orderBy:SearchFunctions.employeeAutocompleteSort,onSelect:function(){$(this).removeClass("error");b.autocomplete("hide");d.find(".add-employee-post").click();d.find("[name=add-employee]").focus();return false}});var c=d.find("[name=add-vehicle]");c.autocomplete({lookup:_.map(Repository.vehicles,function(e){return{value:e.getDisplayValue(),alts:[e.Lookup,e.Name]}}),partialMatch:true,selectFirst:true,onSelect:function(){c.autocomplete("hide");d.find(".add-vehicle-post").click();d.find("[name=add-vehicle]").focus();return false},maxSuggestions:10,orderBy:SearchFunctions.vehicleAutocompleteSort});b.add(c).bind("keydown",function(f){if(f.keyCode===Keys.ENTER){$(this).addClass("error");$(this).select();return false}});if($.isFunction(PostingTemplates.opts.onTemplate)){PostingTemplates.opts.onTemplate(d)}},load:function(b,c){Utility.initBase(PostingTemplates);PostingTemplates.opts=$.extend({},PostingTemplates.opts,c);function d(){if(!$.ajaxq.isRunning()){var e=_(PostingTemplates.opts.getPost()).filter(function(f){return f.hasChanged});_.each(e,function(f){f.sync()})}setTimeout(function(){d()},250)}d();b.on("blur","input[type=number]",function(){var e=parseFloat($(this).val());if(e){$(this).val(Utility.formatCurrency(e,"",""))}});b.on("click",".icon-remove",function(){var f=$(this);var g=PostingTemplates.opts.getPost()[0];g.hasChanged=true;if(f.is(".employee")){var e=f.closest("tr").data("employeeid");g.removeEmployee(Repository.getEmployee(e),false);g.retemplate()}else{if(f.is(".vehicle")){var h=f.closest("tr").data("vehicleid");g.removeVehicle(Repository.getVehicle(h),false);g.retemplate()}}return false});b.on("click",".sibling-show-employees",function(){var e=$(this).find(".icon-double-angle-down,.icon-double-angle-up");var f=e.data("postingid");e.toggleClass("icon-double-angle-up icon-double-angle-down");e.closest("table").find("tr").each(function(){var g=$(this);if(g.data("postingid")===f){g.toggleClass("hide")}})});b.on("blur","input[name=Commission_Percent]",function(){var h=$(this).closest("tr");var f=PostingTemplates.opts.getPost($(this).closest(".posting-container").data("postingid"));var i=parseFloat($(this).val());var g=f.calculateMovingCost();var e=Utility.roundCurrency(Utility.roundTo(i/100,4)*g);h.find("[name=Commission]").val(e).trigger("change")});b.on("blur","input[name=Commission]",function(){var h=$(this).closest("tr");var f=PostingTemplates.opts.getPost($(this).closest(".posting-container").data("postingid"));var i=parseFloat($(this).val());var g=f.calculateTotalCost();var e=Utility.roundCurrency((i/g)*100);h.find("[name=Commission_Percent]").val(e)});b.on("blur","input[name=duration],input[name=driveHours]",function(){var e=$(this).closest(".posting-container");var i=PostingTemplates.opts.getPost(e.data("postingid"));var j=$(this).closest("tr");var h=parseFloat(j.find("input[name=duration]").val());var f=parseFloat(j.find("input[name=driveHours]").val());var g=_.pluck(i.Employee_Rels,"EmployeeID");_.each(g,function(k){i.setEmployeeField(k,"Hours",(h+f))});i.retemplateEmployees()});b.on("blur change","input",function(){var f=$(this).data("field");var i=PostingTemplates.opts.getPost($(this).closest(".posting-container").data("postingid"));var g=Utility.parseBool($(this).data("iscustom"))===true;var h=!!$(this).data("employeeid");if(f&&i){var j=$(this).val();j=!isNaN(Number(j))?Number(j):j;if($(this).is(":checkbox")){j=$(this).is(":checked")}if(g){i.setCustomField(f,j)}else{if(h){var e=$(this).data("employeeid");i.setEmployeeField(e,f,j)}else{i.setField(f,j)}}}return true});b.on("click",".custom-service .icon-remove",function(){var g=$(this).closest(".custom-service").find("input[name=serviceid]").val();var f=$(this).closest(".posting-container").data("postingid");var e=PostingTemplates.opts.getPost(f);e.removeService(g);return false});b.on("click","input",function(){$(this).select();$(this).focus()});b.on("click","button.add-custom-service",function(){var e=PostingTemplates.opts.getPost($(this).closest(".posting-container").data("postingid"));var f=$(this).closest("tr").find("input.custom-description").val();e.addCustomService(f)});b.on("click",".add-employee-post",function(){var f=PostingTemplates.opts.getPost($(this).closest(".posting-container").data("postingid"));var e=Repository.getEmployee(b.find("[name=add-employee]").val());f.addEmployee(e);f.retemplate()});b.on("click",".add-vehicle-post",function(){var e=PostingTemplates.opts.getPost($(this).closest(".posting-container").data("postingid"));var f=Repository.getVehicle(b.find("[name=add-vehicle]").val());e.addVehicle(f);e.retemplate()});b.on("click","button.btn-post",function(){var g=$(this).closest(".posting-container").data("postingid");var f=PostingTemplates.opts.getPost(g);if(window.confirm("Are you sure you'd like to post this job?")){var e=f.container.find(".ajax-loader").show();f.sync(function(){var j=SERVER.baseUrl+"PostingPage/CompletePost/";var h={id:f.PostingID};var i=$.postq("posting",j,h,function(){window.location=SERVER.baseUrl+"Posting"});i.fail(function(){e.hide()})})}return false})}};a.PostingPage={curPost:[],getPosting:function(b){if(!b){return[PostingPage.curPost]}return PostingPage.curPost},init:function(b){PaymentModal.init($("#add-payment-modal"));$("#container").on("click","#add-payment",function(){PaymentModal.show();return false});PostingTemplates.load($("#container"),{getPost:PostingPage.getPosting});Repository.init(window.EMPLOYEES,window.VEHICLES);PostingPage.changePost(b)},changePost:function(d){var b=$("#post-selector-loader").show();var e=SERVER.baseUrl+"PostingPage/GetPostingJson/";var c=$.postq("postingtemplates",e+d,function(h){var f=h;var g=window.asdf=PostingPage.curPost=new Posting(f,$("#container"));$("#container").data("postingid",g.PostingID);g.retemplate()});c.always(function(){b.hide()})}}})(window);/*
    schedule.js
*/
(function(b){var a;function c(d){var e=d.getDate();var f=d.getMonth();var h=d.getFullYear();var g=a+"?day="+e+"&month="+(f+1)+"&year="+h;window.location=g}b.Schedule={init:function(g,e,f,d){a=g;e=e||700;f=f||[];$("#schedule").fullCalendar({dayClick:function(h){c(h);return false},eventClick:function(h){c(h.start);return false},highlightDays:f,height:e,events:{url:SERVER.baseUrl+"Quote/GetSchedule?franchiseid="+d,cache:true},buttonClick:function(){var h=$("#schedule").fullCalendar("getDate");var i=new Date(h.setMonth(h.getMonth()+1));$("#schedule2").fullCalendar("gotoDate",i)}});$("#schedule2").fullCalendar({dayClick:function(h){c(h);return false},highlightDays:f,eventClick:function(h){c(h.start);return false},height:e,events:{url:SERVER.baseUrl+"Quote/GetSchedule"+(d?"?franchiseid="+d:""),cache:true}}).fullCalendar("next")}};b.QuoteScheduleDay={urls:{saveNote:SERVER.baseUrl+"Quote/AddNote"},init:function(m,h){a=m;Assignment.init();var k=$("#schedule-modal").modal({show:false});$(".schedule-table").on("click",".schedule-job",function(){if($(this).is("[data-addTruck]")){var u=$(this).data("quoteid");var p=$(this).data("crew");var r=$(this).data("day");var v=SERVER.baseUrl+"Quote/ScheduleJobNoPayment";Utility.showOverlay();var n=$.post(v,{quoteid:u,crew:p,day:r});n.always(function(){window.location.reload()});return}var o=$(this).data("minutes");var s=Math.floor(o/60);var t=Math.ceil(o%60);var q={hours:s,minutes:t,crew:$(this).data("crew")};Utility.objectToForm(q,k);k.modal("show");k.find("input:visible,select,textarea").first().focus()});$("#new-card").hide();$("input[name=paymentType]").change(function(){var n=$(this).val()==="NEW_CARD";$("#new-card").toggle(n);$("#new-card").find("[name=name]").toggleAttr("required",n);$("#new-card").find("[name=cardnumber]").toggleAttr("required",n)});k.find("form").submit(function(){function q(t){k.find(".errors").empty().show().append(t)}var r=$(this).find("[type=submit]").attr("disabled","disabled");var p=$(this).find("#cc-submit-loader").show();var s=$(this).attr("action");var o=$(this).serialize();var n=$.post(s,o);n.error(function(){q("Error processing request")});n.success(function(t){if(t.Errors){q(t.Errors[0].ErrorMessage);return}window.location.reload()});n.always(function(){p.hide();r.removeAttr("disabled")});return false});var f=$("#edit-schedule").modal({show:false});$(".icon-edit.edit-schedule").click(function(){var q=$(this).data("minutes");var o=Math.floor(q/60);var p=q%60;var n={scheduleid:$(this).data("scheduleid"),minutes:p,hours:o,rangestart:$(this).data("start"),rangeend:$(this).data("end"),movers:$(this).data("movers"),crew:$(this).data("crew")};Utility.objectToForm(n,f);f.modal("show")});var i=$("#change-card-on-file-modal").modal({show:false});i.find("form").on("submit",function(o){var n=$(this).serialize();var q=$(this).attr("action");Utility.showOverlay();var p=function(r){$("#error-change-card").text(r.ErrorMessage).show()};$.post(q,n,function(r){if(r.Errors&&r.Errors.length>0){p(r.Errors[0]);Utility.hideOverlay()}else{window.location.reload()}});o.preventDefault()});$("#change-card-on-file").click(function(){i.modal("show")});$("#print-form").submit(function(){$(".modal.in").modal("hide")});var g=function(){var n=Kalendae.moment($(this).val()).toDate();c(n)};$("#schedule-day-picker").bind("change select",g);var j=$(".add-payment-modal").map(function(){var n=$(this);PaymentModal.init(n);return{id:n.data("scheduleid"),modal:n}}).get();$(".schedule-table").on("click",".icon-money",function(){var n=$(this).data("scheduleid");_.find(j,function(o){return o.id===n}).modal.modal("show")});if(h){return}(function(){var n=false;var o=$(".schedule-table-container").sortable({connectWith:".schedule-table-container",handle:".reorder span",items:"tbody > .quote",axis:"y",start:function(){$(".schedule-table tbody").addClass("drop")},stop:function(){if(!n){$(".schedule-table-container").sortable("cancel")}n=false;$(".schedule-table-container tbody").removeClass("drop")},helper:function(q,s){var p=$(s.clone());p.children("td").css("display","table-cell");var r=0;s.children().each(function(){var t=$(this);$(p.children().index(r)).width(t.width());r++});return p},receive:function(q,r){n=true;$("#save-day").slideDown();$(".schedule-job").hide();$(r.item).appendTo($(q.target).find("tbody"));var p=$(r.item).closest("table").data("crewid");$(r.item).find("input[name=crewid]").val(p)}});if(!$.browser.mozilla){o.disableSelection()}})();var l=$("[name=crewstatus]:first option").map(function(){return $(this).val().toLowerCase()});$("[name=crewstatus]").change(function(){var o=$(this);var n=o.closest(".schedule-table-container");var p=o.val().toLowerCase();_.each(l,function(q){n.removeClass(q)});n.addClass(p);$("#save-day").slideDown()});$("#save-day").click(function(){$("#save-order-submit").click()});var e="Add Note";var d="initial-text";$(".note").on("click","a.add-note",function(){var n=$(this);if(n.length>0){var p=n.parent();var o=p.find("input.note-text");o.data(d,n.text());p.addClass("edit");o.val(n.text()).focus().select();return false}});$(".note").on("blur","input.note-text",function(){var r=$(this);console.log("HERE");var q=r.parent();var p=q.find("a.add-note");var s=$.trim(r.val());if(s===e){s=""}var o=r.closest(".quote").data("scheduleid");$.postq("AddNote",QuoteScheduleDay.urls.saveNote,{scheduleid:o,note:s},$.noop);r.removeData(d);q.removeClass("edit");var n=$("tr[data-scheduleid="+o+"]").find("a.add-note");n.text(s||e).toggleClass("changed",p.text()!==e)});$(".note").on("keyup","input.note-text",function(n){var p=$(this);if(n.keyCode===Keys.ENTER){p.closest("tr").find(".cursor-holder").focus();return false}if(n.keyCode===Keys.ESCAPE){var o=p.data(d);p.val(o);p.removeData(d);p.blur();return false}})}};b.Assignment={templates:{crewAssign:"#crew-assign-template",vehicleAssign:"#vehicle-assign-template"},dialogs:{main:"#assign-resources-modal"},init:function(){Utility.initBase(b.Assignment);$(".btn-assign").click(function(){Assignment.dialogs.main.modal("show");var h=$(this).data("crew");var i=$(this).closest("table").find(".emp-holder [data-employeeid]").map(function(){var m=$(this);return{id:m.data("employeeid"),isdriver:Utility.parseBool(m.data("isdriver"))}}).get();var j=$(this).closest("table").find(".vehicle-holder [data-vehicleid]").map(function(){return $(this).data("vehicleid")}).get();var k=_.map(i,function(m){var n=Repository.getEmployee(m.id);n.isdriver=m.isdriver;return Assignment.templates.crewAssign(n)}).join("");var l=_.map(j,function(m){var n=Repository.getVehicle(m);return Assignment.templates.vehicleAssign(n)});$("#crew-assignment").empty().append(k);$("#vehicle-assignment").empty().append(l);Assignment.dialogs.main.find("[name=crewlookup]").val(h);return false});Assignment.dialogs.main.on("click",".icon-remove",function(){$(this).closest(".crew-assign,.vehicle-assign").remove()});var f=window.EMPLOYEE_JSON;var g=window.VEHICLE_JSON;Repository.init(f,g);var d=$("#add-employee").focus();d.autocomplete({lookup:_.map(Repository.employees,function(h){return{value:h.getDisplayValue(),alts:[h.Lookup,h.NameFirst,h.NameLast]}}),partialMatch:true,selectFirst:true,maxSuggestions:10,orderBy:SearchFunctions.employeeAutocompleteSort,onSelect:function(){$("#btn-add-employee").click();return false}});d.bind("keydown keypress keyup",function(h){if(h.keyCode===Keys.ENTER){$("#btn-add-employee").click();return false}});var e=$("#add-vehicle");e.autocomplete({lookup:_.map(Repository.vehicles,function(h){return{value:h.getDisplayValue(),alts:[h.Lookup,h.Name]}}),partialMatch:true,selectFirst:true,maxSuggestions:10,orderBy:SearchFunctions.vehicleAutocompleteSort});e.bind("keydown keypress keyup",function(h){if(h.keyCode===Keys.ENTER){$("#btn-add-vehicle").click();return false}});$("#btn-add-vehicle").click(function(){var j=Repository.getVehicle(e.val());var i=$(this).closest("form");var h=_.chain([i.serializeObject().vehicleid]).flatten().any(function(k){return k===(j&&j.VehicleID)}).value();e.val("");e.autocomplete("hide");if(!j||h){return false}$("#vehicle-assignment").append(Assignment.templates.vehicleAssign(j));return false});$("#btn-add-employee").click(function(){var i=Repository.getEmployee(d.val());var k=$(this).closest("form");d.autocomplete("hide");d.val("");d.trigger("keyup");if(!i){return false}var l=$(".emp-holder [data-employeeid]").map(function(){return $(this).data("employeeid")}).get();if(_.contains(l,i.EmployeeID)){var h=$("[data-employeeid="+i.EmployeeID+"]").closest("[data-crewid]").data("crewid");if(!window.confirm("This employee is already assigned to Crew "+h+" - Are you sure you want to add them to this crew?")){return false}}var j=_.chain([k.serializeObject().employeeid]).flatten().any(function(m){return m===(i&&i.EmployeeID)}).value();if(j){return false}i.isdriver=false;$("#crew-assignment").append(Assignment.templates.crewAssign(i));return false})}};b.ScheduleDay={init:function(){var d=$("#print-modal").modal({show:false});$("#print-quotes").click(function(){d.modal("show")})}}})(window);/*
    send-email.js
*/
window.SendEmail={templates:{addedFile:"#attached-file-template"},init:function(){Utility.initBase(SendEmail);$("#template").change(function(){var a=JSON.parse($(this).val());$("[name=subject]").val(a.Subject);$("[name=message]").val(a.Text)});$("#add-file-list").on("click","a[data-fileid]",function(){var c=SendEmail.templates.addedFile;var b={name:$(this).data("name"),fileid:$(this).data("fileid")};var a=$($.parseHTML(c(b))).css("display","none");$("#added-file-list").append(a);a.slideDown();$(this).closest("li").slideUp();return false});$("#added-file-list").on("click",".icon-remove",function(){var b=$(this).closest("li").slideUp(function(){$(this).remove()});var a=b.data("fileid");$("#add-file-list").find("a[data-fileid='"+a+"']").closest("li").slideDown();return false});$(".change-email").click(function(){var a=$(this).data("email");$("[name=to]").val(a);return false});$("[type=submit]").click(function(){Utility.showOverlay()})}};/*
    posting-view.js
*/
window.PostingView={init:function(){var a=$("#add-payment-modal");PaymentModal.init(a);$(document).on("click","#add-payment",function(){PaymentModal.show();return false})}};/*
  home.js
*/
window.HomePage={init:function(){$(".panel-section").each(function(){var a=Utility.htmlEncode($(this).text());$(this).html(Utility.addCustomLinks(a))})}};(function(dP,ci,cs){function aB(a){return function(){var q=arguments[0],r,q="["+(a?a+":":"")+q+"] http://errors.angularjs.org/1.2.10/"+(a?a+"/":"")+q;for(r=1;r<arguments.length;r++){q=q+(1==r?"?":"&")+"p"+(r-1)+"="+encodeURIComponent("function"==typeof arguments[r]?arguments[r].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[r]?"undefined":"string"!=typeof arguments[r]?JSON.stringify(arguments[r]):arguments[r])}return Error(q)}}function cv(r){if(null==r||j(r)){return !1}var q=r.length;return 1===r.nodeType&&q?!0:ag(r)||bk(r)||0===q||"number"===typeof q&&0<q&&q-1 in r}function ch(r,q,t){var w;if(r){if(bt(r)){for(w in r){"prototype"==w||("length"==w||"name"==w||r.hasOwnProperty&&!r.hasOwnProperty(w))||q.call(t,r[w],w)}}else{if(r.forEach&&r.forEach!==ch){r.forEach(q,t)}else{if(cv(r)){for(w=0;w<r.length;w++){q.call(t,r[w],w)}}else{for(w in r){r.hasOwnProperty(w)&&q.call(t,r[w],w)}}}}}return r}function b8(r){var q=[],t;for(t in r){r.hasOwnProperty(t)&&q.push(t)}return q.sort()}function ca(r,q,t){for(var w=b8(r),x=0;x<w.length;x++){q.call(t,r[w[x]],w[x])}return w}function cm(a){return function(q,r){a(r,q)}}function c(){for(var r=bl.length,q;r;){r--;q=bl[r].charCodeAt(0);if(57==q){return bl[r]="A",bl.join("")}if(90==q){bl[r]="0"}else{return bl[r]=String.fromCharCode(q+1),bl.join("")}}bl.unshift("0");return bl.join("")}function cw(r,q){q?r.$$hashKey=q:delete r.$$hashKey}function cM(r){var q=r.$$hashKey;ch(arguments,function(t){t!==r&&ch(t,function(w,x){r[x]=w})});cw(r,q);return r}function cC(a){return parseInt(a,10)}function cG(r,q){return cM(new (cM(function(){},{prototype:r})),q)}function di(){}function C(a){return a}function b(a){return function(){return a}}function dO(a){return"undefined"===typeof a}function v(a){return"undefined"!==typeof a}function du(a){return null!=a&&"object"===typeof a}function ag(a){return"string"===typeof a}function cF(a){return"number"===typeof a}function bv(a){return"[object Date]"===bF.call(a)}function bk(a){return"[object Array]"===bF.call(a)}function bt(a){return"function"===typeof a}function k(a){return"[object RegExp]"===bF.call(a)}function j(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function co(a){return !(!a||!(a.nodeName||a.on&&a.find))}function cy(r,q,t){var w=[];ch(r,function(a,z,x){w.push(q.call(t,a,z,x))});return w}function E(r,q){if(r.indexOf){return r.indexOf(q)}for(var t=0;t<r.length;t++){if(q===r[t]){return t}}return -1}function bN(r,q){var t=E(r,q);0<=t&&r.splice(t,1);return q}function i(r,q){if(j(r)||r&&r.$evalAsync&&r.$watch){throw bX("cpws")}if(q){if(r===q){throw bX("cpi")}if(bk(r)){for(var t=q.length=0;t<r.length;t++){q.push(i(r[t]))}}else{t=q.$$hashKey;ch(q,function(a,x){delete q[x]});for(var w in r){q[w]=i(r[w])}cw(q,t)}}else{(q=r)&&(bk(r)?q=i(r,[]):bv(r)?q=new Date(r.getTime()):k(r)?q=RegExp(r.source):du(r)&&(q=i(r,{})))}return q}function cQ(r,q){q=q||{};for(var t in r){r.hasOwnProperty(t)&&("$"!==t.charAt(0)&&"$"!==t.charAt(1))&&(q[t]=r[t])}return q}function cW(r,q){if(r===q){return !0}if(null===r||null===q){return !1}if(r!==r&&q!==q){return !0}var t=typeof r,w;if(t==typeof q&&"object"==t){if(bk(r)){if(!bk(q)){return !1}if((t=r.length)==q.length){for(w=0;w<t;w++){if(!cW(r[w],q[w])){return !1}}return !0}}else{if(bv(r)){return bv(q)&&r.getTime()==q.getTime()}if(k(r)&&k(q)){return r.toString()==q.toString()}if(r&&r.$evalAsync&&r.$watch||q&&q.$evalAsync&&q.$watch||j(r)||j(q)||bk(q)){return !1}t={};for(w in r){if("$"!==w.charAt(0)&&!bt(r[w])){if(!cW(r[w],q[w])){return !1}t[w]=!0}}for(w in q){if(!t.hasOwnProperty(w)&&"$"!==w.charAt(0)&&q[w]!==cs&&!bt(q[w])){return !1}}return !0}}return !1}function cZ(){return ci.securityPolicy&&ci.securityPolicy.isActive||ci.querySelector&&!(!ci.querySelector("[ng-csp]")&&!ci.querySelector("[data-ng-csp]"))}function U(r,q){var t=2<arguments.length?c5.call(arguments,2):[];return !bt(q)||q instanceof RegExp?q:t.length?function(){return arguments.length?q.apply(r,t.concat(c5.call(arguments,0))):q.apply(r,t)}:function(){return arguments.length?q.apply(r,arguments):q.call(r)}}function cI(r,q){var t=q;"string"===typeof r&&"$"===r.charAt(0)?t=cs:j(q)?t="$WINDOW":q&&ci===q?t="$DOCUMENT":q&&(q.$evalAsync&&q.$watch)&&(t="$SCOPE");return t}function cj(r,q){return"undefined"===typeof r?cs:JSON.stringify(r,cI,q?"  ":null)}function c8(a){return ag(a)?JSON.parse(a):a}function b6(a){"function"===typeof a?a=!0:a&&0!==a.length?(a=dt(""+a),a=!("f"==a||"0"==a||"false"==a||"no"==a||"n"==a||"[]"==a)):a=!1;return a}function aL(r){r=h(r).clone();try{r.empty()}catch(q){}var t=h("<div>").append(r).html();try{return 3===r[0].nodeType?dt(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(x,z){return"<"+dt(z)})}catch(w){return dt(t)}}function dm(r){try{return decodeURIComponent(r)}catch(q){}}function dy(r){var q={},t,w;ch((r||"").split("&"),function(a){a&&(t=a.split("="),w=dm(t[0]),v(w)&&(a=v(t[1])?dm(t[1]):!0,q[w]?bk(q[w])?q[w].push(a):q[w]=[q[w],a]:q[w]=a))});return q}function dI(r){var q=[];ch(r,function(a,t){bk(a)?ch(a,function(w){q.push(dk(t,!0)+(!0===w?"":"="+dk(w,!0)))}):q.push(dk(t,!0)+(!0===a?"":"="+dk(a,!0)))});return q.length?q.join("&"):""}function cP(a){return dk(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function dk(r,q){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,q?"%20":"+")}function cS(r,q){function t(D){D&&w.push(D)}var w=[r],x,A,z=["ng:app","ng-app","x-ng-app","data-ng-app"],B=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;ch(z,function(D){z[D]=!0;t(ci.getElementById(D));D=D.replace(":","\\:");r.querySelectorAll&&(ch(r.querySelectorAll("."+D),t),ch(r.querySelectorAll("."+D+"\\:"),t),ch(r.querySelectorAll("["+D+"]"),t))});ch(w,function(D){if(!x){var F=B.exec(" "+D.className+" ");F?(x=D,A=(F[2]||"").replace(/\s+/g,",")):ch(D.attributes,function(a){!x&&z[a.name]&&(x=D,A=a.value)})}});x&&q(x,A?[A]:[])}function dT(r,q){var t=function(){r=h(r);if(r.injector()){var a=r[0]===ci?"document":aL(r);throw bX("btstrpd",a)}q=q||[];q.unshift(["$provide",function(x){x.value("$rootElement",r)}]);q.unshift("ng");a=d(q);a.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(x,z,A,B,D){x.$apply(function(){z.data("$injector",B);A(z)(x)})}]);return a},w=/^NG_DEFER_BOOTSTRAP!/;if(dP&&!w.test(dP.name)){return t()}dP.name=dP.name.replace(w,"");T.resumeBootstrap=function(a){ch(a,function(x){q.push(x)});t()}}function ai(r,q){q=q||"_";return r.replace(c1,function(a,t){return(t?q:"")+a.toLowerCase()})}function cY(r,q,t){if(!r){throw bX("areq",q||"?",t||"required")}return r}function ck(r,q,t){t&&bk(r)&&(r=r[r.length-1]);cY(bt(r),q,"not a function, got "+(r&&"object"==typeof r?r.constructor.name||"Object":typeof r));return r}function dv(r,q){if("hasOwnProperty"===r){throw bX("badname",q)}}function c7(r,q,t){if(!q){return r}q=q.split(".");for(var w,x=r,A=q.length,z=0;z<A;z++){w=q[z],r&&(r=(x=r)[w])}return !t&&bt(r)?U(x,r):r}function dl(r){var q=r[0];r=r[r.length-1];if(q===r){return h(q)}var t=[q];do{q=q.nextSibling;if(!q){break}t.push(q)}while(q!==r);return h(t)}function da(r){var q=aB("$injector"),t=aB("ng");r=r.angular||(r.angular={});r.$$minErr=r.$$minErr||aB;return r.module||(r.module=function(){var a={};return function(w,z,x){if("hasOwnProperty"===w){throw t("badname","module")}z&&a.hasOwnProperty(w)&&(a[w]=null);return a[w]||(a[w]=function(){function A(L,M,O){return function(){B[O||"push"]([L,M,arguments]);return K}}if(!z){throw q("nomod",w)}var B=[],D=[],F=A("$injector","invoke"),K={_invokeQueue:B,_runBlocks:D,requires:z,name:w,provider:A("$provide","provider"),factory:A("$provide","factory"),service:A("$provide","service"),value:A("$provide","value"),constant:A("$provide","constant","unshift"),animation:A("$animateProvider","register"),filter:A("$filterProvider","register"),controller:A("$controllerProvider","register"),directive:A("$compileProvider","directive"),config:F,run:function(L){D.push(L);return this}};x&&F(x);return K}())}}())}function cu(a){return a.replace(dp,function(q,r,t,w){return w?t.toUpperCase():t}).replace(dA,"Moz$1")}function dx(r,q,t,w){function x(a){var B=t&&a?[this.filter(a)]:[this],K=q,D,F,L,M,O,A;if(!w||null!=a){for(;B.length;){for(D=B.shift(),F=0,L=D.length;F<L;F++){for(M=h(D[F]),K?M.triggerHandler("$destroy"):K=!K,O=0,M=(A=M.children()).length;O<M;O++){B.push(ah(A[O]))}}}}return z.apply(this,arguments)}var z=ah.fn[r],z=z.$original||z;x.$original=z;ah.fn[r]=x}function bV(r){if(r instanceof bV){return r}if(!(this instanceof bV)){if(ag(r)&&"<"!=r.charAt(0)){throw dH("nosel")}return new bV(r)}if(ag(r)){var q=ci.createElement("div");q.innerHTML="<div>&#160;</div>"+r;q.removeChild(q.firstChild);dS(this,q.childNodes);h(ci.createDocumentFragment()).append(this)}else{dS(this,r)}}function l(a){return a.cloneNode(!0)}function ar(r){m(r);var q=0;for(r=r.childNodes||[];q<r.length;q++){ar(r[q])}}function H(r,q,t,w){if(v(w)){throw dH("offargs")}var x=bu(r,"events");bu(r,"handle")&&(dO(q)?ch(x,function(z,A){G(r,A,z);delete x[A]}):ch(q.split(" "),function(z){dO(t)?(G(r,z,x[z]),delete x[z]):bN(x[z]||[],t)}))}function m(r,q){var t=r[at],w=cE[t];w&&(q?delete cE[t].data[q]:(w.handle&&(w.events.$destroy&&w.handle({},"$destroy"),H(r)),delete cE[t],r[at]=cs))}function bu(r,q,t){var w=r[at],w=cE[w||-1];if(v(t)){w||(r[at]=w=++dK,w=cE[w]={}),w[q]=t}else{return w&&w[q]}}function aa(r,q,t){var w=bu(r,"data"),x=v(t),A=!x&&v(q),z=A&&!du(q);w||z||bu(r,"data",w={});if(x){w[q]=t}else{if(A){if(z){return w&&w[q]}cM(w,q)}else{return w}}}function V(r,q){return r.getAttribute?-1<(" "+(r.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+q+" "):!1}function aj(r,q){q&&r.setAttribute&&ch(q.split(" "),function(t){r.setAttribute("class",y((" "+(r.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+y(t)+" "," ")))})}function au(r,q){if(q&&r.setAttribute){var t=(" "+(r.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");ch(q.split(" "),function(w){w=y(w);-1===t.indexOf(" "+w+" ")&&(t+=w+" ")});r.setAttribute("class",y(t))}}function dS(r,q){if(q){q=q.nodeName||!v(q.length)||j(q)?[q]:q;for(var t=0;t<q.length;t++){r.push(q[t])}}}function ak(r,q){return aE(r,"$"+(q||"ngController")+"Controller")}function aE(r,q,t){r=h(r);9==r[0].nodeType&&(r=r.find("html"));for(q=bk(q)?q:[q];r.length;){for(var w=0,x=q.length;w<x;w++){if((t=r.data(q[w]))!==cs){return t}}r=r.parent()}}function av(r){for(var q=0,t=r.childNodes;q<t.length;q++){ar(t[q])}for(;r.firstChild;){r.removeChild(r.firstChild)}}function aF(r,q){var t=aN[q.toLowerCase()];return t&&aP[r.nodeName]&&t}function dV(r,q){var t=function(a,w){a.preventDefault||(a.preventDefault=function(){a.returnValue=!1});a.stopPropagation||(a.stopPropagation=function(){a.cancelBubble=!0});a.target||(a.target=a.srcElement||ci);if(dO(a.defaultPrevented)){var z=a.preventDefault;a.preventDefault=function(){a.defaultPrevented=!0;z.call(a)};a.defaultPrevented=!1}a.isDefaultPrevented=function(){return a.defaultPrevented||!1===a.returnValue};var x=cQ(q[w||a.type]||[]);ch(x,function(A){A.call(r,a)});8>=bD?(a.preventDefault=null,a.stopPropagation=null,a.isDefaultPrevented=null):(delete a.preventDefault,delete a.stopPropagation,delete a.isDefaultPrevented)};t.elem=r;return t}function aD(r){var q=typeof r,t;"object"==q&&null!==r?"function"==typeof(t=r.$$hashKey)?t=r.$$hashKey():t===cs&&(t=r.$$hashKey=c()):t=r;return q+":"+t}function cO(a){ch(a,this.put,this)}function aX(r){var q,t;"function"==typeof r?(q=r.$inject)||(q=[],r.length&&(t=r.toString().replace(e,""),t=t.match(o),ch(t[1].split(J),function(a){a.replace(ac,function(w,x,z){q.push(z)})})),r.$inject=q):bk(r)?(t=r.length-1,ck(r[t],"fn"),q=r.slice(0,t)):ck(r,"fn",!0);return q}function d(r){function q(Q){return function(a,S){if(du(a)){ch(a,cm(Q))}else{return Q(a,S)}}}function t(Q,S){dv(Q,"service");if(bt(S)||bk(S)){S=L.instantiate(S)}if(!S.$get){throw cX("pget",Q)}return F[Q+B]=S}function w(Q,S){return t(Q,{$get:S})}function x(Q){var S=[],W,X,Y,Z;ch(Q,function(cc){if(!D.get(cc)){D.put(cc,!0);try{if(ag(cc)){for(W=c6(cc),S=S.concat(x(W.requires)).concat(W._runBlocks),X=W._invokeQueue,Y=0,Z=X.length;Y<Z;Y++){var cd=X[Y],ce=L.get(cd[0]);ce[cd[1]].apply(ce,cd[2])}}else{bt(cc)?S.push(L.invoke(cc)):bk(cc)?S.push(L.invoke(cc)):ck(cc,"module")}}catch(db){throw bk(cc)&&(cc=cc[cc.length-1]),db.message&&(db.stack&&-1==db.stack.indexOf(db.message))&&(db=db.message+"\n"+db.stack),cX("modulerr",cc,db.stack||db.message||db)}}});return S}function A(Q,S){function W(a){if(Q.hasOwnProperty(a)){if(Q[a]===z){throw cX("cdep",K.join(" <- "))}return Q[a]}try{return K.unshift(a),Q[a]=z,Q[a]=S(a)}catch(Y){throw Q[a]===z&&delete Q[a],Y}finally{K.shift()}}function X(Y,Z,cc){var ce=[],db=aX(Y),cd,dc,dd;dc=0;for(cd=db.length;dc<cd;dc++){dd=db[dc];if("string"!==typeof dd){throw cX("itkn",dd)}ce.push(cc&&cc.hasOwnProperty(dd)?cc[dd]:W(dd))}Y.$inject||(Y=Y[cd]);return Y.apply(Z,ce)}return{invoke:X,instantiate:function(Y,Z){var cc=function(){},cd;cc.prototype=(bk(Y)?Y[Y.length-1]:Y).prototype;cc=new cc;cd=X(Y,cc,Z);return du(cd)||bt(cd)?cd:cc},get:W,annotate:aX,has:function(a){return F.hasOwnProperty(a+B)||Q.hasOwnProperty(a)}}}var z={},B="Provider",K=[],D=new cO,F={$provide:{provider:q(t),factory:q(w),service:q(function(Q,S){return w(Q,["$injector",function(W){return W.instantiate(S)}])}),value:q(function(Q,S){return w(Q,b(S))}),constant:q(function(Q,S){dv(Q,"constant");F[Q]=S;M[Q]=S}),decorator:function(Q,S){var W=L.get(Q+B),X=W.$get;W.$get=function(){var Y=O.invoke(X,W);return O.invoke(S,null,{$delegate:Y})}}}},L=F.$injector=A(F,function(){throw cX("unpr",K.join(" <- "))}),M={},O=M.$injector=A(M,function(Q){Q=L.get(Q+B);return O.invoke(Q.$get,Q)});ch(x(r),function(Q){O.invoke(Q||di)});return O}function am(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(q,r,t){function w(A){var B=null;ch(A,function(D){B||"a"!==dt(D.nodeName)||(B=D)});return B}function z(){var A=r.hash(),B;A?(B=x.getElementById(A))?B.scrollIntoView():(B=w(x.getElementsByName(A)))?B.scrollIntoView():"top"===A&&q.scrollTo(0,0):q.scrollTo(0,0)}var x=q.document;a&&t.$watch(function(){return r.hash()},function(){t.$evalAsync(z)});return z}]}function ax(r,q,t,z){function A(de){try{de.apply(null,c5.call(arguments,1))}finally{if(w--,0===w){for(;dd.length;){try{dd.pop()()}catch(dZ){t.error(dZ)}}}}}function F(de,dZ){(function d0(){ch(B,function(d1){d1()});ce=dZ(d0,de)})()}function D(){db=null;cc!=K.url()&&(cc=K.url(),ch(M,function(de){de(K.url())}))}var K=this,W=q[0],Q=r.location,S=r.history,X=r.setTimeout,Z=r.clearTimeout,cd={};K.isMock=!1;var w=0,dd=[];K.$$completeOutstandingRequest=A;K.$$incOutstandingRequestCount=function(){w++};K.notifyWhenNoOutstandingRequests=function(de){ch(B,function(dZ){dZ()});0===w?de():dd.push(de)};var B=[],ce;K.addPollFn=function(de){dO(ce)&&F(100,X);B.push(de);return de};var cc=Q.href,L=q.find("base"),db=null;K.url=function(de,dZ){Q!==r.location&&(Q=r.location);S!==r.history&&(S=r.history);if(de){if(cc!=de){return cc=de,z.history?dZ?S.replaceState(null,"",de):(S.pushState(null,"",de),L.attr("href",L.attr("href"))):(db=de,dZ?Q.replace(de):Q.href=de),K}}else{return db||Q.href.replace(/%27/g,"'")}};var M=[],Y=!1;K.onUrlChange=function(de){if(!Y){if(z.history){h(r).on("popstate",D)}if(z.hashchange){h(r).on("hashchange",D)}else{K.addPollFn(D)}Y=!0}M.push(de);return de};K.baseHref=function(){var de=L.attr("href");return de?de.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var dc={},O="",x=K.baseHref();K.cookies=function(de,dZ){var d0,d1,d2,d3;if(de){dZ===cs?W.cookie=escape(de)+"=;path="+x+";expires=Thu, 01 Jan 1970 00:00:00 GMT":ag(dZ)&&(d0=(W.cookie=escape(de)+"="+escape(dZ)+";path="+x).length+1,4096<d0&&t.warn("Cookie '"+de+"' possibly not set or overflowed because it was too large ("+d0+" > 4096 bytes)!"))}else{if(W.cookie!==O){for(O=W.cookie,d0=O.split("; "),dc={},d2=0;d2<d0.length;d2++){d1=d0[d2],d3=d1.indexOf("="),0<d3&&(de=unescape(d1.substring(0,d3)),dc[de]===cs&&(dc[de]=unescape(d1.substring(d3+1))))}}return dc}};K.defer=function(de,dZ){var d0;w++;d0=X(function(){delete cd[d0];A(de)},dZ||0);cd[d0]=!0;return d0};K.defer.cancel=function(de){return cd[de]?(delete cd[de],Z(de),A(di),!0):!1}}function aH(){this.$get=["$window","$log","$sniffer","$document",function(r,q,t,w){return new ax(r,w,q,t)}]}function aR(){this.$get=function(){function r(a,t){function w(M){M!=K&&(L?L==M&&(L=M.n):L=M,z(M.n,M.p),z(M,K),K=M,K.n=null)}function z(M,O){M!=O&&(M&&(M.p=O),O&&(O.n=M))}if(a in q){throw aB("$cacheFactory")("iid",a)}var x=0,A=cM({},t,{id:a}),F={},B=t&&t.capacity||Number.MAX_VALUE,D={},K=null,L=null;return q[a]={put:function(M,O){var Q=D[M]||(D[M]={key:M});w(Q);if(!dO(O)){return M in F||x++,F[M]=O,x>B&&this.remove(L.key),O}},get:function(M){var O=D[M];if(O){return w(O),F[M]}},remove:function(M){var O=D[M];O&&(O==K&&(K=O.p),O==L&&(L=O.n),z(O.n,O.p),delete D[M],delete F[M],x--)},removeAll:function(){F={};x=0;D={};K=L=null},destroy:function(){D=A=F=null;delete q[a]},info:function(){return cM({},A,{size:x})}}}var q={};r.info=function(){var a={};ch(q,function(t,w){a[w]=t.info()});return a};r.get=function(a){return q[a]};return r}}function aZ(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function be(r,q){var t={},w="Directive",x=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,A=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,z=/^(on[a-z]+|formaction)$/;this.directive=function B(D,F){dv(D,"directive");ag(D)?(cY(F,"directiveFactory"),t.hasOwnProperty(D)||(t[D]=[],r.factory(D+w,["$injector","$exceptionHandler",function(a,K){var L=[];ch(t[D],function(M,Q){try{var O=a.invoke(M);bt(O)?O={compile:b(O)}:!O.compile&&O.link&&(O.compile=b(O.link));O.priority=O.priority||0;O.index=Q;O.name=O.name||D;O.require=O.require||O.controller&&O.name;O.restrict=O.restrict||"A";L.push(O)}catch(S){K(S)}});return L}])),t[D].push(F)):ch(D,cm(B));return this};this.aHrefSanitizationWhitelist=function(a){return v(a)?(q.aHrefSanitizationWhitelist(a),this):q.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return v(a)?(q.imgSrcSanitizationWhitelist(a),this):q.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(D,K,d1,d2,d6,d9,M,ei,Z,ec,d8,ce){function ed(F,O,S,W,Y){F instanceof h||(F=h(F));ch(F,function(a,em){3==a.nodeType&&a.nodeValue.match(/\S+/)&&(F[em]=h(a).wrap("<span></span>").parent()[0])});var el=d3(F,O,F,S,W,Y);db(F,"ng-scope");return function(a,em,en){cY(a,"scope");var eo=em?aM.clone.call(F):F;ch(en,function(er,es){eo.data("$"+es+"Controller",er)});en=0;for(var ep=eo.length;en<ep;en++){var eq=eo[en].nodeType;1!==eq&&9!==eq||eo.eq(en).data("$scope",a)}em&&em(eo,a);el&&el(a,eo,eo);return eo}}function db(F,O){try{F.addClass(O)}catch(S){}}function d3(F,O,S,W,Y,em){function el(et,eu,ew,ex){var ey,eA,eE,eB,eC,eD,ez;ey=eu.length;var ev=Array(ey);for(eC=0;eC<ey;eC++){ev[eC]=eu[eC]}ez=eC=0;for(eD=ep.length;eC<eD;ez++){eA=ev[ez],eu=ep[eC++],ey=ep[eC++],eE=h(eA),eu?(eu.scope?(eB=et.$new(),eE.data("$scope",eB)):eB=et,(eE=eu.transclude)||!ex&&O?eu(ey,eB,eA,ew,ee(et,eE||O)):eu(ey,eB,eA,ew,ex)):ey&&ey(et,eA.childNodes,cs,ex)}}for(var ep=[],en,es,eo,eq,er=0;er<F.length;er++){en=new cd,es=dZ(F[er],[],en,0===er?W:cs,Y),(em=es.length?dc(es,F[er],en,O,S,null,[],[],em):null)&&em.scope&&db(h(F[er]),"ng-scope"),en=em&&em.terminal||!(eo=F[er].childNodes)||!eo.length?null:d3(eo,em?em.transclude:O),ep.push(em,en),eq=eq||em||en,em=null}return eq?el:null}function ee(F,O){return function(a,S,W){var Y=!1;a||(a=F.$new(),Y=a.$$transcluded=!0);S=O(a,S,W);if(Y){S.on("$destroy",U(a,a.$destroy))}return S}}function dZ(F,O,S,Y,em){var en=S.$attr,ep;switch(F.nodeType){case 1:eb(O,bE(aV(F).toLowerCase()),"E",Y,em);var et,eo,eq;ep=F.attributes;for(var er=0,W=ep&&ep.length;er<W;er++){var ev=!1,es=!1;et=ep[er];if(!bD||8<=bD||et.specified){eo=et.name;eq=bE(eo);eg.test(eq)&&(eo=ai(eq.substr(6),"-"));var eu=eq.replace(/(Start|End)$/,"");eq===eu+"Start"&&(ev=eo,es=eo.substr(0,eo.length-5)+"end",eo=eo.substr(0,eo.length-6));eq=bE(eo.toLowerCase());en[eq]=eo;S[eq]=et=y(et.value);aF(F,eq)&&(S[eq]=!0);ea(F,O,et,eq);eb(O,eq,"A",Y,em,ev,es)}}F=F.className;if(ag(F)&&""!==F){for(;ep=A.exec(F);){eq=bE(ep[2]),eb(O,eq,"C",Y,em)&&(S[eq]=y(ep[3])),F=F.substr(ep.index+ep[0].length)}}break;case 3:cc(O,F.nodeValue);break;case 8:try{if(ep=x.exec(F.nodeValue)){eq=bE(ep[1]),eb(O,eq,"M",Y,em)&&(S[eq]=y(ep[2]))}}catch(el){}}O.sort(ek);return O}function Q(F,O,S){var W=[],Y=0;if(O&&F.hasAttribute&&F.hasAttribute(O)){do{if(!F){throw ba("uterdir",O,S)}1==F.nodeType&&(F.hasAttribute(O)&&Y++,F.hasAttribute(S)&&Y--);W.push(F);F=F.nextSibling}while(0<Y)}else{W.push(F)}return h(W)}function d7(F,O,S){return function(a,W,el,Y,em){W=Q(W[0],O,S);return F(a,W,el,Y,em)}}function dc(Y,el,em,eo,es,eq,ew,ey,eC){function eM(F,O,S,W){if(F){S&&(F=d7(F,S,W));F.require=et.require;if(eu===et||et.$$isolateScope){F=d0(F,{isolateScope:!0})}ew.push(F)}if(O){S&&(O=d7(O,S,W));O.require=et.require;if(eu===et||et.$$isolateScope){O=d0(O,{isolateScope:!0})}ey.push(O)}}function eD(F,O,S){var W,eP="data",eQ=!1;if(ag(F)){for(;"^"==(W=F.charAt(0))||"?"==W;){F=F.substr(1),"^"==W&&(eP="inheritedData"),eQ=eQ||"?"==W}W=null;S&&"data"===eP&&(W=S[F]);W=W||O[eP]("$"+F+"Controller");if(!W&&!eQ){throw ba("ctreq",F,en)}}else{bk(F)&&(W=[],ch(F,function(eR){W.push(eD(eR,O,S))}))}return W}function ep(F,W,eQ,eP,eW){function e1(e2,e3){var e4;2>arguments.length&&(e3=e2,e2=cs);eN&&(e4=S);return eW(e2,e3,e4)}var eT,e0,eV,eZ,eX,eU,S={},eS;eT=el===eQ?em:cQ(em,new cd(h(eQ),em.$attr));e0=eT.$$element;if(eu){var eY=/^\s*([@=&])(\??)\s*(\w*)\s*$/;eP=h(eQ);eU=W.$new(!0);ev&&ev===eu.$$originalDirective?eP.data("$isolateScope",eU):eP.data("$isolateScopeNoTemplate",eU);db(eP,"ng-isolate-scope");ch(eu.scope,function(e2,e3){var e4=e2.match(eY)||[],e6=e4[3]||e3,e5="?"==e4[2],e4=e4[1],e8,e7,e9,fa;eU.$$isolateBindings[e3]=e4+e6;switch(e4){case"@":eT.$observe(e6,function(fb){eU[e3]=fb});eT.$$observers[e6].$$scope=W;eT[e6]&&(eU[e3]=K(eT[e6])(W));break;case"=":if(e5&&!eT[e6]){break}e7=d9(eT[e6]);fa=e7.literal?cW:function(fb,fc){return fb===fc};e9=e7.assign||function(){e8=eU[e3]=e7(W);throw ba("nonassign",eT[e6],eu.name)};e8=eU[e3]=e7(W);eU.$watch(function(){var fb=e7(W);fa(fb,eU[e3])||(fa(fb,e8)?e9(W,fb=eU[e3]):eU[e3]=fb);return e8=fb},null,e7.literal);break;case"&":e7=d9(eT[e6]);eU[e3]=function(fb){return e7(W,fb)};break;default:throw ba("iscp",eu.name,e3,e2)}})}eS=eW&&e1;eJ&&ch(eJ,function(e2){var e3={$scope:e2===eu||e2.$$isolateScope?eU:W,$element:e0,$attrs:eT,$transclude:eS},e4;eX=e2.controller;"@"==eX&&(eX=eT[e2.name]);e4=M(eX,e3);S[e2.name]=e4;eN||e0.data("$"+e2.name+"Controller",e4);e2.controllerAs&&(e3.$scope[e2.controllerAs]=e4)});eP=0;for(eV=ew.length;eP<eV;eP++){try{eZ=ew[eP],eZ(eZ.isolateScope?eU:W,e0,eT,eZ.require&&eD(eZ.require,e0,S),eS)}catch(eR){d1(eR,aL(e0))}}eP=W;eu&&(eu.template||null===eu.templateUrl)&&(eP=eU);F&&F(eP,eQ.childNodes,cs,eW);for(eP=ey.length-1;0<=eP;eP--){try{eZ=ey[eP],eZ(eZ.isolateScope?eU:W,e0,eT,eZ.require&&eD(eZ.require,e0,S),eS)}catch(O){d1(O,aL(e0))}}}eC=eC||{};var ez=-Number.MAX_VALUE,eH,eJ=eC.controllerDirectives,eu=eC.newIsolateScopeDirective,ev=eC.templateDirective;eC=eC.nonTlbTranscludeDirective;for(var eG=!1,eN=!1,eF=em.$$element=h(el),et,en,eI,er=eo,eB,ex=0,eA=Y.length;ex<eA;ex++){et=Y[ex];var eL=et.$$start,eE=et.$$end;eL&&(eF=Q(el,eL,eE));eI=cs;if(ez>et.priority){break}if(eI=et.scope){eH=eH||et,et.templateUrl||(eh("new/isolated scope",eu,et,eF),du(eI)&&(eu=et))}en=et.name;!et.templateUrl&&et.controller&&(eI=et.controller,eJ=eJ||{},eh("'"+en+"' controller",eJ[en],et,eF),eJ[en]=et);if(eI=et.transclude){eG=!0,et.$$tlb||(eh("transclusion",eC,et,eF),eC=et),"element"==eI?(eN=!0,ez=et.priority,eI=Q(el,eL,eE),eF=em.$$element=h(ci.createComment(" "+en+": "+em[en]+" ")),el=eF[0],dd(es,h(c5.call(eI,0)),el),er=ed(eI,eo,ez,eq&&eq.name,{nonTlbTranscludeDirective:eC})):(eI=h(l(el)).contents(),eF.empty(),er=ed(eI,eo))}if(et.template){if(eh("template",ev,et,eF),ev=et,eI=bt(et.template)?et.template(eF,em):et.template,eI=ej(eI),et.replace){eq=et;eI=h("<div>"+y(eI)+"</div>").contents();el=eI[0];if(1!=eI.length||1!==el.nodeType){throw ba("tplrt",en,"")}dd(es,eF,el);eA={$attr:{}};eI=dZ(el,[],eA);var eK=Y.splice(ex+1,Y.length-(ex+1));eu&&de(eI);Y=Y.concat(eI).concat(eK);L(em,eA);eA=Y.length}else{eF.html(eI)}}if(et.templateUrl){eh("template",ev,et,eF),ev=et,et.replace&&(eq=et),ep=ef(Y.splice(ex,Y.length-ex),eF,em,es,er,ew,ey,{controllerDirectives:eJ,newIsolateScopeDirective:eu,templateDirective:ev,nonTlbTranscludeDirective:eC}),eA=Y.length}else{if(et.compile){try{eB=et.compile(eF,em,er),bt(eB)?eM(null,eB,eL,eE):eB&&eM(eB.pre,eB.post,eL,eE)}catch(eO){d1(eO,aL(eF))}}}et.terminal&&(ep.terminal=!0,ez=Math.max(ez,et.priority))}ep.scope=eH&&!0===eH.scope;ep.transclude=eG&&er;return ep}function de(F){for(var O=0,S=F.length;O<S;O++){F[O]=cG(F[O],{$$isolateScope:!0})}}function eb(a,O,W,S,Y,en,el){if(O===Y){return null}Y=null;if(t.hasOwnProperty(O)){var em;O=D.get(O+w);for(var F=0,ep=O.length;F<ep;F++){try{em=O[F],(S===cs||S>em.priority)&&-1!=em.restrict.indexOf(W)&&(en&&(em=cG(em,{$$start:en,$$end:el})),a.push(em),Y=em)}catch(eo){d1(eo)}}}return Y}function L(F,O){var S=O.$attr,W=F.$attr,Y=F.$$element;ch(F,function(a,el){"$"!=el.charAt(0)&&(O[el]&&(a+=("style"===el?";":" ")+O[el]),F.$set(el,a,!0,S[el]))});ch(O,function(a,el){"class"==el?(db(Y,a),F["class"]=(F["class"]?F["class"]+" ":"")+a):"style"==el?(Y.attr("style",Y.attr("style")+";"+a),F.style=(F.style?F.style+";":"")+a):"$"==el.charAt(0)||F.hasOwnProperty(el)||(F[el]=a,W[el]=S[el])})}function ef(F,O,S,Y,el,en,em,eq){var eo=[],es,ep,W=O[0],eu=F.shift(),et=cM({},eu,{templateUrl:null,transclude:null,replace:null,$$originalDirective:eu}),er=bt(eu.templateUrl)?eu.templateUrl(O,S):eu.templateUrl;O.empty();d2.get(ec.getTrustedResourceUrl(er),{cache:d6}).success(function(ex){var ey,a;ex=ej(ex);if(eu.replace){ex=h("<div>"+y(ex)+"</div>").contents();ey=ex[0];if(1!=ex.length||1!==ey.nodeType){throw ba("tplrt",eu.name,er)}ex={$attr:{}};dd(Y,O,ey);var ez=dZ(ey,[],ex);du(eu.scope)&&de(ez);F=ez.concat(F);L(S,ex)}else{ey=W,O.html(ex)}F.unshift(et);es=dc(F,ey,S,el,O,eu,en,em,eq);ch(Y,function(eA,eB){eA==ey&&(Y[eB]=O[0])});for(ep=d3(O[0].childNodes,el);eo.length;){ex=eo.shift();a=eo.shift();var ev=eo.shift(),ew=eo.shift(),ez=O[0];a!==W&&(ez=l(ey),dd(ev,h(a),ez));a=es.transclude?ee(ex,es.transclude):ew;es(ep,ex,ez,Y,a)}eo=null}).error(function(ev,ew,ex,ey){throw ba("tpload",ey.url)});return function(ev,ew,ex,ey,ez){eo?(eo.push(ew),eo.push(ex),eo.push(ey),eo.push(ez)):es(ep,ew,ex,ey,ez)}}function ek(F,O){var S=O.priority-F.priority;return 0!==S?S:F.name!==O.name?F.name<O.name?-1:1:F.index-O.index}function eh(F,O,S,W){if(O){throw ba("multidir",O.name,S.name,F,aL(W))}}function cc(F,O){var S=K(O,!0);S&&F.push({priority:0,compile:b(function(W,Y){var el=Y.parent(),em=el.data("$binding")||[];em.push(S);db(el.data("$binding",em),"ng-binding");W.$watch(S,function(en){Y[0].nodeValue=en})})})}function d5(F,O){if("srcdoc"==O){return ec.HTML}var S=aV(F);if("xlinkHref"==O||"FORM"==S&&"action"==O||"IMG"!=S&&("src"==O||"ngSrc"==O)){return ec.RESOURCE_URL}}function ea(F,O,S,W){var Y=K(S,!0);if(Y){if("multiple"===W&&"SELECT"===aV(F)){throw ba("selmulti",aL(F))}O.push({priority:100,compile:function(){return{pre:function(a,el,em){el=em.$$observers||(em.$$observers={});if(z.test(W)){throw ba("nodomevents")}if(Y=K(em[W],!0,d5(F,W))){em[W]=Y(a),(el[W]||(el[W]=[])).$$inter=!0,(em.$$observers&&em.$$observers[W].$$scope||a).$watch(Y,function(en,eo){"class"===W&&en!=eo?em.$updateClass(en,eo):em.$set(W,en)})}}}}})}}function dd(F,O,S){var W=O[0],Y=O.length,em=W.parentNode,el,eo;if(F){for(el=0,eo=F.length;el<eo;el++){if(F[el]==W){F[el++]=S;eo=el+Y-1;for(var en=F.length;el<en;el++,eo++){eo<en?F[el]=F[eo]:delete F[el]}F.length-=Y-1;break}}}em&&em.replaceChild(S,W);F=ci.createDocumentFragment();F.appendChild(W);S[h.expando]=W[h.expando];W=1;for(Y=O.length;W<Y;W++){em=O[W],h(em).remove(),F.appendChild(em),delete O[W]}O[0]=S;O.length=1}function d0(F,O){return cM(function(){return F.apply(null,arguments)},F,O)}var cd=function(F,O){this.$$element=F;this.$attr=O||{}};cd.prototype={$normalize:bE,$addClass:function(F){F&&0<F.length&&d8.addClass(this.$$element,F)},$removeClass:function(F){F&&0<F.length&&d8.removeClass(this.$$element,F)},$updateClass:function(F,O){this.$removeClass(by(O,F));this.$addClass(by(F,O))},$set:function(F,O,S,W){var Y=aF(this.$$element[0],F);Y&&(this.$$element.prop(F,O),W=Y);this[F]=O;W?this.$attr[F]=W:(W=this.$attr[F])||(this.$attr[F]=W=ai(F,"-"));Y=aV(this.$$element);if("A"===Y&&"href"===F||"IMG"===Y&&"src"===F){this[F]=O=ce(O,"src"===F)}!1!==S&&(null===O||O===cs?this.$$element.removeAttr(W):this.$$element.attr(W,O));(S=this.$$observers)&&ch(S[F],function(el){try{el(O)}catch(em){d1(em)}})},$observe:function(F,O){var S=this,W=S.$$observers||(S.$$observers={}),Y=W[F]||(W[F]=[]);Y.push(O);ei.$evalAsync(function(){Y.$$inter||O(S[F])});return O}};var X=K.startSymbol(),d4=K.endSymbol(),ej="{{"==X||"}}"==d4?C:function(F){return F.replace(/\{\{/g,X).replace(/}}/g,d4)},eg=/^ngAttr[A-Z]/;return ed}]}function bE(a){return cu(a.replace(a6,""))}function by(r,q){var t="",w=r.split(/\s+/),x=q.split(/\s+/),A=0;q:for(;A<w.length;A++){for(var z=w[A],B=0;B<x.length;B++){if(z==x[B]){continue q}}t+=(0<t.length?" ":"")+z}return t}function bg(){var r={},q=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,w){dv(t,"controller");du(t)?cM(r,t):r[t]=w};this.$get=["$injector","$window",function(a,t){return function(w,z){var x,A,B;ag(w)&&(x=w.match(q),A=x[1],B=x[3],w=r.hasOwnProperty(A)?r[A]:c7(z.$scope,A,!0)||c7(t,A,!0),ck(w,A,!0));x=a.instantiate(w,z);if(B){if(!z||"object"!=typeof z.$scope){throw aB("$controller")("noscp",A||w.name,B)}z.$scope[B]=x}return x}}]}function bq(){this.$get=["$window",function(a){return h(a.document)}]}function bA(){this.$get=["$log",function(a){return function(q,r){a.error.apply(a,arguments)}}]}function bI(r){var q={},t,w,x;if(!r){return q}ch(r.split("\n"),function(a){x=a.indexOf(":");t=dt(y(a.substr(0,x)));w=y(a.substr(x+1));t&&(q[t]=q[t]?q[t]+(", "+w):w)});return q}function bQ(r){var q=du(r)?r:cs;return function(a){q||(q=bI(r));return a?q[dt(a)]||null:q}}function b0(r,q,t){if(bt(t)){return t(r,q)}ch(t,function(a){r=a(r,q)});return r}function bK(){var r=/^\s*(\[|\{[^\{])/,q=/[\}\]]\s*$/,t=/^\)\]\}',?\n/,w={"Content-Type":"application/json;charset=utf-8"},x=this.defaults={transformResponse:[function(a){ag(a)&&(a=a.replace(t,""),r.test(a)&&q.test(a)&&(a=c8(a)));return a}],transformRequest:[function(B){return du(B)&&"[object File]"!==bF.call(B)?cj(B):B}],headers:{common:{Accept:"application/json, text/plain, */*"},post:i(w),put:i(w),patch:i(w)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},A=this.interceptors=[],z=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(B,D,F,L,O,Q){function S(Y){function Z(dd){var de=cM({},dd,{data:b0(dd.data,dd.headers,cc.transformResponse)});return 200<=dd.status&&300>dd.status?de:O.reject(de)}var cc={transformRequest:x.transformRequest,transformResponse:x.transformResponse},ce=function(dd){function de(d3){var d4;ch(d3,function(a,d5){bt(a)&&(d4=a(),null!=d4?d3[d5]=d4:delete d3[d5])})}var dZ=x.headers,d0=cM({},dd.headers),d2,d1,dZ=cM({},dZ.common,dZ[dt(dd.method)]);de(dZ);de(d0);dd:for(d2 in dZ){dd=dt(d2);for(d1 in d0){if(dt(d1)===dd){continue dd}}d0[d2]=dZ[d2]}return d0}(Y);cM(cc,Y);cc.headers=ce;cc.method=a3(cc.method);(Y=aO(cc.url)?D.cookies()[cc.xsrfCookieName||x.xsrfCookieName]:cs)&&(ce[cc.xsrfHeaderName||x.xsrfHeaderName]=Y);var cd=[function(dd){ce=dd.headers;var de=b0(dd.data,bQ(ce),dd.transformRequest);dO(dd.data)&&ch(ce,function(dZ,d0){"content-type"===dt(d0)&&delete ce[d0]});dO(dd.withCredentials)&&!dO(x.withCredentials)&&(dd.withCredentials=x.withCredentials);return K(dd,de,ce).then(Z,Z)},cs],db=O.when(cc);for(ch(W,function(dd){(dd.request||dd.requestError)&&cd.unshift(dd.request,dd.requestError);(dd.response||dd.responseError)&&cd.push(dd.response,dd.responseError)});cd.length;){Y=cd.shift();var dc=cd.shift(),db=db.then(Y,dc)}db.success=function(dd){db.then(function(a){dd(a.data,a.status,a.headers,cc)});return db};db.error=function(dd){db.then(null,function(a){dd(a.data,a.status,a.headers,cc)});return db};return db}function K(a,Y,cd){function cc(d0,d1,d2){dZ&&(200<=d0&&300>d0?dZ.put(de,[d0,d1,bI(d2)]):dZ.remove(de));db(d1,d0,d2);L.$$phase||L.$apply()}function db(d0,d1,d2){d1=Math.max(d1,0);(200<=d1&&300>d1?dc.resolve:dc.reject)({data:d0,status:d1,headers:bQ(d2),config:a})}function ce(){var d0=E(S.pendingRequests,a);-1!==d0&&S.pendingRequests.splice(d0,1)}var dc=O.defer(),Z=dc.promise,dZ,dd,de=X(a.url,a.params);S.pendingRequests.push(a);Z.then(ce,ce);(a.cache||x.cache)&&(!1!==a.cache&&"GET"==a.method)&&(dZ=du(a.cache)?a.cache:du(x.cache)?x.cache:M);if(dZ){if(dd=dZ.get(de),v(dd)){if(dd.then){return dd.then(ce,ce),dd}bk(dd)?db(dd[1],dd[0],i(dd[2])):db(dd,200,{})}else{dZ.put(de,Z)}}dO(dd)&&B(a.method,de,Y,cc,cd,a.timeout,a.withCredentials,a.responseType);return Z}function X(Y,Z){if(!Z){return Y}var cc=[];ca(Z,function(cd,ce){null===cd||dO(cd)||(bk(cd)||(cd=[cd]),ch(cd,function(db){du(db)&&(db=cj(db));cc.push(dk(ce)+"="+dk(db))}))});return Y+(-1==Y.indexOf("?")?"?":"&")+cc.join("&")}var M=F("$http"),W=[];ch(A,function(Y){W.unshift(ag(Y)?Q.get(Y):Q.invoke(Y))});ch(z,function(Y,Z){var cc=ag(Y)?Q.get(Y):Q.invoke(Y);W.splice(Z,0,{response:function(cd){return cc(O.when(cd))},responseError:function(cd){return cc(O.reject(cd))}})});S.pendingRequests=[];(function(Y){ch(arguments,function(Z){S[Z]=function(a,cc){return S(cM(cc||{},{method:Z,url:a}))}})})("get","delete","head","jsonp");(function(Y){ch(arguments,function(Z){S[Z]=function(a,cc,cd){return S(cM(cd||{},{method:Z,url:a,data:cc}))}})})("post","put");S.defaults=x;return S}]}function bS(a){return 8>=bD&&"patch"===dt(a)?new ActiveXObject("Microsoft.XMLHTTP"):new dP.XMLHttpRequest}function b2(){this.$get=["$browser","$window","$document",function(r,q,t){return cb(r,bS,r.defer,q.angular.callbacks,t[0])}]}function cb(r,q,t,w,x){function A(B,D){var F=x.createElement("script"),K=function(){F.onreadystatechange=F.onload=F.onerror=null;x.body.removeChild(F);D&&D()};F.type="text/javascript";F.src=B;bD&&8>=bD?F.onreadystatechange=function(){/loaded|complete/.test(F.readyState)&&K()}:F.onload=F.onerror=function(){K()};x.body.appendChild(F);return K}var z=-1;return function(B,M,K,L,O,Q,X,a){function cc(){Y=z;F&&F();Z&&Z.abort()}function D(cd,ce,db,dc){S&&t.cancel(S);F=Z=null;ce=0===ce?db?200:404:ce;cd(1223==ce?204:ce,db,dc);r.$$completeOutstandingRequest(di)}var Y;r.$$incOutstandingRequestCount();M=M||r.url();if("jsonp"==dt(B)){var W="_"+(w.counter++).toString(36);w[W]=function(cd){w[W].data=cd};var F=A(M.replace("JSON_CALLBACK","angular.callbacks."+W),function(){w[W].data?D(L,200,w[W].data):D(L,Y||-2);w[W]=T.noop})}else{var Z=q(B);Z.open(B,M,!0);ch(O,function(cd,ce){v(cd)&&Z.setRequestHeader(ce,cd)});Z.onreadystatechange=function(){if(Z&&4==Z.readyState){var cd=null,ce=null;Y!==z&&(cd=Z.getAllResponseHeaders(),ce="response" in Z?Z.response:Z.responseText);D(L,Y||Z.status,ce,cd)}};X&&(Z.withCredentials=!0);a&&(Z.responseType=a);Z.send(K||null)}if(0<Q){var S=t(cc,Q)}else{Q&&Q.then&&Q.then(cc)}}}function cp(){var r="{{",q="}}";this.startSymbol=function(t){return t?(r=t,this):r};this.endSymbol=function(a){return a?(q=a,this):q};this.$get=["$parse","$exceptionHandler","$sce",function(a,t,w){function z(F,K,L){for(var M,O,Q=0,B=[],W=F.length,D=!1,S=[];Q<W;){-1!=(M=F.indexOf(r,Q))&&-1!=(O=F.indexOf(q,M+x))?(Q!=M&&B.push(F.substring(Q,M)),B.push(Q=a(D=F.substring(M+x,O))),Q.exp=D,Q=O+A,D=!0):(Q!=W&&B.push(F.substring(Q)),Q=W)}(W=B.length)||(B.push(""),W=1);if(L&&1<B.length){throw b9("noconcat",F)}if(!K||D){return S.length=W,Q=function(X){try{for(var Y=0,Z=W,cc;Y<Z;Y++){"function"==typeof(cc=B[Y])&&(cc=cc(X),cc=L?w.getTrusted(L,cc):w.valueOf(cc),null===cc||dO(cc)?cc="":"string"!=typeof cc&&(cc=cj(cc))),S[Y]=cc}return S.join("")}catch(cd){X=b9("interr",F,cd.toString()),t(X)}},Q.exp=F,Q.parts=B,Q}}var x=r.length,A=q.length;z.startSymbol=function(){return r};z.endSymbol=function(){return q};return z}]}function cz(){this.$get=["$rootScope","$window","$q",function(r,q,t){function w(z,A,B,K){var D=q.setInterval,F=q.clearInterval,L=t.defer(),M=L.promise,O=0,a=v(K)&&!K;B=v(B)?B:0;M.then(null,null,z);M.$$intervalId=D(function(){L.notify(O++);0<B&&O>=B&&(L.resolve(O),F(M.$$intervalId),delete x[M.$$intervalId]);a||r.$apply()},A);x[M.$$intervalId]=L;return M}var x={};w.cancel=function(z){return z&&z.$$intervalId in x?(x[z.$$intervalId].reject("canceled"),clearInterval(z.$$intervalId),delete x[z.$$intervalId],!0):!1};return w}]}function cJ(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function cn(r){r=r.split("/");for(var q=r.length;q--;){r[q]=cP(r[q])}return r.join("/")}function cx(r,q,t){r=dF(r,t);q.$$protocol=r.protocol;q.$$host=r.hostname;q.$$port=cC(r.port)||cT[r.protocol]||null}function cH(r,q,t){var w="/"!==r.charAt(0);w&&(r="/"+r);r=dF(r,t);q.$$path=decodeURIComponent(w&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname);q.$$search=dy(r.search);q.$$hash=decodeURIComponent(r.hash);q.$$path&&"/"!=q.$$path.charAt(0)&&(q.$$path="/"+q.$$path)}function bW(r,q){if(0===q.indexOf(r)){return q.substr(r.length)}}function dw(r){var q=r.indexOf("#");return -1==q?r:r.substr(0,q)}function aW(a){return a.substr(0,dw(a).lastIndexOf("/")+1)}function cR(r,q){this.$$html5=!0;q=q||"";var t=aW(r);cx(r,this,r);this.$$parse=function(w){var x=bW(t,w);if(!ag(x)){throw a4("ipthprfx",w,t)}cH(x,this,r);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var w=dI(this.$$search),x=this.$$hash?"#"+cP(this.$$hash):"";this.$$url=cn(this.$$path)+(w?"?"+w:"")+x;this.$$absUrl=t+this.$$url.substr(1)};this.$$rewrite=function(a){var w;if((w=bW(r,a))!==cs){return a=w,(w=bW(q,w))!==cs?t+(bW("/",w)||w):r+a}if((w=bW(t,a))!==cs){return t+w}if(t==a+"/"){return t}}}function bd(r,q){var t=aW(r);cx(r,this,r);this.$$parse=function(a){var w=bW(r,a)||bW(t,a),w="#"==w.charAt(0)?bW(q,w):this.$$html5?w:"";if(!ag(w)){throw a4("ihshprfx",a,q)}cH(w,this,r);a=this.$$path;var x=/^\/?.*?:(\/.*)/;0===w.indexOf(r)&&(w=w.replace(r,""));x.exec(w)||(a=(w=x.exec(a))?w[1]:a);this.$$path=a;this.$$compose()};this.$$compose=function(){var a=dI(this.$$search),w=this.$$hash?"#"+cP(this.$$hash):"";this.$$url=cn(this.$$path)+(a?"?"+a:"")+w;this.$$absUrl=r+(this.$$url?q+this.$$url:"")};this.$$rewrite=function(w){if(dw(r)==dw(w)){return w}}}function c0(r,q){this.$$html5=!0;bd.apply(this,arguments);var t=aW(r);this.$$rewrite=function(a){var w;if(r==dw(a)){return a}if(w=bW(t,a)){return r+q+w}if(t===a+"/"){return t}}}function bc(a){return function(){return this[a]}}function c9(r,q){return function(a){if(dO(a)){return this[r]}this[r]=q(a);this.$$compose();return this}}function c2(){var r="",q=!1;this.hashPrefix=function(t){return v(t)?(r=t,this):r};this.html5Mode=function(a){return v(a)?(q=a,this):q};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(a,t,w,z){function x(K){a.$broadcast("$locationChangeSuccess",A.absUrl(),K)}var A,F=t.baseHref(),B=t.url();q?(F=B.substring(0,B.indexOf("/",B.indexOf("//")+2))+(F||"/"),w=w.history?cR:c0):(F=dw(B),w=bd);A=new w(F,"#"+r);A.$$parse(A.$$rewrite(B));z.on("click",function(K){if(!K.ctrlKey&&!K.metaKey&&2!=K.which){for(var L=h(K.target);"a"!==dt(L[0].nodeName);){if(L[0]===z[0]||!(L=L.parent())[0]){return}}var M=L.prop("href");du(M)&&"[object SVGAnimatedString]"===M.toString()&&(M=dF(M.animVal).href);var O=A.$$rewrite(M);M&&(!L.attr("target")&&O&&!K.isDefaultPrevented())&&(K.preventDefault(),O!=t.url()&&(A.$$parse(O),a.$apply(),dP.angular["ff-684208-preventDefault"]=!0))}});A.absUrl()!=B&&t.url(A.absUrl(),!0);t.onUrlChange(function(K){A.absUrl()!=K&&(a.$evalAsync(function(){var L=A.absUrl();A.$$parse(K);a.$broadcast("$locationChangeStart",K,L).defaultPrevented?(A.$$parse(L),t.url(L)):x(L)}),a.$$phase||a.$digest())});var D=0;a.$watch(function(){var K=t.url(),L=A.$$replace;D&&K==A.absUrl()||(D++,a.$evalAsync(function(){a.$broadcast("$locationChangeStart",A.absUrl(),K).defaultPrevented?A.$$parse(K):(t.url(A.absUrl(),L),x(K))}));A.$$replace=!1;return D});return A}]}function df(){var r=!0,q=this;this.debugEnabled=function(t){return v(t)?(r=t,this):r};this.$get=["$window",function(a){function t(x){x instanceof Error&&(x.stack?x=x.message&&-1===x.stack.indexOf(x.message)?"Error: "+x.message+"\n"+x.stack:x.stack:x.sourceURL&&(x=x.message+"\n"+x.sourceURL+":"+x.line));return x}function w(x){var z=a.console||{},A=z[x]||z.log||di;x=!1;try{x=!!A.apply}catch(B){}return x?function(){var D=[];ch(arguments,function(F){D.push(t(F))});return A.apply(z,D)}:function(D,F){A(D,null==F?"":F)}}return{log:w("log"),info:w("info"),warn:w("warn"),error:w("error"),debug:function(){var x=w("debug");return function(){r&&x.apply(q,arguments)}}()}}]}function aq(r,q){if("constructor"===r){throw dQ("isecfld",q)}return r}function dG(r,q){if(r){if(r.constructor===r){throw dQ("isecfn",q)}if(r.document&&r.location&&r.alert&&r.setInterval){throw dQ("isecwindow",q)}if(r.children&&(r.nodeName||r.on&&r.find)){throw dQ("isecdom",q)}}return r}function bn(r,q,t,w,x){x=x||{};q=q.split(".");for(var A,z=0;1<q.length;z++){A=aq(q.shift(),w);var B=r[A];B||(B={},r[A]=B);r=B;r.then&&x.unwrapPromises&&(ct(w),"$$v" in r||function(D){D.then(function(a){D.$$v=a})}(r),r.$$v===cs&&(r.$$v={}),r=r.$$v)}A=aq(q.shift(),w);return r[A]=t}function dn(r,q,t,w,x,A,z){aq(r,A);aq(q,A);aq(t,A);aq(w,A);aq(x,A);return z.unwrapPromises?function(a,F){var B=F&&F.hasOwnProperty(r)?F:a,D;if(null==B){return B}(B=B[r])&&B.then&&(ct(A),"$$v" in B||(D=B,D.$$v=cs,D.then(function(K){D.$$v=K})),B=B.$$v);if(!q){return B}if(null==B){return cs}(B=B[q])&&B.then&&(ct(A),"$$v" in B||(D=B,D.$$v=cs,D.then(function(K){D.$$v=K})),B=B.$$v);if(!t){return B}if(null==B){return cs}(B=B[t])&&B.then&&(ct(A),"$$v" in B||(D=B,D.$$v=cs,D.then(function(K){D.$$v=K})),B=B.$$v);if(!w){return B}if(null==B){return cs}(B=B[w])&&B.then&&(ct(A),"$$v" in B||(D=B,D.$$v=cs,D.then(function(K){D.$$v=K})),B=B.$$v);if(!x){return B}if(null==B){return cs}(B=B[x])&&B.then&&(ct(A),"$$v" in B||(D=B,D.$$v=cs,D.then(function(K){D.$$v=K})),B=B.$$v);return B}:function(B,a){var D=a&&a.hasOwnProperty(r)?a:B;if(null==D){return D}D=D[r];if(!q){return D}if(null==D){return cs}D=D[q];if(!t){return D}if(null==D){return cs}D=D[t];if(!w){return D}if(null==D){return cs}D=D[w];return x?null==D?cs:D=D[x]:D}}function dq(r,q){aq(r,q);return function(t,w){return null==t?cs:(w&&w.hasOwnProperty(r)?w:t)[r]}}function dB(r,q,t){aq(r,t);aq(q,t);return function(a,w){if(null==a){return cs}a=(w&&w.hasOwnProperty(r)?w:a)[r];return null==a?cs:a[q]}}function dz(r,q,t){if(bo.hasOwnProperty(r)){return bo[r]}var w=r.split("."),x=w.length,A;if(q.unwrapPromises||1!==x){if(q.unwrapPromises||2!==x){if(q.csp){A=6>x?dn(w[0],w[1],w[2],w[3],w[4],t,q):function(a,F){var D=0,K;do{K=dn(w[D++],w[D++],w[D++],w[D++],w[D++],t,q)(a,F),F=cs,a=K}while(D<x);return K}}else{var z="var p;\n";ch(w,function(a,D){aq(a,t);z+="if(s == null) return undefined;\ns="+(D?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'+(q.unwrapPromises?'if (s && s.then) {\n pw("'+t.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var z=z+"return s;",B=new Function("s","k","pw",z);B.toString=b(z);A=q.unwrapPromises?function(D,F){return B(D,F,ct)}:B}}else{A=dB(w[0],w[1],t)}}else{A=dq(w[0],t)}"hasOwnProperty"!==r&&(bo[r]=A);return A}function dL(){var r={},q={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(a){return v(a)?(q.unwrapPromises=!!a,this):q.unwrapPromises};this.logPromiseWarnings=function(a){return v(a)?(q.logPromiseWarnings=a,this):q.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(a,t,w){q.csp=t.csp;ct=function(x){q.logPromiseWarnings&&!dJ.hasOwnProperty(x)&&(dJ[x]=!0,w.warn("[$parse] Promise found in the expression `"+x+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(x){var z;switch(typeof x){case"string":if(r.hasOwnProperty(x)){return r[x]}z=new bx(q);z=(new dR(z,a,q)).parse(x,!1);"hasOwnProperty"!==x&&(r[x]=z);return z;case"function":return x;default:return di}}}]}function dW(){this.$get=["$rootScope","$exceptionHandler",function(r,q){return p(function(t){r.$evalAsync(t)},q)}]}function p(r,q){function t(B){return B}function w(B){return z(B)}var x=function(){var a=[],D,B;return B={resolve:function(F){if(a){var K=a;a=cs;D=A(F);K.length&&r(function(){for(var L,M=0,O=K.length;M<O;M++){L=K[M],D.then(L[0],L[1],L[2])}})}},reject:function(F){B.resolve(z(F))},notify:function(F){if(a){var K=a;a.length&&r(function(){for(var L,M=0,O=K.length;M<O;M++){L=K[M],L[2](F)}})}},promise:{then:function(F,O,M){var Q=x(),K=function(W){try{Q.resolve((bt(F)?F:t)(W))}catch(X){Q.reject(X),q(X)}},S=function(W){try{Q.resolve((bt(O)?O:w)(W))}catch(X){Q.reject(X),q(X)}},L=function(W){try{Q.notify((bt(M)?M:t)(W))}catch(X){q(X)}};a?a.push([K,S,L]):D.then(K,S,L);return Q.promise},"catch":function(F){return this.then(null,F)},"finally":function(F){function K(M,O){var Q=x();O?Q.resolve(M):Q.reject(M);return Q.promise}function L(M,Q){var O=null;try{O=(F||t)()}catch(S){return K(S,!1)}return O&&bt(O.then)?O.then(function(){return K(M,Q)},function(W){return K(W,!1)}):K(M,Q)}return this.then(function(M){return L(M,!0)},function(M){return L(M,!1)})}}}},A=function(B){return B&&bt(B.then)?B:{then:function(a){var D=x();r(function(){D.resolve(a(B))});return D.promise}}},z=function(a){return{then:function(D,B){var F=x();r(function(){try{F.resolve((bt(B)?B:w)(a))}catch(K){F.reject(K),q(K)}});return F.promise}}};return{defer:x,reject:z,when:function(B,K,D,F){var L=x(),M,O=function(S){try{return(bt(K)?K:t)(S)}catch(W){return q(W),z(W)}},a=function(S){try{return(bt(D)?D:w)(S)}catch(W){return q(W),z(W)}},Q=function(S){try{return(bt(F)?F:t)(S)}catch(W){q(W)}};r(function(){A(B).then(function(S){M||(M=!0,L.resolve(A(S).then(O,a,Q)))},function(S){M||(M=!0,L.resolve(a(S)))},function(S){M||L.notify(Q(S))})});return L.promise},all:function(B){var D=x(),F=0,K=bk(B)?[]:{};ch(B,function(L,M){F++;A(L).then(function(O){K.hasOwnProperty(M)||(K[M]=O,--F||D.resolve(K))},function(O){K.hasOwnProperty(M)||D.reject(O)})});0===F&&D.resolve(K);return D.promise}}}function N(){var r=10,q=aB("$rootScope"),t=null;this.digestTtl=function(w){arguments.length&&(r=w);return r};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(a,w,z,x){function A(){this.$id=c();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function F(M){if(L.$$phase){throw q("inprog",L.$$phase)}L.$$phase=M}function B(M,O){var Q=z(M);ck(Q,O);return Q}function D(M,O,Q){do{M.$$listenerCount[Q]-=O,0===M.$$listenerCount[Q]&&delete M.$$listenerCount[Q]}while(M=M.$parent)}function K(){}A.prototype={constructor:A,$new:function(M){M?(M=new A,M.$root=this.$root,M.$$asyncQueue=this.$$asyncQueue,M.$$postDigestQueue=this.$$postDigestQueue):(M=function(){},M.prototype=this,M=new M,M.$id=c());M["this"]=M;M.$$listeners={};M.$$listenerCount={};M.$parent=this;M.$$watchers=M.$$nextSibling=M.$$childHead=M.$$childTail=null;M.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=M:this.$$childHead=this.$$childTail=M;return M},$watch:function(M,O,Q){var S=B(M,"watch"),X=this.$$watchers,W={fn:O,last:K,get:S,exp:M,eq:!!Q};t=null;if(!bt(O)){var Y=B(O||di,"listener");W.fn=function(cc,cd,ce){Y(ce)}}if("string"==typeof M&&S.constant){var Z=W.fn;W.fn=function(cc,cd,ce){Z.call(this,cc,cd,ce);bN(X,W)}}X||(X=this.$$watchers=[]);X.unshift(W);return function(){bN(X,W);t=null}},$watchCollection:function(M,O){var Q=this,S,W,X=0,Y=z(M),cd=[],Z={},cc=0;return this.$watch(function(){W=Y(Q);var ce,db;if(du(W)){if(cv(W)){for(S!==cd&&(S=cd,cc=S.length=0,X++),ce=W.length,cc!==ce&&(X++,S.length=cc=ce),db=0;db<ce;db++){S[db]!==W[db]&&(X++,S[db]=W[db])}}else{S!==Z&&(S=Z={},cc=0,X++);ce=0;for(db in W){W.hasOwnProperty(db)&&(ce++,S.hasOwnProperty(db)?S[db]!==W[db]&&(X++,S[db]=W[db]):(cc++,S[db]=W[db],X++))}if(cc>ce){for(db in X++,S){S.hasOwnProperty(db)&&!W.hasOwnProperty(db)&&(cc--,delete S[db])}}}}else{S!==W&&(S=W,X++)}return X},function(){O(W,S,Q)})},$digest:function(){var Q,S,W,X,Z=this.$$asyncQueue,cc=this.$$postDigestQueue,db,de,dc=r,cd,dZ=[],Y,M,ce;F("$digest");t=null;do{de=!1;for(cd=this;Z.length;){try{ce=Z.shift(),ce.scope.$eval(ce.expression)}catch(O){L.$$phase=null,w(O)}t=null}q:do{if(X=cd.$$watchers){for(db=X.length;db--;){try{if(Q=X[db]){if((S=Q.get(cd))!==(W=Q.last)&&!(Q.eq?cW(S,W):"number"==typeof S&&"number"==typeof W&&isNaN(S)&&isNaN(W))){de=!0,t=Q,Q.last=Q.eq?i(S):S,Q.fn(S,W===K?S:W,cd),5>dc&&(Y=4-dc,dZ[Y]||(dZ[Y]=[]),M=bt(Q.exp)?"fn: "+(Q.exp.name||Q.exp.toString()):Q.exp,M+="; newVal: "+cj(S)+"; oldVal: "+cj(W),dZ[Y].push(M))}else{if(Q===t){de=!1;break q}}}}catch(dd){L.$$phase=null,w(dd)}}}if(!(X=cd.$$childHead||cd!==this&&cd.$$nextSibling)){for(;cd!==this&&!(X=cd.$$nextSibling);){cd=cd.$parent}}}while(cd=X);if((de||Z.length)&&!dc--){throw L.$$phase=null,q("infdig",r,cj(dZ))}}while(de||Z.length);for(L.$$phase=null;cc.length;){try{cc.shift()()}catch(d0){w(d0)}}},$destroy:function(){if(!this.$$destroyed){var M=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==L&&(ch(this.$$listenerCount,U(null,D,this)),M.$$childHead==this&&(M.$$childHead=this.$$nextSibling),M.$$childTail==this&&(M.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null)}},$eval:function(M,O){return z(M)(this,O)},$evalAsync:function(M){L.$$phase||L.$$asyncQueue.length||x.defer(function(){L.$$asyncQueue.length&&L.$digest()});this.$$asyncQueue.push({scope:this,expression:M})},$$postDigest:function(M){this.$$postDigestQueue.push(M)},$apply:function(M){try{return F("$apply"),this.$eval(M)}catch(O){w(O)}finally{L.$$phase=null;try{L.$digest()}catch(Q){throw w(Q),Q}}},$on:function(M,O){var Q=this.$$listeners[M];Q||(this.$$listeners[M]=Q=[]);Q.push(O);var S=this;do{S.$$listenerCount[M]||(S.$$listenerCount[M]=0),S.$$listenerCount[M]++}while(S=S.$parent);var W=this;return function(){Q[E(Q,O)]=null;D(W,1,M)}},$emit:function(M,O){var Q=[],S,W=this,X=!1,Y={name:M,targetScope:W,stopPropagation:function(){X=!0},preventDefault:function(){Y.defaultPrevented=!0},defaultPrevented:!1},cd=[Y].concat(c5.call(arguments,1)),Z,cc;do{S=W.$$listeners[M]||Q;Y.currentScope=W;Z=0;for(cc=S.length;Z<cc;Z++){if(S[Z]){try{S[Z].apply(null,cd)}catch(ce){w(ce)}}else{S.splice(Z,1),Z--,cc--}}if(X){break}W=W.$parent}while(W);return Y},$broadcast:function(M,O){for(var Q=this,S=this,W={name:M,targetScope:this,preventDefault:function(){W.defaultPrevented=!0},defaultPrevented:!1},X=[W].concat(c5.call(arguments,1)),Y,Z;Q=S;){W.currentScope=Q;S=Q.$$listeners[M]||[];Y=0;for(Z=S.length;Y<Z;Y++){if(S[Y]){try{S[Y].apply(null,X)}catch(cc){w(cc)}}else{S.splice(Y,1),Y--,Z--}}if(!(S=Q.$$listenerCount[M]&&Q.$$childHead||Q!==this&&Q.$$nextSibling)){for(;Q!==this&&!(S=Q.$$nextSibling);){Q=Q.$parent}}}return W}};var L=new A;return L}]}function ad(){var r=/^\s*(https?|ftp|mailto|tel|file):/,q=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(t){return v(t)?(r=t,this):r};this.imgSrcSanitizationWhitelist=function(a){return v(a)?(q=a,this):q};this.$get=function(){return function(a,t){var w=t?q:r,x;if(!bD||8<=bD){if(x=dF(a).href,""!==x&&!x.match(w)){return"unsafe:"+x}}return a}}}function an(a){if("self"===a){return a}if(ag(a)){if(-1<a.indexOf("***")){throw cD("iwcard",a)}a=a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+a+"$")}if(k(a)){return RegExp("^"+a.source+"$")}throw cD("imatcher")}function dU(r){var q=[];v(r)&&ch(r,function(a){q.push(an(a))});return q}function ay(){this.SCE_CONTEXTS=aC;var r=["self"],q=[];this.resourceUrlWhitelist=function(t){arguments.length&&(r=dU(t));return r};this.resourceUrlBlacklist=function(a){arguments.length&&(q=dU(a));return q};this.$get=["$injector",function(a){function t(A){var B=function(D){this.$$unwrapTrustedValue=function(){return D}};A&&(B.prototype=new A);B.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};B.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return B}var w=function(A){throw cD("unsafe")};a.has("$sanitize")&&(w=a.get("$sanitize"));var z=t(),x={};x[aC.HTML]=t(z);x[aC.CSS]=t(z);x[aC.URL]=t(z);x[aC.JS]=t(z);x[aC.RESOURCE_URL]=t(x[aC.URL]);return{trustAs:function(A,B){var D=x.hasOwnProperty(A)?x[A]:null;if(!D){throw cD("icontext",A,B)}if(null===B||B===cs||""===B){return B}if("string"!==typeof B){throw cD("itype",A)}return new D(B)},getTrusted:function(A,B){if(null===B||B===cs||""===B){return B}var D=x.hasOwnProperty(A)?x[A]:null;if(D&&B instanceof D){return B.$$unwrapTrustedValue()}if(A===aC.RESOURCE_URL){var D=dF(B.toString()),F,K,L=!1;F=0;for(K=r.length;F<K;F++){if("self"===r[F]?aO(D):r[F].exec(D.href)){L=!0;break}}if(L){for(F=0,K=q.length;F<K;F++){if("self"===q[F]?aO(D):q[F].exec(D.href)){L=!1;break}}}if(L){return B}throw cD("insecurl",B.toString())}if(A===aC.HTML){return w(B)}throw cD("unsafe")},valueOf:function(A){return A instanceof z?A.$$unwrapTrustedValue():A}}}]}function aI(){var a=!0;this.enabled=function(q){arguments.length&&(a=!!q);return a};this.$get=["$parse","$sniffer","$sceDelegate",function(q,r,t){if(a&&r.msie&&8>r.msieDocumentMode){throw cD("iequirks")}var w=i(aC);w.isEnabled=function(){return a};w.trustAs=t.trustAs;w.getTrusted=t.getTrusted;w.valueOf=t.valueOf;a||(w.trustAs=w.getTrusted=function(B,D){return D},w.valueOf=C);w.parseAs=function(B,D){var F=q(D);return F.literal&&F.constant?F:function(K,L){return w.getTrusted(B,F(K,L))}};var z=w.parseAs,x=w.getTrusted,A=w.trustAs;ch(aC,function(B,D){var F=dt(D);w[cu("parse_as_"+F)]=function(K){return z(B,K)};w[cu("get_trusted_"+F)]=function(K){return x(B,K)};w[cu("trust_as_"+F)]=function(K){return A(B,K)}});return w}]}function aS(){this.$get=["$window","$document",function(r,q){var t={},w=cC((/android (\d+)/.exec(dt((r.navigator||{}).userAgent))||[])[1]),x=/Boxee/i.test((r.navigator||{}).userAgent),A=q[0]||{},z=A.documentMode,B,K=/^(Moz|webkit|O|ms)(?=[A-Z])/,D=A.body&&A.body.style,F=!1,L=!1;if(D){for(var M in D){if(F=K.exec(M)){B=F[0];B=B.substr(0,1).toUpperCase()+B.substr(1);break}}B||(B="WebkitOpacity" in D&&"webkit");F=!!("transition" in D||B+"Transition" in D);L=!!("animation" in D||B+"Animation" in D);!w||F&&L||(F=ag(A.body.style.webkitTransition),L=ag(A.body.style.webkitAnimation))}return{history:!(!r.history||!r.history.pushState||4>w||x),hashchange:"onhashchange" in r&&(!z||7<z),hasEvent:function(O){if("input"==O&&9==bD){return !1}if(dO(t[O])){var Q=A.createElement("div");t[O]="on"+O in Q}return t[O]},csp:cZ(),vendorPrefix:B,transitions:F,animations:L,android:w,msie:bD,msieDocumentMode:z}}]}function a0(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(r,q,t,w){function x(a,A,F){var B=t.defer(),D=B.promise,K=v(F)&&!F;A=q.defer(function(){try{B.resolve(a())}catch(L){B.reject(L),w(L)}finally{delete z[D.$$timeoutId]}K||r.$apply()},A);D.$$timeoutId=A;z[A]=B;return D}var z={};x.cancel=function(a){return a&&a.$$timeoutId in z?(z[a.$$timeoutId].reject("canceled"),delete z[a.$$timeoutId],q.defer.cancel(a.$$timeoutId)):!1};return x}]}function dF(r,q){var t=r;bD&&(dE.setAttribute("href",t),t=dE.href);dE.setAttribute("href",t);return{href:dE.href,protocol:dE.protocol?dE.protocol.replace(/:$/,""):"",host:dE.host,search:dE.search?dE.search.replace(/^\?/,""):"",hash:dE.hash?dE.hash.replace(/^#/,""):"",hostname:dE.hostname,port:dE.port,pathname:"/"===dE.pathname.charAt(0)?dE.pathname:"/"+dE.pathname}}function aO(a){a=ag(a)?dF(a):a;return a.protocol===n.protocol&&a.host===n.host}function a7(){this.$get=b(dP)}function I(r){function q(a,w){if(du(a)){var x={};ch(a,function(z,A){x[A]=q(A,z)});return x}return r.factory(a+t,w)}var t="Filter";this.register=q;this.$get=["$injector",function(w){return function(a){return w.get(a+t)}}];q("currency",ab);q("date",al);q("filter",bh);q("json",br);q("limitTo",bB);q("lowercase",bL);q("number",aw);q("orderBy",aG);q("uppercase",bT)}function bh(){return function(r,q,t){if(!bk(r)){return r}var w=typeof t,x=[];x.check=function(D){for(var F=0;F<x.length;F++){if(!x[F](D)){return !1}}return !0};"function"!==w&&(t="boolean"===w&&t?function(D,F){return T.equals(D,F)}:function(D,F){F=(""+F).toLowerCase();return -1<(""+D).toLowerCase().indexOf(F)});var A=function(D,F){if("string"==typeof F&&"!"===F.charAt(0)){return !A(D,F.substr(1))}switch(typeof D){case"boolean":case"number":case"string":return t(D,F);case"object":switch(typeof F){case"object":return t(D,F);default:for(var K in D){if("$"!==K.charAt(0)&&A(D[K],F)){return !0}}}return !1;case"array":for(K=0;K<D.length;K++){if(A(D[K],F)){return !0}}return !1;default:return !1}};switch(typeof q){case"boolean":case"number":case"string":q={$:q};case"object":for(var z in q){(function(a){"undefined"!=typeof q[a]&&x.push(function(D){return A("$"==a?D:c7(D,a),q[a])})})(z)}break;case"function":x.push(q);break;default:return r}w=[];for(z=0;z<r.length;z++){var B=r[z];x.check(B)&&w.push(B)}return w}}function ab(r){var q=r.NUMBER_FORMATS;return function(a,t){dO(t)&&(t=q.CURRENCY_SYM);return aQ(a,q.PATTERNS[1],q.GROUP_SEP,q.DECIMAL_SEP,2).replace(/\u00A4/g,t)}}function aw(r){var q=r.NUMBER_FORMATS;return function(a,t){return aQ(a,q.PATTERNS[0],q.GROUP_SEP,q.DECIMAL_SEP,t)}}function aQ(r,q,t,w,x){if(isNaN(r)||!isFinite(r)){return""}var A=0>r;r=Math.abs(r);var z=r+"",B="",K=[],D=!1;if(-1!==z.indexOf("e")){var F=z.match(/([\d\.]+)e(-?)(\d+)/);F&&"-"==F[2]&&F[3]>x+1?z="0":(B=z,D=!0)}if(D){0<x&&(-1<r&&1>r)&&(B=r.toFixed(x))}else{z=(z.split(aY)[1]||"").length;dO(x)&&(x=Math.min(Math.max(q.minFrac,z),q.maxFrac));z=Math.pow(10,x);r=Math.round(r*z)/z;r=(""+r).split(aY);z=r[0];r=r[1]||"";var F=0,L=q.lgSize,M=q.gSize;if(z.length>=L+M){for(F=z.length-L,D=0;D<F;D++){0===(F-D)%M&&0!==D&&(B+=t),B+=z.charAt(D)}}for(D=F;D<z.length;D++){0===(z.length-D)%L&&0!==D&&(B+=t),B+=z.charAt(D)}for(;r.length<x;){r+="0"}x&&"0"!==x&&(B+=w+r.substr(0,x))}K.push(A?q.negPre:q.posPre);K.push(B);K.push(A?q.negSuf:q.posSuf);return K.join("")}function bH(r,q,t){var w="";0>r&&(w="-",r=-r);for(r=""+r;r.length<q;){r="0"+r}t&&(r=r.substr(r.length-q));return w+r}function dj(r,q,t,w){t=t||0;return function(a){a=a["get"+r]();if(0<t||a>-t){a+=t}0===a&&-12==t&&(a=12);return bH(a,q,w)}}function bw(r,q){return function(a,t){var w=a["get"+r](),x=a3(q?"SHORT"+r:r);return t[x][w]}}function al(r){function q(w){var x;if(x=w.match(t)){w=new Date(0);var A=0,z=0,B=x[8]?w.setUTCFullYear:w.setFullYear,D=x[8]?w.setUTCHours:w.setHours;x[9]&&(A=cC(x[9]+x[10]),z=cC(x[9]+x[11]));B.call(w,cC(x[1]),cC(x[2])-1,cC(x[3]));A=cC(x[4]||0)-A;z=cC(x[5]||0)-z;B=cC(x[6]||0);x=Math.round(1000*parseFloat("0."+(x[7]||0)));D.call(w,A,z,B,x)}return w}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(a,w){var z="",x=[],A,B;w=w||"mediumDate";w=r.DATETIME_FORMATS[w]||w;ag(a)&&(a=b3.test(a)?cC(a):q(a));cF(a)&&(a=new Date(a));if(!bv(a)){return a}for(;w;){(B=cf.exec(w))?(x=x.concat(c5.call(B,1)),w=x.pop()):(x.push(w),w=null)}ch(x,function(D){A=cq[D];z+=A?A(a,r.DATETIME_FORMATS):D.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return z}}function br(){return function(a){return cj(a,!0)}}function bB(){return function(r,q){if(!bk(r)&&!ag(r)){return r}q=cC(q);if(ag(r)){return q?0<=q?r.slice(0,q):r.slice(q,r.length):""}var t=[],w,x;q>r.length?q=r.length:q<-r.length&&(q=-r.length);0<q?(w=0,x=q):(w=r.length+q,x=r.length);for(;w<x;w++){t.push(r[w])}return t}}function aG(a){return function(q,r,t){function w(A,B){return b6(B)?function(D,F){return A(F,D)}:A}if(!bk(q)||!r){return q}r=bk(r)?r:[r];r=cy(r,function(A){var B=!1,D=A||C;if(ag(A)){if("+"==A.charAt(0)||"-"==A.charAt(0)){B="-"==A.charAt(0),A=A.substring(1)}D=a(A)}return w(function(F,K){var L;L=D(F);var M=D(K),Q=typeof L,O=typeof M;Q==O?("string"==Q&&(L=L.toLowerCase(),M=M.toLowerCase()),L=L===M?0:L<M?-1:1):L=Q<O?-1:1;return L},B)});for(var z=[],x=0;x<q.length;x++){z.push(q[x])}return z.sort(w(function(A,B){for(var D=0;D<r.length;D++){var F=r[D](A,B);if(0!==F){return F}}return 0},t))}}function cN(a){bt(a)&&(a={link:a});a.restrict=a.restrict||"AC";return b(a)}function a5(r,q){function t(D,F){F=F?"-"+ai(F,"-"):"";r.removeClass((D?bG:bO)+F).addClass((D?bO:bG)+F)}var w=this,x=r.parent().controller("form")||bY,A=0,z=w.$error={},B=[];w.$name=q.name||q.ngForm;w.$dirty=!1;w.$pristine=!0;w.$valid=!0;w.$invalid=!1;x.$addControl(w);r.addClass(bb);t(!0);w.$addControl=function(D){dv(D.$name,"input");B.push(D);D.$name&&(w[D.$name]=D)};w.$removeControl=function(D){D.$name&&w[D.$name]===D&&delete w[D.$name];ch(z,function(a,F){w.$setValidity(F,!0,D)});bN(B,D)};w.$setValidity=function(D,F,K){var L=z[D];if(F){L&&(bN(L,K),L.length||(A--,A||(t(F),w.$valid=!0,w.$invalid=!1),z[D]=!1,t(!0,D),x.$setValidity(D,!0,w)))}else{A||t(F);if(L){if(-1!=E(L,K)){return}}else{z[D]=L=[],A++,t(!1,D),x.$setValidity(D,!1,w)}L.push(K);w.$valid=!1;w.$invalid=!0}};w.$setDirty=function(){r.removeClass(bb).addClass(b7);w.$dirty=!0;w.$pristine=!1;x.$setDirty()};w.$setPristine=function(){r.removeClass(b7).addClass(bb);w.$dirty=!1;w.$pristine=!0;ch(B,function(D){D.$setPristine()})}}function b5(r,q,t,w){r.$setValidity(q,t);return t?w:cs}function cl(r,q,t,w,x,A){if(!x.android){var z=!1;q.on("compositionstart",function(O){z=!0});q.on("compositionend",function(){z=!1})}var B=function(){if(!z){var a=q.val();b6(t.ngTrim||"T")&&(a=y(a));w.$viewValue!==a&&(r.$$phase?w.$setViewValue(a):r.$apply(function(){w.$setViewValue(a)}))}};if(x.hasEvent("input")){q.on("input",B)}else{var K,D=function(){K||(K=A.defer(function(){B();K=null}))};q.on("keydown",function(O){O=O.keyCode;91===O||(15<O&&19>O||37<=O&&40>=O)||D()});if(x.hasEvent("paste")){q.on("paste cut",D)}}q.on("change",B);w.$render=function(){q.val(w.$isEmpty(w.$viewValue)?"":w.$viewValue)};var F=t.ngPattern;F&&((x=F.match(/^\/(.*)\/([gim]*)$/))?(F=RegExp(x[1],x[2]),x=function(O){return b5(w,"pattern",w.$isEmpty(O)||F.test(O),O)}):x=function(a){var O=r.$eval(F);if(!O||!O.test){throw aB("ngPattern")("noregexp",F,O,aL(q))}return b5(w,"pattern",w.$isEmpty(a)||O.test(a),a)},w.$formatters.push(x),w.$parsers.push(x));if(t.ngMinlength){var L=cC(t.ngMinlength);x=function(O){return b5(w,"minlength",w.$isEmpty(O)||O.length>=L,O)};w.$parsers.push(x);w.$formatters.push(x)}if(t.ngMaxlength){var M=cC(t.ngMaxlength);x=function(O){return b5(w,"maxlength",w.$isEmpty(O)||O.length<=M,O)};w.$parsers.push(x);w.$formatters.push(x)}}function bP(r,q){r="ngClass"+r;return function(){return{restrict:"AC",link:function(a,t,w){function z(B){if(!0===q||a.$index%2===q){var D=x(B||"");A?cW(B,A)||w.$updateClass(D,x(A)):w.$addClass(D)}A=i(B)}function x(B){if(bk(B)){return B.join(" ")}if(du(B)){var D=[];ch(B,function(F,K){F&&D.push(K)});return D.join(" ")}return B}var A;a.$watch(w[r],z,!0);w.$observe("class",function(B){z(a.$eval(w[r]))});"ngClass"!==r&&a.$watch("$index",function(B,D){var F=B&1;if(F!==D&1){var K=x(a.$eval(w[r]));F===q?w.$addClass(K):w.$removeClass(K)}})}}}}var dt=function(a){return ag(a)?a.toLowerCase():a},a3=function(a){return ag(a)?a.toUpperCase():a},bD,h,ah,c5=[].slice,cA=[].push,bF=Object.prototype.toString,bX=aB("ng"),T=dP.angular||(dP.angular={}),c6,aV,bl=["0","0","0"];bD=cC((/msie (\d+)/.exec(dt(navigator.userAgent))||[])[1]);isNaN(bD)&&(bD=cC((/trident\/.*; rv:(\d+)/.exec(dt(navigator.userAgent))||[])[1]));di.$inject=[];C.$inject=[];var y=function(){return String.prototype.trim?function(a){return ag(a)?a.trim():a}:function(a){return ag(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();aV=9>bD?function(a){a=a.nodeName?a:a[0];return a.scopeName&&"HTML"!=a.scopeName?a3(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var c1=/[A-Z]/g,cK={full:"1.2.10",major:1,minor:2,dot:10,codeName:"augmented-serendipity"},cE=bV.cache={},at=bV.expando="ng-"+(new Date).getTime(),dK=1,bf=dP.document.addEventListener?function(r,q,t){r.addEventListener(q,t,!1)}:function(r,q,t){r.attachEvent("on"+q,t)},G=dP.document.removeEventListener?function(r,q,t){r.removeEventListener(q,t,!1)}:function(r,q,t){r.detachEvent("on"+q,t)},dp=/([\:\-\_]+(.))/g,dA=/^moz([A-Z])/,dH=aB("jqLite"),aM=bV.prototype={ready:function(r){function q(){t||(t=!0,r())}var t=!1;"complete"===ci.readyState?setTimeout(q):(this.on("DOMContentLoaded",q),bV(dP).on("load",q))},toString:function(){var a=[];ch(this,function(q){a.push(""+q)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?h(this[a]):h(this[this.length+a])},length:0,push:cA,sort:[].sort,splice:[].splice},aN={};ch("multiple selected checked disabled readOnly required open".split(" "),function(a){aN[dt(a)]=a});var aP={};ch("input select option textarea button form details".split(" "),function(a){aP[a3(a)]=!0});ch({data:aa,inheritedData:aE,scope:function(a){return h(a).data("$scope")||aE(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return h(a).data("$isolateScope")||h(a).data("$isolateScopeNoTemplate")},controller:ak,injector:function(a){return aE(a,"$injector")},removeAttr:function(r,q){r.removeAttribute(q)},hasClass:V,css:function(r,q,t){q=cu(q);if(v(t)){r.style[q]=t}else{var w;8>=bD&&(w=r.currentStyle&&r.currentStyle[q],""===w&&(w="auto"));w=w||r.style[q];8>=bD&&(w=""===w?cs:w);return w}},attr:function(r,q,t){var w=dt(q);if(aN[w]){if(v(t)){t?(r[q]=!0,r.setAttribute(q,w)):(r[q]=!1,r.removeAttribute(w))}else{return r[q]||(r.attributes.getNamedItem(q)||di).specified?w:cs}}else{if(v(t)){r.setAttribute(q,t)}else{if(r.getAttribute){return r=r.getAttribute(q,2),null===r?cs:r}}}},prop:function(r,q,t){if(v(t)){r[q]=t}else{return r[q]}},text:function(){function r(a,t){var w=q[a.nodeType];if(dO(t)){return w?a[w]:""}a[w]=t}var q=[];9>bD?(q[1]="innerText",q[3]="nodeValue"):q[1]=q[3]="textContent";r.$dv="";return r}(),val:function(r,q){if(dO(q)){if("SELECT"===aV(r)&&r.multiple){var t=[];ch(r.options,function(w){w.selected&&t.push(w.value||w.text)});return 0===t.length?null:t}return r.value}r.value=q},html:function(r,q){if(dO(q)){return r.innerHTML}for(var t=0,w=r.childNodes;t<w.length;t++){ar(w[t])}r.innerHTML=q},empty:av},function(r,q){bV.prototype[q]=function(t,w){var x,A;if(r!==av&&(2==r.length&&r!==V&&r!==ak?t:w)===cs){if(du(t)){for(x=0;x<this.length;x++){if(r===aa){r(this[x],t)}else{for(A in t){r(this[x],A,t[A])}}}return this}x=r.$dv;A=x===cs?Math.min(this.length,1):this.length;for(var z=0;z<A;z++){var B=r(this[z],t,w);x=x?x+B:B}return x}for(x=0;x<this.length;x++){r(this[x],t,w)}return this}});ch({removeData:m,dealoc:ar,on:function g(a,q,r,w){if(v(w)){throw dH("onargs")}var t=bu(a,"events"),x=bu(a,"handle");t||bu(a,"events",t={});x||bu(a,"handle",x=dV(a,t));ch(q.split(" "),function(z){var A=t[z];if(!A){if("mouseenter"==z||"mouseleave"==z){var B=ci.body.contains||ci.body.compareDocumentPosition?function(D,F){var K=9===D.nodeType?D.documentElement:D,L=F&&F.parentNode;return D===L||!!(L&&1===L.nodeType&&(K.contains?K.contains(L):D.compareDocumentPosition&&D.compareDocumentPosition(L)&16))}:function(D,F){if(F){for(;F=F.parentNode;){if(F===D){return !0}}}return !1};t[z]=[];g(a,{mouseleave:"mouseout",mouseenter:"mouseover"}[z],function(D){var F=D.relatedTarget;F&&(F===this||B(this,F))||x(D,z)})}else{bf(a,z,x),t[z]=[]}A=t[z]}A.push(r)})},off:H,one:function(q,r,t){q=h(q);q.on(r,function w(){q.off(r,t);q.off(r,w)});q.on(r,t)},replaceWith:function(q,r){var t,w=q.parentNode;ar(q);ch(new bV(r),function(a){t?w.insertBefore(a,t.nextSibling):w.replaceChild(a,q);t=a})},children:function(q){var r=[];ch(q.childNodes,function(t){1===t.nodeType&&r.push(t)});return r},contents:function(q){return q.childNodes||[]},append:function(q,r){ch(new bV(r),function(a){1!==q.nodeType&&11!==q.nodeType||q.appendChild(a)})},prepend:function(q,r){if(1===q.nodeType){var t=q.firstChild;ch(new bV(r),function(a){q.insertBefore(a,t)})}},wrap:function(q,r){r=h(r)[0];var t=q.parentNode;t&&t.replaceChild(r,q);r.appendChild(q)},remove:function(q){ar(q);var r=q.parentNode;r&&r.removeChild(q)},after:function(q,r){var t=q,w=q.parentNode;ch(new bV(r),function(x){w.insertBefore(x,t.nextSibling);t=x})},addClass:au,removeClass:aj,toggleClass:function(q,r,t){dO(t)&&(t=!V(q,r));(t?au:aj)(q,r)},parent:function(q){return(q=q.parentNode)&&11!==q.nodeType?q:null},next:function(q){if(q.nextElementSibling){return q.nextElementSibling}for(q=q.nextSibling;null!=q&&1!==q.nodeType;){q=q.nextSibling}return q},find:function(q,r){return q.getElementsByTagName?q.getElementsByTagName(r):[]},clone:l,triggerHandler:function(q,r,t){r=(bu(q,"events")||{})[r];t=t||[];var w=[{preventDefault:di,stopPropagation:di}];ch(r,function(a){a.apply(q,w.concat(t))})}},function(q,r){bV.prototype[r]=function(a,t,x){for(var w,z=0;z<this.length;z++){dO(w)?(w=q(this[z],a,t,x),v(w)&&(w=h(w))):dS(w,q(this[z],a,t,x))}return v(w)?w:this};bV.prototype.bind=bV.prototype.on;bV.prototype.unbind=bV.prototype.off});cO.prototype={put:function(q,r){this[aD(q)]=r},get:function(q){return this[aD(q)]},remove:function(q){var r=this[q=aD(q)];delete this[q];return r}};var o=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,J=/,/,ac=/^\s*(_?)(\S+?)\1\s*$/,e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,cX=aB("$injector"),cU=aB("$animate"),c3=["$provide",function(q){this.$$selectors={};this.register=function(a,r){var t=a+"-animation";if(a&&"."!=a.charAt(0)){throw cU("notcsel",a)}this.$$selectors[a.substr(1)]=t;q.factory(t,r)};this.classNameFilter=function(r){1===arguments.length&&(this.$$classNameFilter=r instanceof RegExp?r:null);return this.$$classNameFilter};this.$get=["$timeout",function(r){return{enter:function(a,t,x,w){x?x.after(a):(t&&t[0]||(t=x.parent()),t.append(a));w&&r(w,0,!1)},leave:function(a,t){a.remove();t&&r(t,0,!1)},move:function(t,w,z,x){this.enter(t,w,z,x)},addClass:function(a,t,w){t=ag(t)?t:bk(t)?t.join(" "):"";ch(a,function(x){au(x,t)});w&&r(w,0,!1)},removeClass:function(a,t,w){t=ag(t)?t:bk(t)?t.join(" "):"";ch(a,function(x){aj(x,t)});w&&r(w,0,!1)},enabled:di}}]}],ba=aB("$compile");be.$inject=["$provide","$$sanitizeUriProvider"];var a6=/^(x[\:\-_]|data[\:\-_])/i,b9=aB("$interpolate"),dg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,cT={http:80,https:443,ftp:21},a4=aB("$location");c0.prototype=bd.prototype=cR.prototype={$$html5:!1,$$replace:!1,absUrl:bc("$$absUrl"),url:function(q,r){if(dO(q)){return this.$$url}var t=dg.exec(q);t[1]&&this.path(decodeURIComponent(t[1]));(t[2]||t[1])&&this.search(t[3]||"");this.hash(t[5]||"",r);return this},protocol:bc("$$protocol"),host:bc("$$host"),port:bc("$$port"),path:c9("$$path",function(q){return"/"==q.charAt(0)?q:"/"+q}),search:function(q,r){switch(arguments.length){case 0:return this.$$search;case 1:if(ag(q)){this.$$search=dy(q)}else{if(du(q)){this.$$search=q}else{throw a4("isrcharg")}}break;default:dO(r)||null===r?delete this.$$search[q]:this.$$search[q]=r}this.$$compose();return this},hash:c9("$$hash",C),replace:function(){this.$$replace=!0;return this}};var dQ=aB("$parse"),dJ={},ct,bm={"null":function(){return null},"true":function(){return !0},"false":function(){return !1},undefined:di,"+":function(q,r,t,w){t=t(q,r);w=w(q,r);return v(t)?v(w)?t+w:t:v(w)?w:cs},"-":function(q,r,t,w){t=t(q,r);w=w(q,r);return(v(t)?t:0)-(v(w)?w:0)},"*":function(q,r,t,w){return t(q,r)*w(q,r)},"/":function(q,r,t,w){return t(q,r)/w(q,r)},"%":function(q,r,t,w){return t(q,r)%w(q,r)},"^":function(q,r,t,w){return t(q,r)^w(q,r)},"=":di,"===":function(q,r,t,w){return t(q,r)===w(q,r)},"!==":function(q,r,t,w){return t(q,r)!==w(q,r)},"==":function(q,r,t,w){return t(q,r)==w(q,r)},"!=":function(q,r,t,w){return t(q,r)!=w(q,r)},"<":function(q,r,t,w){return t(q,r)<w(q,r)},">":function(q,r,t,w){return t(q,r)>w(q,r)},"<=":function(q,r,t,w){return t(q,r)<=w(q,r)},">=":function(q,r,t,w){return t(q,r)>=w(q,r)},"&&":function(q,r,t,w){return t(q,r)&&w(q,r)},"||":function(q,r,t,w){return t(q,r)||w(q,r)},"&":function(q,r,t,w){return t(q,r)&w(q,r)},"|":function(q,r,t,w){return w(q,r)(q,r,t(q,r))},"!":function(q,r,t){return !t(q,r)}},dr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},bx=function(q){this.options=q};bx.prototype={constructor:bx,lex:function(q){this.text=q;this.index=0;this.ch=cs;this.lastCh=":";this.tokens=[];var r;for(q=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'")){this.readString(this.ch)}else{if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek())){this.readNumber()}else{if(this.isIdent(this.ch)){this.readIdent(),this.was("{,")&&("{"===q[0]&&(r=this.tokens[this.tokens.length-1]))&&(r.json=-1===r.text.indexOf("."))}else{if(this.is("(){}[].,;:?")){this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&q.unshift(this.ch),this.is("}]")&&q.shift(),this.index++}else{if(this.isWhitespace(this.ch)){this.index++;continue}else{var t=this.ch+this.peek(),w=t+this.peek(2),z=bm[this.ch],x=bm[t],A=bm[w];A?(this.tokens.push({index:this.index,text:w,fn:A}),this.index+=3):x?(this.tokens.push({index:this.index,text:t,fn:x}),this.index+=2):z?(this.tokens.push({index:this.index,text:this.ch,fn:z,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}}}}}this.lastCh=this.ch}return this.tokens},is:function(q){return -1!==q.indexOf(this.ch)},was:function(q){return -1!==q.indexOf(this.lastCh)},peek:function(q){q=q||1;return this.index+q<this.text.length?this.text.charAt(this.index+q):!1},isNumber:function(q){return"0"<=q&&"9">=q},isWhitespace:function(q){return" "===q||"\r"===q||"\t"===q||"\n"===q||"\v"===q||"\u00a0"===q},isIdent:function(q){return"a"<=q&&"z">=q||"A"<=q&&"Z">=q||"_"===q||"$"===q},isExpOperator:function(q){return"-"===q||"+"===q||this.isNumber(q)},throwError:function(q,r,t){t=t||this.index;r=v(r)?"s "+r+"-"+this.index+" ["+this.text.substring(r,t)+"]":" "+t;throw dQ("lexerr",q,r,this.text)},readNumber:function(){for(var q="",r=this.index;this.index<this.text.length;){var t=dt(this.text.charAt(this.index));if("."==t||this.isNumber(t)){q+=t}else{var w=this.peek();if("e"==t&&this.isExpOperator(w)){q+=t}else{if(this.isExpOperator(t)&&w&&this.isNumber(w)&&"e"==q.charAt(q.length-1)){q+=t}else{if(!this.isExpOperator(t)||w&&this.isNumber(w)||"e"!=q.charAt(q.length-1)){break}else{this.throwError("Invalid exponent")}}}}this.index++}q*=1;this.tokens.push({index:r,text:q,json:!0,fn:function(){return q}})},readIdent:function(){for(var q=this,r="",t=this.index,w,z,x,A;this.index<this.text.length;){A=this.text.charAt(this.index);if("."===A||this.isIdent(A)||this.isNumber(A)){"."===A&&(w=this.index),r+=A}else{break}this.index++}if(w){for(z=this.index;z<this.text.length;){A=this.text.charAt(z);if("("===A){x=r.substr(w-t+1);r=r.substr(0,w-t);this.index=z;break}if(this.isWhitespace(A)){z++}else{break}}}t={index:t,text:r};if(bm.hasOwnProperty(r)){t.fn=bm[r],t.json=bm[r]}else{var B=dz(r,this.options,this.text);t.fn=cM(function(D,F){return B(D,F)},{assign:function(a,D){return bn(a,r,D,q.text,q.options)}})}this.tokens.push(t);x&&(this.tokens.push({index:w,text:".",json:!1}),this.tokens.push({index:w+1,text:x,json:!1}))},readString:function(q){var r=this.index;this.index++;for(var t="",w=q,z=!1;this.index<this.text.length;){var x=this.text.charAt(this.index),w=w+x;if(z){"u"===x?(x=this.text.substring(this.index+1,this.index+5),x.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+x+"]"),this.index+=4,t+=String.fromCharCode(parseInt(x,16))):t=(z=dr[x])?t+z:t+x,z=!1}else{if("\\"===x){z=!0}else{if(x===q){this.index++;this.tokens.push({index:r,text:w,string:t,json:!0,fn:function(){return t}});return}t+=x}}this.index++}this.throwError("Unterminated quote",r)}};var dR=function(q,r,t){this.lexer=q;this.$filter=r;this.options=t};dR.ZERO=function(){return 0};dR.prototype={constructor:dR,parse:function(q,r){this.text=q;this.json=r;this.tokens=this.lexer.lex(q);r&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:q,index:0})});var t=r?this.primary():this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);t.literal=!!t.literal;t.constant=!!t.constant;return t},primary:function(){var q;if(this.expect("(")){q=this.filterChain(),this.consume(")")}else{if(this.expect("[")){q=this.arrayDeclaration()}else{if(this.expect("{")){q=this.object()}else{var r=this.expect();(q=r.fn)||this.throwError("not a primary expression",r);r.json&&(q.constant=!0,q.literal=!0)}}}for(var t;r=this.expect("(","[",".");){"("===r.text?(q=this.functionCall(q,t),t=null):"["===r.text?(t=q,q=this.objectIndex(q)):"."===r.text?(t=q,q=this.fieldAccess(q)):this.throwError("IMPOSSIBLE")}return q},throwError:function(q,r){throw dQ("syntax",r.text,q,r.index+1,this.text,this.text.substring(r.index))},peekToken:function(){if(0===this.tokens.length){throw dQ("ueoe",this.text)}return this.tokens[0]},peek:function(q,r,t,w){if(0<this.tokens.length){var z=this.tokens[0],x=z.text;if(x===q||x===r||x===t||x===w||!(q||r||t||w)){return z}}return !1},expect:function(q,r,t,w){return(q=this.peek(q,r,t,w))?(this.json&&!q.json&&this.throwError("is not valid json",q),this.tokens.shift(),q):!1},consume:function(q){this.expect(q)||this.throwError("is unexpected, expecting ["+q+"]",this.peek())},unaryFn:function(q,r){return cM(function(a,t){return q(a,t,r)},{constant:r.constant})},ternaryFn:function(q,r,t){return cM(function(a,w){return q(a,w)?r(a,w):t(a,w)},{constant:q.constant&&r.constant&&t.constant})},binaryFn:function(q,r,t){return cM(function(a,w){return r(a,w,q,t)},{constant:q.constant&&t.constant})},statements:function(){for(var q=[];;){if(0<this.tokens.length&&!this.peek("}",")",";","]")&&q.push(this.filterChain()),!this.expect(";")){return 1===q.length?q[0]:function(a,r){for(var t,x=0;x<q.length;x++){var w=q[x];w&&(t=w(a,r))}return t}}}},filterChain:function(){for(var q=this.expression(),r;;){if(r=this.expect("|")){q=this.binaryFn(q,r.fn,this.filter())}else{return q}}},filter:function(){for(var q=this.expect(),r=this.$filter(q.text),t=[];;){if(q=this.expect(":")){t.push(this.expression())}else{var w=function(x,z,A){A=[A];for(var B=0;B<t.length;B++){A.push(t[B](x,z))}return r.apply(x,A)};return function(){return w}}}},expression:function(){return this.assignment()},assignment:function(){var q=this.ternary(),r,t;return(t=this.expect("="))?(q.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),r=this.ternary(),function(a,w){return q.assign(a,r(a,w),w)}):q},ternary:function(){var q=this.logicalOR(),r,t;if(this.expect("?")){r=this.ternary();if(t=this.expect(":")){return this.ternaryFn(q,r,this.ternary())}this.throwError("expected :",t)}else{return q}},logicalOR:function(){for(var q=this.logicalAND(),r;;){if(r=this.expect("||")){q=this.binaryFn(q,r.fn,this.logicalAND())}else{return q}}},logicalAND:function(){var q=this.equality(),r;if(r=this.expect("&&")){q=this.binaryFn(q,r.fn,this.logicalAND())}return q},equality:function(){var q=this.relational(),r;if(r=this.expect("==","!=","===","!==")){q=this.binaryFn(q,r.fn,this.equality())}return q},relational:function(){var q=this.additive(),r;if(r=this.expect("<",">","<=",">=")){q=this.binaryFn(q,r.fn,this.relational())}return q},additive:function(){for(var q=this.multiplicative(),r;r=this.expect("+","-");){q=this.binaryFn(q,r.fn,this.multiplicative())}return q},multiplicative:function(){for(var q=this.unary(),r;r=this.expect("*","/","%");){q=this.binaryFn(q,r.fn,this.unary())}return q},unary:function(){var q;return this.expect("+")?this.primary():(q=this.expect("-"))?this.binaryFn(dR.ZERO,q.fn,this.unary()):(q=this.expect("!"))?this.unaryFn(q.fn,this.unary()):this.primary()},fieldAccess:function(q){var r=this,t=this.expect().text,w=dz(t,this.options,this.text);return cM(function(a,x,z){return w(z||q(a,x))},{assign:function(a,x,z){return bn(q(a,z),t,x,r.text,r.options)}})},objectIndex:function(q){var r=this,t=this.expression();this.consume("]");return cM(function(a,x){var w=q(a,x),z=t(a,x),A;if(!w){return cs}(w=dG(w[z],r.text))&&(w.then&&r.options.unwrapPromises)&&(A=w,"$$v" in w||(A.$$v=cs,A.then(function(B){A.$$v=B})),w=w.$$v);return w},{assign:function(a,x,w){var z=t(a,w);return dG(q(a,w),r.text)[z]=x}})},functionCall:function(q,r){var t=[];if(")"!==this.peekToken().text){do{t.push(this.expression())}while(this.expect(","))}this.consume(")");var w=this;return function(x,a){for(var z=[],B=r?r(x,a):x,A=0;A<t.length;A++){z.push(t[A](x,a))}A=q(x,a,B)||di;dG(B,w.text);dG(A,w.text);z=A.apply?A.apply(B,z):A(z[0],z[1],z[2],z[3],z[4]);return dG(z,w.text)}},arrayDeclaration:function(){var q=[],r=!0;if("]"!==this.peekToken().text){do{var t=this.expression();q.push(t);t.constant||(r=!1)}while(this.expect(","))}this.consume("]");return cM(function(a,w){for(var x=[],z=0;z<q.length;z++){x.push(q[z](a,w))}return x},{literal:!0,constant:r})},object:function(){var q=[],r=!0;if("}"!==this.peekToken().text){do{var t=this.expect(),t=t.string||t.text;this.consume(":");var w=this.expression();q.push({key:t,value:w});w.constant||(r=!1)}while(this.expect(","))}this.consume("}");return cM(function(a,x){for(var z={},B=0;B<q.length;B++){var A=q[B];z[A.key]=A.value(a,x)}return z},{literal:!0,constant:r})}};var bo={},cD=aB("$sce"),aC={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},dE=ci.createElement("a"),n=dF(dP.location.href,!0);I.$inject=["$provide"];ab.$inject=["$locale"];aw.$inject=["$locale"];var aY=".",cq={yyyy:dj("FullYear",4),yy:dj("FullYear",2,0,!0),y:dj("FullYear",1),MMMM:bw("Month"),MMM:bw("Month",!0),MM:dj("Month",2,1),M:dj("Month",1,1),dd:dj("Date",2),d:dj("Date",1),HH:dj("Hours",2),H:dj("Hours",1),hh:dj("Hours",2,-12),h:dj("Hours",1,-12),mm:dj("Minutes",2),m:dj("Minutes",1),ss:dj("Seconds",2),s:dj("Seconds",1),sss:dj("Milliseconds",3),EEEE:bw("Day"),EEE:bw("Day",!0),a:function(q,r){return 12>q.getHours()?r.AMPMS[0]:r.AMPMS[1]},Z:function(q){q=-1*q.getTimezoneOffset();return q=(0<=q?"+":"")+(bH(Math[0<q?"floor":"ceil"](q/60),2)+bH(Math.abs(q%60),2))}},cf=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,b3=/^\-?\d+$/;al.$inject=["$locale"];var bL=b(dt),bT=b(a3);aG.$inject=["$parse"];var dC=b({restrict:"E",compile:function(q,r){8>=bD&&(r.href||r.name||r.$set("href",""),q.append(ci.createComment("IE fix")));if(!r.href&&!r.xlinkHref&&!r.name){return function(t,w){var x="[object SVGAnimatedString]"===bF.call(w.prop("href"))?"xlink:href":"href";w.on("click",function(z){w.attr(x)||z.preventDefault()})}}}}),bZ={};ch(aN,function(q,r){if("multiple"!=q){var t=bE("ng-"+r);bZ[t]=function(){return{priority:100,link:function(w,z,x){w.$watch(x[t],function(A){x.$set(r,!!A)})}}}}});ch(["src","srcset","href"],function(q){var r=bE("ng-"+q);bZ[r]=function(){return{priority:99,link:function(a,t,w){w.$observe(r,function(x){x&&(w.$set(q,x),bD&&t.prop(q,w[q]))})}}}});var bY={$addControl:di,$removeControl:di,$setValidity:di,$setDirty:di,$setPristine:di};a5.$inject=["$element","$attrs","$scope"];var bp=function(q){return["$timeout",function(a){return{name:"form",restrict:q?"EAC":"E",controller:a5,compile:function(){return{pre:function(r,t,x,w){if(!x.action){var z=function(D){D.preventDefault?D.preventDefault():D.returnValue=!1};bf(t[0],"submit",z);t.on("$destroy",function(){a(function(){G(t[0],"submit",z)},0,!1)})}var B=t.parent().controller("form"),A=x.name||x.ngForm;A&&bn(r,A,w,A);if(B){t.on("$destroy",function(){B.$removeControl(w);A&&bn(r,A,cs,A);cM(w,bY)})}}}}}}]},dM=bp(),dX=bp(!0),f=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,s=/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,P=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,bz={text:cl,number:function(q,r,t,w,z,x){cl(q,r,t,w,z,x);w.$parsers.push(function(A){var B=w.$isEmpty(A);if(B||P.test(A)){return w.$setValidity("number",!0),""===A?null:B?A:parseFloat(A)}w.$setValidity("number",!1);return cs});w.$formatters.push(function(A){return w.$isEmpty(A)?"":""+A});t.min&&(q=function(A){var B=parseFloat(t.min);return b5(w,"min",w.$isEmpty(A)||A>=B,A)},w.$parsers.push(q),w.$formatters.push(q));t.max&&(q=function(A){var B=parseFloat(t.max);return b5(w,"max",w.$isEmpty(A)||A<=B,A)},w.$parsers.push(q),w.$formatters.push(q));w.$formatters.push(function(A){return b5(w,"number",w.$isEmpty(A)||cF(A),A)})},url:function(q,r,t,w,z,x){cl(q,r,t,w,z,x);q=function(A){return b5(w,"url",w.$isEmpty(A)||f.test(A),A)};w.$formatters.push(q);w.$parsers.push(q)},email:function(q,r,t,w,z,x){cl(q,r,t,w,z,x);q=function(A){return b5(w,"email",w.$isEmpty(A)||s.test(A),A)};w.$formatters.push(q);w.$parsers.push(q)},radio:function(q,r,t,w){dO(t.name)&&r.attr("name",c());r.on("click",function(){r[0].checked&&q.$apply(function(){w.$setViewValue(t.value)})});w.$render=function(){r[0].checked=t.value==w.$viewValue};t.$observe("value",w.$render)},checkbox:function(q,r,t,w){var z=t.ngTrueValue,x=t.ngFalseValue;ag(z)||(z=!0);ag(x)||(x=!1);r.on("click",function(){q.$apply(function(){w.$setViewValue(r[0].checked)})});w.$render=function(){r[0].checked=w.$viewValue};w.$isEmpty=function(A){return A!==z};w.$formatters.push(function(A){return A===z});w.$parsers.push(function(A){return A?z:x})},hidden:di,button:di,submit:di,reset:di},bJ=["$browser","$sniffer",function(q,r){return{restrict:"E",require:"?ngModel",link:function(a,t,x,w){w&&(bz[dt(x.type)]||bz.text)(a,t,x,w,r,q)}}}],bO="ng-valid",bG="ng-invalid",bb="ng-pristine",b7="ng-dirty",ae=["$scope","$exceptionHandler","$attrs","$element","$parse",function(q,r,t,w,z){function x(M,O){O=O?"-"+ai(O,"-"):"";w.removeClass((M?bG:bO)+O).addClass((M?bO:bG)+O)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=t.name;var A=z(t.ngModel),F=A.assign;if(!F){throw aB("ngModel")("nonassign",t.ngModel,aL(w))}this.$render=di;this.$isEmpty=function(M){return dO(M)||""===M||null===M||M!==M};var B=w.inheritedData("$formController")||bY,D=0,K=this.$error={};w.addClass(bb);x(!0);this.$setValidity=function(M,O){K[M]!==!O&&(O?(K[M]&&D--,D||(x(!0),this.$valid=!0,this.$invalid=!1)):(x(!1),this.$invalid=!0,this.$valid=!1,D++),K[M]=!O,x(O,M),B.$setValidity(M,O,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=!0;w.removeClass(b7).addClass(bb)};this.$setViewValue=function(a){this.$viewValue=a;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,w.removeClass(bb).addClass(b7),B.$setDirty());ch(this.$parsers,function(M){a=M(a)});this.$modelValue!==a&&(this.$modelValue=a,F(q,a),ch(this.$viewChangeListeners,function(M){try{M()}catch(O){r(O)}}))};var L=this;q.$watch(function(){var a=A(q);if(L.$modelValue!==a){var M=L.$formatters,O=M.length;for(L.$modelValue=a;O--;){a=M[O](a)}L.$viewValue!==a&&(L.$viewValue=a,L.$render())}return a})}],ao=function(){return{require:["ngModel","^?form"],controller:ae,link:function(q,r,t,w){var z=w[0],x=w[1]||bY;x.$addControl(z);q.$on("$destroy",function(){x.$removeControl(z)})}}},az=b({require:"ngModel",link:function(q,r,t,w){w.$viewChangeListeners.push(function(){q.$eval(t.ngChange)})}}),bR=function(){return{require:"?ngModel",link:function(q,r,t,w){if(w){t.required=!0;var x=function(z){if(t.required&&w.$isEmpty(z)){w.$setValidity("required",!1)}else{return w.$setValidity("required",!0),z}};w.$formatters.push(x);w.$parsers.unshift(x);t.$observe("required",function(){x(w.$viewValue)})}}}},aJ=function(){return{require:"ngModel",link:function(q,r,t,w){var x=(q=/\/(.*)\//.exec(t.ngList))&&RegExp(q[1])||t.ngList||",";w.$parsers.push(function(z){if(!dO(z)){var A=[];z&&ch(z.split(x),function(B){B&&A.push(y(B))});return A}});w.$formatters.push(function(z){return bk(z)?z.join(", "):cs});w.$isEmpty=function(z){return !z||!z.length}}}},aT=/^(true|false|\d+)$/,a1=function(){return{priority:100,compile:function(q,r){return aT.test(r.ngValue)?function(t,w,x){x.$set("value",t.$eval(x.ngValue))}:function(t,w,x){t.$watch(x.ngValue,function(z){x.$set("value",z)})}}}},a8=cN(function(q,r,t){r.addClass("ng-binding").data("$binding",t.ngBind);q.$watch(t.ngBind,function(w){r.text(w==cs?"":w)})}),bi=["$interpolate",function(q){return function(a,r,t){a=q(r.attr(t.$attr.ngBindTemplate));r.addClass("ng-binding").data("$binding",a);t.$observe("ngBindTemplate",function(w){r.text(w)})}}],bs=["$sce","$parse",function(q,r){return function(a,t,x){t.addClass("ng-binding").data("$binding",x.ngBindHtml);var w=r(x.ngBindHtml);a.$watch(function(){return(w(a)||"").toString()},function(z){t.html(q.getTrustedHtml(w(a))||"")})}}],bC=bP("",!0),bM=bP("Odd",0),bU=bP("Even",1),b4=cN({compile:function(q,r){r.$set("ngCloak",cs);q.removeClass("ng-cloak")}}),cg=[function(){return{scope:!0,controller:"@",priority:500}}],b1={};ch("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(q){var r=bE("ng-"+q);b1[r]=["$parse",function(a){return{compile:function(t,x){var w=a(x[r]);return function(z,A,B){A.on(dt(q),function(D){z.$apply(function(){w(z,{$event:D})})})}}}}]});var cr=["$animate",function(q){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(a,r,t,x,w){var z,A;a.$watch(t.ngIf,function(B){b6(B)?A||(A=a.$new(),w(A,function(D){D[D.length++]=ci.createComment(" end ngIf: "+t.ngIf+" ");z={clone:D};q.enter(D,r.parent(),r)})):(A&&(A.$destroy(),A=null),z&&(q.leave(dl(z.clone)),z=null))})}}}],cB=["$http","$templateCache","$anchorScroll","$animate","$sce",function(q,r,t,w,x){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:T.noop,compile:function(a,z){var D=z.ngInclude||z.src,A=z.onload||"",B=z.autoscroll;return function(K,L,O,Q,X){var F=0,W,S,M=function(){W&&(W.$destroy(),W=null);S&&(w.leave(S),S=null)};K.$watch(x.parseAsResourceUrl(D),function(Y){var Z=function(){!v(B)||B&&!K.$eval(B)||t()},cc=++F;Y?(q.get(Y,{cache:r}).success(function(cd){if(cc===F){var ce=K.$new();Q.template=cd;cd=X(ce,function(db){M();w.enter(db,null,L,Z)});W=ce;S=cd;W.$emit("$includeContentLoaded");K.$eval(A)}}).error(function(){cc===F&&M()}),K.$emit("$includeContentRequested")):(M(),Q.template=null)})}}}}],cL=["$compile",function(q){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(a,r,t,w){r.html(w.template);q(r.contents())(a)}}}],cV=cN({priority:450,compile:function(){return{pre:function(q,r,t){q.$eval(t.ngInit)}}}}),c4=cN({terminal:!0,priority:1000}),dh=["$locale","$interpolate",function(q,r){var t=/{}/g;return{restrict:"EA",link:function(a,x,w){var z=w.count,D=w.$attr.when&&x.attr(w.$attr.when),A=w.offset||0,B=a.$eval(D)||{},F={},K=r.startSymbol(),M=r.endSymbol(),L=/^when(Minus)?(.+)$/;ch(w,function(O,Q){L.test(Q)&&(B[dt(Q.replace("when","").replace("Minus","-"))]=x.attr(w.$attr[Q]))});ch(B,function(O,Q){F[Q]=r(O.replace(t,K+z+"-"+A+M))});a.$watch(function(){var O=parseFloat(a.$eval(z));if(isNaN(O)){return""}O in B||(O=q.pluralCat(O-A));return F[O](a,x,!0)},function(O){x.text(O)})}}}],ds=["$parse","$animate",function(q,r){var t=aB("ngRepeat");return{transclude:"element",priority:1000,terminal:!0,$$tlb:!0,link:function(w,z,x,A,K){var D=x.ngRepeat,F=D.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),L,M,Q,O,X,S,W={$id:aD};if(!F){throw t("iexp",D)}x=F[1];A=F[2];(F=F[3])?(L=q(F),M=function(B,Y,Z){S&&(W[S]=B);W[X]=Y;W.$index=Z;return L(w,W)}):(Q=function(B,Y){return aD(Y)},O=function(B){return B});F=x.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!F){throw t("iidexp",x)}X=F[3]||F[1];S=F[2];var a={};w.$watchCollection(A,function(B){var Z,cd,ce=z[0],db,de={},d1,dc,Y,d0,dd,dZ,cc=[];if(cv(B)){dd=B,db=M||Q}else{db=M||O;dd=[];for(Y in B){B.hasOwnProperty(Y)&&"$"!=Y.charAt(0)&&dd.push(Y)}dd.sort()}d1=dd.length;cd=cc.length=dd.length;for(Z=0;Z<cd;Z++){if(Y=B===dd?Z:dd[Z],d0=B[Y],d0=db(Y,d0,Z),dv(d0,"`track by` id"),a.hasOwnProperty(d0)){dZ=a[d0],delete a[d0],de[d0]=dZ,cc[Z]=dZ}else{if(de.hasOwnProperty(d0)){throw ch(cc,function(d2){d2&&d2.scope&&(a[d2.id]=d2)}),t("dupes",D,d0)}cc[Z]={id:d0};de[d0]=!1}}for(Y in a){a.hasOwnProperty(Y)&&(dZ=a[Y],Z=dl(dZ.clone),r.leave(Z),ch(Z,function(d2){d2.$$NG_REMOVED=!0}),dZ.scope.$destroy())}Z=0;for(cd=dd.length;Z<cd;Z++){Y=B===dd?Z:dd[Z];d0=B[Y];dZ=cc[Z];cc[Z-1]&&(ce=cc[Z-1].clone[cc[Z-1].clone.length-1]);if(dZ.scope){dc=dZ.scope;db=ce;do{db=db.nextSibling}while(db&&db.$$NG_REMOVED);dZ.clone[0]!=db&&r.move(dl(dZ.clone),null,h(ce));ce=dZ.clone[dZ.clone.length-1]}else{dc=w.$new()}dc[X]=d0;S&&(dc[S]=Y);dc.$index=Z;dc.$first=0===Z;dc.$last=Z===d1-1;dc.$middle=!(dc.$first||dc.$last);dc.$odd=!(dc.$even=0===(Z&1));dZ.scope||K(dc,function(d2){d2[d2.length++]=ci.createComment(" end ngRepeat: "+D+" ");r.enter(d2,null,h(ce));ce=d2;dZ.scope=dc;dZ.clone=d2;de[dZ.id]=dZ})}a=de})}}}],dD=["$animate",function(q){return function(a,r,t){a.$watch(t.ngShow,function(w){q[b6(w)?"removeClass":"addClass"](r,"ng-hide")})}}],dN=["$animate",function(q){return function(a,r,t){a.$watch(t.ngHide,function(w){q[b6(w)?"addClass":"removeClass"](r,"ng-hide")})}}],dY=cN(function(q,r,t){q.$watch(t.ngStyle,function(w,x){x&&w!==x&&ch(x,function(z,A){r.css(A,"")});w&&r.css(w)},!0)}),u=["$animate",function(q){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(a,r,t,x){var w,z,A=[];a.$watch(t.ngSwitch||t.on,function(B){for(var D=0,F=A.length;D<F;D++){A[D].$destroy(),q.leave(z[D])}z=[];A=[];if(w=x.cases["!"+B]||x.cases["?"]){a.$eval(t.change),ch(w,function(K){var L=a.$new();A.push(L);K.transclude(L,function(M){var O=K.element;z.push(M);q.enter(M,O.parent(),O)})})}})}}}],R=cN({transclude:"element",priority:800,require:"^ngSwitch",link:function(q,r,t,w,x){w.cases["!"+t.ngSwitchWhen]=w.cases["!"+t.ngSwitchWhen]||[];w.cases["!"+t.ngSwitchWhen].push({transclude:x,element:r})}}),af=cN({transclude:"element",priority:800,require:"^ngSwitch",link:function(q,r,t,w,x){w.cases["?"]=w.cases["?"]||[];w.cases["?"].push({transclude:x,element:r})}}),ap=cN({controller:["$element","$transclude",function(q,r){if(!r){throw aB("ngTransclude")("orphan",aL(q))}this.$transclude=r}],link:function(q,r,t,w){w.$transclude(function(x){r.empty();r.append(x)})}}),aA=["$templateCache",function(q){return{restrict:"E",terminal:!0,compile:function(a,r){"text/ng-template"==r.type&&q.put(r.id,a[0].text)}}}],aK=aB("ngOptions"),aU=b({terminal:!0}),a2=["$compile","$parse",function(q,r){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,w={$setViewValue:di};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(x,z,A){var F=this,B={},D=w,K;F.databound=A.ngModel;F.init=function(L,M,O){D=L;K=O};F.addOption=function(a){dv(a,'"option value"');B[a]=!0;D.$viewValue==a&&(x.val(a),K.parent()&&K.remove())};F.removeOption=function(L){this.hasOption(L)&&(delete B[L],D.$viewValue==L&&this.renderUnknownOption(L))};F.renderUnknownOption=function(a){a="? "+aD(a)+" ?";K.val(a);x.prepend(K);x.val(a);K.prop("selected",!0)};F.hasOption=function(L){return B.hasOwnProperty(L)};z.$on("$destroy",function(){F.renderUnknownOption=di})}],link:function(z,A,K,O){function L(x,D,F,db){F.$render=function(){var dc=F.$viewValue;db.hasOption(dc)?(cd.parent()&&cd.remove(),D.val(dc),""===dc&&cc.prop("selected",!0)):dO(dc)&&cc?D.val(""):db.renderUnknownOption(dc)};D.on("change",function(){x.$apply(function(){cd.parent()&&cd.remove();F.$setViewValue(D.val())})})}function M(x,D,F){var db;F.$render=function(){var dc=new cO(F.$viewValue);ch(D.find("option"),function(dd){dd.selected=v(dc.get(dd.value))})};x.$watch(function(){cW(db,F.$viewValue)||(db=i(F.$viewValue),F.$render())});D.on("change",function(){x.$apply(function(){var dc=[];ch(D.find("option"),function(dd){dd.selected&&dc.push(dd.value)});F.$setViewValue(dc)})})}function Q(F,db,dc){function dd(){var x={"":[]},d6=[""],d8,ed,ee,ef,eg;ef=dc.$modelValue;eg=D(F)||[];var d7=d1?b8(eg):eg,ea,ec,eh;ec={};ee=!1;var d9,eb;if(W){if(d4&&bk(ef)){for(ee=new cO([]),eh=0;eh<ef.length;eh++){ec[d0]=ef[eh],ee.put(d4(F,ec),ef[eh])}}else{ee=new cO(ef)}}for(eh=0;ea=d7.length,eh<ea;eh++){ed=eh;if(d1){ed=d7[eh];if("$"===ed.charAt(0)){continue}ec[d1]=ed}ec[d0]=eg[ed];d8=d2(F,ec)||"";(ed=x[d8])||(ed=x[d8]=[],d6.push(d8));W?d8=v(ee.remove(d4?d4(F,ec):d3(F,ec))):(d4?(d8={},d8[d0]=ef,d8=d4(F,d8)===d4(F,ec)):d8=ef===d3(F,ec),ee=ee||d8);d9=dZ(F,ec);d9=v(d9)?d9:"";ed.push({id:d4?d4(F,ec):d1?d7[eh]:eh,label:d9,selected:d8})}W||(ce||null===ef?x[""].unshift({id:"",label:"",selected:!ee}):ee||x[""].unshift({id:"?",label:"",selected:!0}));ec=0;for(d7=d6.length;ec<d7;ec++){d8=d6[ec];ed=x[d8];d5.length<=ec?(ef={element:a.clone().attr("label",d8),label:ed.label},eg=[ef],d5.push(eg),db.append(ef.element)):(eg=d5[ec],ef=eg[0],ef.label!=d8&&ef.element.attr("label",ef.label=d8));d9=null;eh=0;for(ea=ed.length;eh<ea;eh++){ee=ed[eh],(d8=eg[eh+1])?(d9=d8.element,d8.label!==ee.label&&d9.text(d8.label=ee.label),d8.id!==ee.id&&d9.val(d8.id=ee.id),d9[0].selected!==ee.selected&&d9.prop("selected",d8.selected=ee.selected)):(""===ee.id&&ce?eb=ce:(eb=Y.clone()).val(ee.id).attr("selected",ee.selected).text(ee.label),eg.push({element:eb,label:ee.label,id:ee.id,selected:ee.selected}),d9?d9.after(eb):ef.element.append(eb),d9=eb)}for(eh++;eg.length>eh;){eg.pop().element.remove()}}for(;d5.length>ec;){d5.pop()[0].element.remove()}}var de;if(!(de=X.match(t))){throw aK("iexp",X,aL(db))}var dZ=r(de[2]||de[1]),d0=de[4]||de[6],d1=de[5],d2=r(de[3]||""),d3=r(de[2]?de[1]:d0),D=r(de[7]),d4=de[8]?r(de[8]):null,d5=[[{element:db,label:""}]];ce&&(q(ce)(F),ce.removeClass("ng-scope"),ce.remove());db.empty();db.on("change",function(){F.$apply(function(){var x,d6=D(F)||[],d7={},d8,d9,ea,eb,ec,ed,ee;if(W){for(d9=[],eb=0,ed=d5.length;eb<ed;eb++){for(x=d5[eb],ea=1,ec=x.length;ea<ec;ea++){if((d8=x[ea].element)[0].selected){d8=d8.val();d1&&(d7[d1]=d8);if(d4){for(ee=0;ee<d6.length&&(d7[d0]=d6[ee],d4(F,d7)!=d8);ee++){}}else{d7[d0]=d6[d8]}d9.push(d3(F,d7))}}}}else{if(d8=db.val(),"?"==d8){d9=cs}else{if(""===d8){d9=null}else{if(d4){for(ee=0;ee<d6.length;ee++){if(d7[d0]=d6[ee],d4(F,d7)==d8){d9=d3(F,d7);break}}}else{d7[d0]=d6[d8],d1&&(d7[d1]=d8),d9=d3(F,d7)}}}}dc.$setViewValue(d9)})});dc.$render=dd;F.$watch(dd)}if(O[1]){var S=O[0];O=O[1];var W=K.multiple,X=K.ngOptions,ce=!1,cc,Y=h(ci.createElement("option")),a=h(ci.createElement("optgroup")),cd=Y.clone();K=0;for(var Z=A.children(),B=Z.length;K<B;K++){if(""===Z[K].value){cc=ce=Z.eq(K);break}}S.init(O,ce,cd);W&&(O.$isEmpty=function(x){return !x||0===x.length});X?Q(z,A,O):W?M(z,A,O):L(z,A,O,S)}}}}],a9=["$interpolate",function(q){var r={addOption:di,removeOption:di};return{restrict:"E",priority:100,compile:function(a,t){if(dO(t.value)){var w=q(a.text(),!0);w||t.$set("value",a.text())}return function(x,z,A){var B=z.parent(),D=B.data("$selectController")||B.parent().data("$selectController");D&&D.databound?z.prop("selected",!1):D=r;w?x.$watch(w,function(F,K){A.$set("value",F);F!==K&&D.removeOption(K);D.addOption(F)}):D.addOption(A.value);z.on("$destroy",function(){D.removeOption(A.value)})}}}}],bj=b({restrict:"E",terminal:!0});(ah=dP.jQuery)?(h=ah,cM(ah.fn,{scope:aM.scope,isolateScope:aM.isolateScope,controller:aM.controller,injector:aM.injector,inheritedData:aM.inheritedData}),dx("remove",!0,!0,!1),dx("empty",!1,!1,!1),dx("html",!1,!1,!0)):h=bV;T.element=h;(function(q){cM(q,{bootstrap:dT,copy:i,extend:cM,equals:cW,element:h,forEach:ch,injector:d,noop:di,bind:U,toJson:cj,fromJson:c8,identity:C,isUndefined:dO,isDefined:v,isString:ag,isFunction:bt,isObject:du,isNumber:cF,isElement:co,isArray:bk,version:cK,isDate:bv,lowercase:dt,uppercase:a3,callbacks:{counter:0},$$minErr:aB,$$csp:cZ});c6=da(dP);try{c6("ngLocale")}catch(r){c6("ngLocale",[]).provider("$locale",cJ)}c6("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:ad});t.provider("$compile",be).directive({a:dC,input:bJ,textarea:bJ,form:dM,script:aA,select:a2,style:bj,option:a9,ngBind:a8,ngBindHtml:bs,ngBindTemplate:bi,ngClass:bC,ngClassEven:bU,ngClassOdd:bM,ngCloak:b4,ngController:cg,ngForm:dX,ngHide:dN,ngIf:cr,ngInclude:cB,ngInit:cV,ngNonBindable:c4,ngPluralize:dh,ngRepeat:ds,ngShow:dD,ngStyle:dY,ngSwitch:u,ngSwitchWhen:R,ngSwitchDefault:af,ngOptions:aU,ngTransclude:ap,ngModel:ao,ngList:aJ,ngChange:az,required:bR,ngRequired:bR,ngValue:a1}).directive({ngInclude:cL}).directive(bZ).directive(b1);t.provider({$anchorScroll:am,$animate:c3,$browser:aH,$cacheFactory:aR,$controller:bg,$document:bq,$exceptionHandler:bA,$filter:I,$interpolate:cp,$interval:cz,$http:bK,$httpBackend:b2,$location:c2,$log:df,$parse:dL,$rootScope:N,$q:dW,$sce:aI,$sceDelegate:ay,$sniffer:aS,$templateCache:aZ,$timeout:a0,$window:a7})}])})(T);h(ci).ready(function(){cS(ci,dT)})})(window,document);!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}</style>');!function(b){b(["jquery"],function(c){return function(){function a(d,e,f){return I({type:O.error,iconClass:J().iconClasses.error,message:d,optionsOverride:f,title:e})}function w(d,e){return d||(d=J()),L=c("#"+d.containerId),L.length?L:(e&&(L=F(d)),L)}function x(d,e,f){return I({type:O.info,iconClass:J().iconClasses.info,message:d,optionsOverride:f,title:e})}function y(d){M=d}function z(d,e,f){return I({type:O.success,iconClass:J().iconClasses.success,message:d,optionsOverride:f,title:e})}function A(d,e,f){return I({type:O.warning,iconClass:J().iconClasses.warning,message:d,optionsOverride:f,title:e})}function B(d){var e=J();L||w(e),E(d,e)||D(e)}function C(e){var f=J();return L||w(f),e&&0===c(":focus",e).length?void K(e):void (L.children().length&&L.remove())}function D(e){for(var f=L.children(),g=f.length-1;g>=0;g--){E(c(f[g]),e)}}function E(d,e){return d&&0===c(":focus",d).length?(d[e.hideMethod]({duration:e.hideDuration,easing:e.hideEasing,complete:function(){K(d)}}),!0):!1}function F(d){return L=c("<div/>").attr("id",d.containerId).addClass(d.positionClass).attr("aria-live","polite").attr("role","alert"),L.appendTo(c(d.target)),L}function G(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1000,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1000,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5000,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0}}function H(d){M&&M(d)}function I(n){function p(d){return !c(":focus",v).length||d?v[s.hideMethod]({duration:s.hideDuration,easing:s.hideEasing,complete:function(){K(v),s.onHidden&&"hidden"!==T.state&&s.onHidden(),T.state="hidden",T.endTime=new Date,H(T)}}):void 0}function q(){(s.timeOut>0||s.extendedTimeOut>0)&&(u=setTimeout(p,s.extendedTimeOut))}function r(){clearTimeout(u),v.stop(!0,!0)[s.showMethod]({duration:s.showDuration,easing:s.showEasing})}var s=J(),t=n.iconClass||s.iconClass;"undefined"!=typeof n.optionsOverride&&(s=c.extend(s,n.optionsOverride),t=n.optionsOverride.iconClass||t),N++,L=w(s,!0);var u=null,v=c("<div/>"),Q=c("<div/>"),R=c("<div/>"),S=c(s.closeHtml),T={toastId:N,state:"visible",startTime:new Date,options:s,map:n};return n.iconClass&&v.addClass(s.toastClass).addClass(t),n.title&&(Q.append(n.title).addClass(s.titleClass),v.append(Q)),n.message&&(R.append(n.message).addClass(s.messageClass),v.append(R)),s.closeButton&&(S.addClass("toast-close-button").attr("role","button"),v.prepend(S)),v.hide(),s.newestOnTop?L.prepend(v):L.append(v),v[s.showMethod]({duration:s.showDuration,easing:s.showEasing,complete:s.onShown}),s.timeOut>0&&(u=setTimeout(p,s.timeOut)),v.hover(r,q),!s.onclick&&s.tapToDismiss&&v.click(p),s.closeButton&&S&&S.click(function(d){d.stopPropagation?d.stopPropagation():void 0!==d.cancelBubble&&d.cancelBubble!==!0&&(d.cancelBubble=!0),p(!0)}),s.onclick&&v.click(function(){s.onclick(),p()}),H(T),s.debug&&console&&console.log(T),v}function J(){return c.extend({},G(),P.options)}function K(d){L||(L=w()),d.is(":visible")||(d.remove(),d=null,0===L.children().length&&L.remove())}var L,M,N=0,O={error:"error",info:"info",success:"success",warning:"warning"},P={clear:B,remove:C,error:a,getContainer:w,info:x,options:{},subscribe:y,success:z,version:"2.0.3",warning:A};return P}()})}("function"==typeof define&&define.amd?define:function(c,d){"undefined"!=typeof module&&module.exports?module.exports=d(require("jquery")):window.toastr=d(window.jQuery)});