var Wizard=function(n,t){var i;this.$element=$(n);this.options=$.extend({},$.fn.wizard.defaults,t);this.currentStep=this.options.selectedItem.step;this.numSteps=this.$element.find(".steps li").length;this.$prevBtn=this.$element.find("button.btn-prev");this.$nextBtn=this.$element.find("button.btn-next");i=this.$nextBtn.children().detach();this.nextText=$.trim(this.$nextBtn.text());this.$nextBtn.append(i);this.$prevBtn.on("click",$.proxy(this.previous,this));this.$nextBtn.on("click",$.proxy(this.next,this));this.$element.on("click","li.complete",$.proxy(this.stepclicked,this));this.currentStep>1&&this.selectedItem(this.options.selectedItem)};Wizard.prototype={constructor:Wizard,setState:function(){var a=this.currentStep>1,v=this.currentStep===1,y=this.currentStep===this.numSteps,t,o,s,f,h,e,c,i,l,r,u,n;this.$prevBtn.attr("disabled",v===!0||a===!1);t=this.$nextBtn.data();t&&t.last&&(this.lastText=t.last,typeof this.lastText!="undefined"&&(o=y!==!0?this.nextText:this.lastText,s=this.$nextBtn.children().detach(),this.$nextBtn.text(o).append(s)));f=this.$element.find(".steps li");f.removeClass("active").removeClass("complete");f.find("span.badge").removeClass("badge-primary").removeClass("badge-success");h=".steps li:lt("+(this.currentStep-1)+")";e=this.$element.find(h);e.addClass("complete");e.find("span.badge").addClass("badge-success");c=".steps li:eq("+(this.currentStep-1)+")";i=this.$element.find(c);i.addClass("active");i.find("span.badge").addClass("badge-primary");l=i.data().target;this.$element.find(".step-pane").removeClass("active");$(l).addClass("active");$(".wizard .steps").attr("style","margin-left: 0");r=0;$(".wizard .steps > li").each(function(){r+=$(this).outerWidth()});u=0;u=$(".wizard .actions").length?$(".wizard").width()-$(".wizard .actions").outerWidth():$(".wizard").width();r>u&&(n=r-u,$(".wizard .steps").attr("style","margin-left: -"+n+"px"),$(".wizard li.active").position().left<200&&(n+=$(".wizard li.active").position().left-200,n<1?$(".wizard .steps").attr("style","margin-left: 0"):$(".wizard .steps").attr("style","margin-left: -"+n+"px")));this.$element.trigger("changed")},stepclicked:function(n){var r=$(n.currentTarget),t=this.$element.find(".steps li").index(r),i=$.Event("stepclick");(this.$element.trigger(i,{step:t+1}),i.isDefaultPrevented())||(this.currentStep=t+1,this.setState())},previous:function(){var t=this.currentStep>1,n;if(t){if(n=$.Event("change"),this.$element.trigger(n,{step:this.currentStep,direction:"previous"}),n.isDefaultPrevented())return;this.currentStep-=1;this.setState()}},next:function(){var t=this.currentStep+1<=this.numSteps,i=this.currentStep===this.numSteps,n;if(t){if(n=$.Event("change"),this.$element.trigger(n,{step:this.currentStep,direction:"next"}),n.isDefaultPrevented())return;this.currentStep+=1;this.setState()}else i&&this.$element.trigger("finished")},selectedItem:function(n){var i,t;return n?(t=n.step||-1,t>=1&&t<=this.numSteps&&(this.currentStep=t,this.setState()),i=this):i={step:this.currentStep},i}};$.fn.wizard=function(n,t){var i,r=this.each(function(){var u=$(this),r=u.data("wizard"),f=typeof n=="object"&&n;r||u.data("wizard",r=new Wizard(this,f));typeof n=="string"&&(i=r[n](t))});return i===undefined?r:i};$.fn.wizard.defaults={selectedItem:{step:1}};$.fn.wizard.Constructor=Wizard;$(function(){$("body").on("mousedown.wizard.data-api",".wizard",function(){var n=$(this);n.data("wizard")||n.wizard(n.data())})});