(function(n,t){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.3.0",settings:{active_class:"open",align:"bottom",is_hover:!1,opened:function(){},closed:function(){}},init:function(n,t,i){Foundation.inherit(this,"throttle");this.bindings(t,i)},events:function(){var i=this,r=i.S;r(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(t){var u=r(this).data(i.attr_name(!0)+"-init")||i.settings;(!u.is_hover||Modernizr.touch)&&(t.preventDefault(),i.toggle(n(this)))}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(n){var t=r(this),u,f,e;clearTimeout(i.timeout);t.data(i.data_attr())?(u=r("#"+t.data(i.data_attr())),f=t):(u=t,f=r("["+i.attr_name()+"='"+u.attr("id")+"']"));e=f.data(i.attr_name(!0)+"-init")||i.settings;r(n.target).data(i.data_attr())&&e.is_hover&&i.closeall.call(i);e.is_hover&&i.open.apply(i,[u,f])}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(){var n=r(this);i.timeout=setTimeout(function(){var u,t;n.data(i.data_attr())?(t=n.data(i.data_attr(!0)+"-init")||i.settings,t.is_hover&&i.close.call(i,r("#"+n.data(i.data_attr())))):(u=r("["+i.attr_name()+'="'+r(this).attr("id")+'"]'),t=u.data(i.attr_name(!0)+"-init")||i.settings,t.is_hover&&i.close.call(i,n))}.bind(this),150)}).on("click.fndtn.dropdown",function(t){var u=r(t.target).closest("["+i.attr_name()+"-content]");if(!r(t.target).data(i.data_attr())&&!r(t.target).parent().data(i.data_attr())){if(!r(t.target).data("revealId")&&u.length>0&&(r(t.target).is("["+i.attr_name()+"-content]")||n.contains(u.first()[0],t.target))){t.stopPropagation();return}i.close.call(i,r("["+i.attr_name()+"-content]"))}}).on("opened.fndtn.dropdown","["+i.attr_name()+"-content]",function(){i.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+i.attr_name()+"-content]",function(){i.settings.closed.call(this)});r(t).off(".dropdown").on("resize.fndtn.dropdown",i.throttle(function(){i.resize.call(i)},50));this.resize()},close:function(n){var t=this;n.each(function(){t.S(this).hasClass(t.settings.active_class)&&(t.S(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(t.settings.active_class).prev("["+t.attr_name()+"]").removeClass(t.settings.active_class).removeData("target"),t.S(this).trigger("closed").trigger("closed.fndtn.dropdown",[n]))})},closeall:function(){var t=this;n.each(t.S("["+this.attr_name()+"-content]"),function(){t.close.call(t,t.S(this))})},open:function(n,t){this.css(n.addClass(this.settings.active_class),t);n.prev("["+this.attr_name()+"]").addClass(this.settings.active_class);n.data("target",t.get(0)).trigger("opened").trigger("opened.fndtn.dropdown",[n,t])},data_attr:function(){return this.namespace.length>0?this.namespace+"-"+this.name:this.name},toggle:function(n){var t=this.S("#"+n.data(this.data_attr()));t.length!==0&&(this.close.call(this,this.S("["+this.attr_name()+"-content]").not(t)),t.hasClass(this.settings.active_class)?(this.close.call(this,t),t.data("target")!==n.get(0)&&this.open.call(this,t,n)):this.open.call(this,t,n))},resize:function(){var n=this.S("["+this.attr_name()+"-content].open"),t=this.S("["+this.attr_name()+"='"+n.attr("id")+"']");n.length&&t.length&&this.css(n,t)},css:function(n,t){var u=Math.max((t.width()-n.width())/2,8),i,r;return this.clear_idx(),this.small()?(i=this.dirs.bottom.call(n,t),n.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:i.top}),n.css(Foundation.rtl?"right":"left",u)):(r=t.data(this.attr_name(!0)+"-init")||this.settings,this.style(n,t,r)),n},style:function(t,i,r){var u=n.extend({position:"absolute"},this.dirs[r.align].call(t,i,r));t.attr("style","").css(u)},dirs:{_base:function(n){var r=this.offsetParent(),i=r.offset(),t=n.offset();return t.top-=i.top,t.left-=i.left,t},top:function(n){var i=Foundation.libs.dropdown,t=i.dirs._base.call(this,n);return(this.addClass("drop-top"),(n.outerWidth()<this.outerWidth()||i.small())&&i.adjust_pip(8,t),Foundation.rtl)?{left:t.left-this.outerWidth()+n.outerWidth(),top:t.top-this.outerHeight()}:{left:t.left,top:t.top-this.outerHeight()}},bottom:function(n){var i=Foundation.libs.dropdown,t=i.dirs._base.call(this,n);return((n.outerWidth()<this.outerWidth()||i.small())&&i.adjust_pip(8,t),i.rtl)?{left:t.left-this.outerWidth()+n.outerWidth(),top:t.top+n.outerHeight()}:{left:t.left,top:t.top+n.outerHeight()}},left:function(n){var t=Foundation.libs.dropdown.dirs._base.call(this,n);return this.addClass("drop-left"),{left:t.left-this.outerWidth(),top:t.top}},right:function(n){var t=Foundation.libs.dropdown.dirs._base.call(this,n);return this.addClass("drop-right"),{left:t.left+n.outerWidth(),top:t.top}}},adjust_pip:function(n,t){var i=Foundation.stylesheet;this.small()&&(n+=t.left-8);this.rule_idx=i.cssRules.length;var r=".f-dropdown.open:before",u=".f-dropdown.open:after",f="left: "+n+"px;",e="left: "+(n-1)+"px;";i.insertRule?(i.insertRule([r,"{",f,"}"].join(" "),this.rule_idx),i.insertRule([u,"{",e,"}"].join(" "),this.rule_idx+1)):(i.addRule(r,f,this.rule_idx),i.addRule(u,e,this.rule_idx+1))},clear_idx:function(){var n=Foundation.stylesheet;this.rule_idx&&(n.deleteRule(this.rule_idx),n.deleteRule(this.rule_idx),delete this.rule_idx)},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown");this.S("html, body").off(".fndtn.dropdown");this.S(t).off(".fndtn.dropdown");this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}})(jQuery,window,window.document);