function quoteFactory(n,t,i){var r={},u;return r.servicePromise="",r.searchResults=[],r.URL="http://localhost:50600",r.GetPeopleJSON=function(n){var u;if(n=="")for(u=0;u<10;)r.customerJson="",r.servicePromise=i.defer(),t.get(r.URL+"/Accounts/All?q="+n+"&page="+u+"&take=50").success(function(n){r.searchResults=r.searchResults.concat(n)}).error(function(){r.servicePromise.reject()}),u++},r.GetPeopleJSONSearch=function(n){return r.customerJson="",u=i.defer(),t.get(r.URL+"/Accounts/All?q="+n+"&page=0&take=50",{timeout:u.promise}).success(function(n){r.searchResults=r.searchResults.concat(n);u.resolve(n)}).error(function(){u.reject()}),u.promise},r.cancelRequest=function(){u.resolve("user cancelled")},r.GetCustomerShortInformation=function(n){var u=i.defer();return r.servicePromise=i.defer(),t.get(r.URL+"/Accounts/Get/"+n).success(function(n){u.resolve(n)}).error(function(){u.reject()}),u.promise},r.GetCustomerFromQuote=function(n){return u=i.defer(),r.servicePromise=i.defer(),t.get(r.URL+"/Accounts/GetFromQuote?Id="+n,{timeout:u.promise}).success(function(n){u.resolve(n)}).error(function(){u.reject()}),u.promise},r.SaveShipper=function(n,f){return u=i.defer(),r.servicePromise=i.defer(),t.post(r.URL+"/Accounts/AddShippingAccount?accountId="+n+"&quoteId="+f,{timeout:u.promise}).success(function(n){u.resolve(n)}).error(function(){u.reject()}),u.promise},r.AddQuote=function(n){var u=i.defer();return t.post(r.URL+"/Quote/AddQuoteJson/",{shippingAccount:n.shippingAccount,hiddenAccountID:n.AccountID,movedate:n.movedate,referralmethod:n.referralmethod,coll:null,personModel:null,businessModel:null}).success(function(n){u.resolve(n)}).error(function(){u.reject()}),u.promise},r.Quicklook=function(n){var u=i.defer();return r.servicePromise=i.defer(),t.post(r.URL+"/Quote/GetQuicklookByLookup/",{lookup:n},{ignoreLoadingBar:!0}).success(function(n){u.resolve(n);r.servicePromise.resolve(n)}).error(function(){r.servicePromise.reject()}),u.promise},r.GetQuoteFranchise=function(n){r.servicePromise=i.defer();var u=i.defer();return t.get(r.URL+"/Quote/FranchiseDetails/?id="+n).success(function(n){u.resolve(n);r.servicePromise.resolve(n)}).error(function(){r.servicePromise.reject()}),u.promise},r.GetAllStops=function(n){r.servicePromise=i.defer();var u=i.defer();return t.get(r.URL+"/Quote/StopsJson/?id="+n).success(function(n){u.resolve(n);r.servicePromise.resolve(n)}).error(function(){r.servicePromise.reject()}),u.promise},r.AddressSuggestions=function(n){r.servicePromise=i.defer();t.post(r.URL+"/Address/GetSuggestions/",{address:n}).success(function(n){var t=_.map(n,function(n){return{verified:!0,json:JSON.parse(JSON.stringify(n)),displayString:function(){return n.delivery_line_1+", "+n.last_line}}});r.servicePromise.resolve(t)}).error(function(){r.servicePromise.reject()})},r.UpdateStops=function(n,u){var f=JSON.stringify(u);r.servicePromise=i.defer();t.post(r.URL+"/Quote/Stops/",{quoteid:n,stopsjson:f}).success(function(){r.servicePromise.resolve()}).error(function(){r.servicePromise.reject()})},r.DeleteStop=function(n){r.servicePromise=i.defer();t.get(r.URL+"/Quote/DeleteStopJSON/?idd="+n).success(function(n){r.servicePromise.resolve(n)}).error(function(){r.servicePromise.reject()})},r.GetRecentQuote=function(n){var u=i.defer();return t.get(r.URL+"/Quote/GetRecentQuoteJson?lookup="+n).success(function(n){u.resolve(n)}).error(function(n){u.reject(n)}),u.promise},r}quoteApp.factory("quoteFactory",["$rootScope","$http","$q",quoteFactory]);