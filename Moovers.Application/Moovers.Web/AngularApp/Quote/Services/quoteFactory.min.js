function quoteFactory(n,t,i,r){var u={},e=r.$$protocol+"://",o=r.host(),s=":"+r.port(),h=e+o+s,f;return u.URL=h,u.GetPeopleJSON=function(n){var r;if(n=="")for(r=0;r<10;)u.customerJson="",u.servicePromise=i.defer(),t.get(u.URL+"/Accounts/All?q="+n+"&page="+r+"&take=50").success(function(n){u.searchResults=[];u.searchResults=n}).error(function(){u.servicePromise.reject()}),r++},u.GetPeopleJSONSearch=function(n){return u.customerJson="",f=i.defer(),t.get(u.URL+"/Accounts/All?q="+n+"&page=0&take=50",{timeout:f.promise}).success(function(n){u.searchResults=n;f.resolve(n)}).error(function(){f.reject()}),f.promise},u.cancelRequest=function(){f.resolve("user cancelled")},u.GetCustomerShortInformation=function(n){var r=i.defer();return u.servicePromise=i.defer(),t.get(u.URL+"/Accounts/Get/"+n).success(function(n){r.resolve(n)}).error(function(){r.reject()}),r.promise},u.GetCustomerFromQuote=function(n){return f=i.defer(),u.servicePromise=i.defer(),t.get(u.URL+"/Accounts/GetFromQuote?Id="+n,{timeout:f.promise}).success(function(n){f.resolve(n)}).error(function(){f.reject()}),f.promise},u.SaveShipper=function(n,r){return f=i.defer(),u.servicePromise=i.defer(),t.post(u.URL+"/Accounts/AddShippingAccount?accountId="+n+"&quoteId="+r,{timeout:f.promise}).success(function(n){f.resolve(n)}).error(function(){f.reject()}),f.promise},u.AddQuote=function(n){var r=i.defer();return t.post(u.URL+"/Quote/AddQuoteJson/",{shippingAccount:n.shippingAccount,hiddenAccountID:n.AccountID,movedate:n.movedate,referralmethod:n.referralmethod,coll:null,personModel:null,businessModel:null}).success(function(n){r.resolve(n)}).error(function(){r.reject()}),r.promise},u.Quicklook=function(n){var r=i.defer();return u.servicePromise=i.defer(),t.post(u.URL+"/Quote/GetQuicklookByLookup/",{lookup:n},{ignoreLoadingBar:!0}).success(function(n){r.resolve(n);u.servicePromise.resolve(n)}).error(function(){u.servicePromise.reject()}),r.promise},u.GetQuoteFranchise=function(n){u.servicePromise=i.defer();var r=i.defer();return t.get(u.URL+"/Quote/FranchiseDetails/?id="+n).success(function(n){r.resolve(n);u.servicePromise.resolve(n)}).error(function(){u.servicePromise.reject()}),r.promise},u.GetAllStops=function(n){u.servicePromise=i.defer();var r=i.defer();return t.get(u.URL+"/Quote/StopsJson/?id="+n).success(function(n){r.resolve(n);u.servicePromise.resolve(n)}).error(function(){u.servicePromise.reject()}),r.promise},u.AddressSuggestions=function(n){u.servicePromise=i.defer();t.post(u.URL+"/Address/GetSuggestions/",{address:n}).success(function(n){var t=_.map(n,function(n){return{verified:!0,json:JSON.parse(JSON.stringify(n)),displayString:function(){return n.delivery_line_1+", "+n.last_line}}});u.servicePromise.resolve(t)}).error(function(){u.servicePromise.reject()})},u.UpdateStops=function(n,r){var f=JSON.stringify(r);u.servicePromise=i.defer();t.post(u.URL+"/Quote/Stops/",{quoteid:n,stopsjson:f}).success(function(){u.servicePromise.resolve()}).error(function(){u.servicePromise.reject()})},u.DeleteStop=function(n){u.servicePromise=i.defer();t.get(u.URL+"/Quote/DeleteStopJSON/?idd="+n).success(function(n){u.servicePromise.resolve(n)}).error(function(){u.servicePromise.reject()})},u.GetRecentQuote=function(n){var r=i.defer();return t.get(u.URL+"/Quote/GetRecentQuoteJson?lookup="+n).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},u}quoteApp.factory("quoteFactory",["$rootScope","$http","$q","$location",quoteFactory]);